/* empty css                    */import"./vue.f8494a3b.js";import{q as pn,D as f,ad as re,t as L,aM as k,a3 as T,aS as Bt,bD as gn,H as Ae,az as fn,a0 as D,aG as Yn,a4 as v,K as se,Q as G,aR as Ft,a2 as W,J as at,aa as h,ab as s,bf as J,aP as Jt,aN as Kt,l as ct,u as ca,ba as Ct,aK as Aa,w as Et,bb as Zt,aO as An,A as Ge,a1 as ie,bh as da,bB as oi,ay as Vt,bk as xn,V as li,j as ui,bE as Lt,aF as ci,aT as Rt,aV as Xe,z as Tt,bw as di,bA as gi,bl as Sa,as as Rn,I as fi,bn as mi}from"./@vue.f39bd477.js";import{L as qt}from"./lz-string.dccec454.js";import{c as Oa}from"./nanoevents.1080beb7.js";import{Y as pi}from"./vue-next-select.7e058054.js";import{D as vi}from"./vuedraggable.0800db33.js";import{p as hi}from"./vue-textarea-autosize.35804eaf.js";import{P as bi}from"./vue-panzoom.e1b3955c.js";import{s as yi,u as _i}from"./vue-toastification.c91ff665.js";import"./amator.0ea1c940.js";import"./bezier-easing.a990b400.js";import"./sortablejs.4c00aaaa.js";import"./panzoom.860778e1.js";import"./wheel.913c5885.js";import"./ngraph.events.083734c6.js";var Xn=Object.freeze(Object.defineProperty({__proto__:null,get beamer(){return Ru},get splatter(){return ju},get blaster(){return zu},get stunner(){return Uu},get hourglass(){return Gu},get xray(){return Hu},get plasma(){return Wu},get bomber(){return Zu},get winder(){return Yu},get antiwinder(){return Xu},get winderL(){return Ju},get winderR(){return Ku},get swamp(){return Qu},get thunder(){return ec},get pins(){return tc},get wysi(){return nc},get snail(){return ac},get turtle(){return ic},get fox(){return rc},get freezer(){return sc},get igniter(){return oc},get pagoda(){return lc},get decayer(){return uc},get splitter(){return cc},get stablizer(){return dc},get tachyon(){return gc},get sharpener(){return fc},get overclocker(){return mc},get lengthener(){return pc},get synthesizer(){return vc},get expander(){return hc},get energizer(){return bc},get multiplier(){return yc},get observer(){return _c},get thinker(){return wc}},Symbol.toStringTag,{value:"Module"}));const wi=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};wi();const Ci="modulepreload",xa={},Ni="./",Mn=function(t,n){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=`${Ni}${a}`,a in xa)return;xa[a]=!0;const i=a.endsWith(".css"),r=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${r}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":Ci,i||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),i)return new Promise((o,u)=>{l.addEventListener("load",o),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())},ki="./projInfo-schema.json",Si="Relooped",xi="A mod of delooped by ducdat0507",Mi="relooped",Ii="Mae Moon",Ti="",Fi="",$i="0.6",Ei="Relooped",Di=!0,Pi=!1,Ai=2,Oi=!1,qi=null,Bi="",Vi=["game"],Li=1,Ri=0,ji=!1,zi="base64";var me={$schema:ki,title:Si,description:xi,id:Mi,author:Ii,discordName:Ti,discordLink:Fi,versionNumber:$i,versionTitle:Ei,allowGoBack:Di,defaultShowSmall:Pi,defaultDecimalsShown:Ai,useHeader:Oi,banner:qi,logo:Bi,initialTabs:Vi,maxTickLength:Li,offlineLimit:Ri,enablePausing:ji,exportEncoding:zi};const Ui=pn({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});var Z=window.player=Ui;function ga(e){return JSON.stringify(e,(t,n)=>f(n))}var Se=(e,t)=>{const n=e.__vccOpts||e;for(const[a,i]of t)n[a]=i;return n};const Gi=["onClick"],Hi=re({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=L(!1),a=L(null);function i(){t("click"),a.value&&clearTimeout(a.value),n.value=!1,fn(()=>{n.value=!0,a.value=setTimeout(()=>n.value=!1,500)})}return(r,l)=>(k(),T("button",{onClick:gn(i,["stop"]),class:Ae(["feedback",{activated:n.value,left:r.left}])},[Bt(r.$slots,"default",{},void 0,!0)],10,Gi))}});var fa=Se(Hi,[["__scopeId","data-v-01a1b95c"]]);const Jn=e=>(Jt("data-v-ac351c02"),e=e(),Kt(),e),Wi={class:"error"},Zi={class:"error-title"},Yi={class:"error-details",style:{"margin-top":"-10px"}},Xi={key:0},Ji={class:"instructions"},Ki=["href"],Qi=Jn(()=>v("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1)),er=Jn(()=>v("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)),tr=Jn(()=>v("br",null,null,-1)),nr={key:0,style:{"margin-top":"20px"}},ar=Jn(()=>v("h3",null,"Other errors",-1)),ir=[ar],rr={class:"error-details"},sr={key:0,style:{"margin-top":"10px"}},or={key:1,style:{"margin-top":"10px"}},lr=re({__name:"Error",props:{errors:{}},setup(e){const t=e,n=D(()=>t.errors[0]),a=D(()=>t.errors.map(l=>l.stack==null?[]:l.stack.split(`
`))),i=D(()=>t.errors.map(l=>l.cause==null?[]:(typeof l.cause=="string"?l.cause:JSON.stringify(l.cause)).split(`
`)));function r(){let l=ga(Z);switch(me.exportEncoding){default:console.warn(`Unknown save encoding: ${me.exportEncoding}. Defaulting to lz`);case"lz":l=qt.compressToUTF16(l);break;case"base64":l=btoa(unescape(encodeURIComponent(l)));break;case"plain":break}console.log(l);const o=document.createElement("textarea");o.value=l,document.body.appendChild(o),o.select(),o.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(o)}return Yn(()=>{Z.autosave=!1,Z.devSpeed=0}),(l,o)=>(k(),T("div",Wi,[v("h1",Zi,se(n.value.name)+": "+se(n.value.message),1),v("div",Yi,[n.value.cause?(k(),T("div",Xi,[(k(!0),T(G,null,Ft(i.value[0],u=>(k(),T("div",{key:u},se(u),1))),128))])):W("",!0),n.value.stack?(k(),T("div",{key:1,style:at(n.value.cause?"margin-top: 10px":"")},[(k(!0),T(G,null,Ft(a.value[0],u=>(k(),T("div",{key:u},se(u),1))),128))],4)):W("",!0)]),v("div",Ji,[h(" Check the console for more details, and consider sharing it with the developers on "),v("a",{href:f(me).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,Ki),h("! "),s(fa,{onClick:r,class:"button",style:{display:"inline-flex"}},{default:J(()=>[Qi,er]),_:1}),tr,l.errors.length>1?(k(),T("div",nr,ir)):W("",!0),(k(!0),T(G,null,Ft(l.errors.slice(1),(u,c)=>(k(),T("div",{key:c,style:{"margin-top":"20px"}},[v("details",rr,[v("summary",null,se(u.name)+": "+se(u.message),1),u.cause?(k(),T("div",sr,[(k(!0),T(G,null,Ft(i.value[c+1],m=>(k(),T("div",{key:m},se(m),1))),128))])):W("",!0),u.stack?(k(),T("div",or,[(k(!0),T(G,null,Ft(a.value[c+1],m=>(k(),T("div",{key:m},se(m),1))),128))])):W("",!0)])]))),128))])]))}});var qa=Se(lr,[["__scopeId","data-v-ac351c02"]]);class ur{constructor(t){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}get size(){return this.map.size}get(t){const n=this.map.get(t);if(n!==void 0)return n!==this.first&&(n===this.last?(this.last=n.prev,this.last.next=void 0):(n.prev.next=n.next,n.next.prev=n.prev),n.next=this.first,this.first.prev=n,this.first=n),n.value}set(t,n){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");const a=new cr(t,n);for(this.first===void 0?(this.first=a,this.last=a):(a.next=this.first,this.first.prev=a,this.first=a),this.map.set(t,a);this.map.size>this.maxSize;){const i=this.last;this.map.delete(i.key),this.last=i.prev,this.last.next=void 0}}}class cr{constructor(t,n){this.next=void 0,this.prev=void 0,this.key=t,this.value=n}}const ia=17,dr=9e15,gr=Math.log10(9e15),fr=1/9e15,mr=308,pr=-324,Ma=5,vr=(1<<10)-1,hr=function(){const e=[];for(let n=pr+1;n<=mr;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),an=[2,Math.E,3,4,5,6,7,8,9,10],br=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],yr=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let x=function(t){return d.fromValue_noAlloc(t)},te=function(e,t,n){return d.fromComponents(e,t,n)},ue=function(t,n,a){return d.fromComponents_noNormalize(t,n,a)};const Gt=function(t,n){const a=n+1,i=Math.ceil(Math.log10(Math.abs(t))),r=Math.round(t*Math.pow(10,a-i))*Math.pow(10,i-a);return parseFloat(r.toFixed(Math.max(a-i,0)))},ra=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},_r=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const a=e*e;let i=e;return n=n+1/(12*i),i=i*a,n=n+1/(360*i),i=i*a,n=n+1/(1260*i),i=i*a,n=n+1/(1680*i),i=i*a,n=n+1/(1188*i),i=i*a,n=n+691/(360360*i),i=i*a,n=n+7/(1092*i),i=i*a,n=n+3617/(122400*i),Math.exp(n)/t},Ba=.5671432904097838,Ia=function(e,t=1e-10){let n,a;if(!Number.isFinite(e)||e===0)return e;if(e===1)return Ba;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(a=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(a-n)<t*Math.abs(a))return a;n=a}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Ta(e,t=1e-10){let n,a,i,r;if(!Number.isFinite(e.mag)||e.eq(d.dZero))return e;if(e.eq(d.dOne))return d.fromNumber(Ba);n=d.ln(e);for(let l=0;l<100;++l){if(a=n.neg().exp(),i=n.sub(e.mul(a)),r=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div(d.mul(2,n).add(2))))),d.abs(r.sub(n)).lt(d.abs(r).mul(t)))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)}const _=class{constructor(e){this.sign=0,this.mag=0,this.layer=0,e instanceof _?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/hr(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new _().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new _().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new _().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new _().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new _().fromDecimal(e)}static fromNumber(e){return new _().fromNumber(e)}static fromString(e){return new _().fromString(e)}static fromValue(e){return new _().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof _)return e;if(typeof e=="string"){const t=_.fromStringCache.get(e);return t!==void 0?t:_.fromString(e)}else return typeof e=="number"?_.fromNumber(e):_.dZero}static abs(e){return x(e).abs()}static neg(e){return x(e).neg()}static negate(e){return x(e).neg()}static negated(e){return x(e).neg()}static sign(e){return x(e).sign}static sgn(e){return x(e).sign}static round(e){return x(e).round()}static floor(e){return x(e).floor()}static ceil(e){return x(e).ceil()}static trunc(e){return x(e).trunc()}static add(e,t){return x(e).add(t)}static plus(e,t){return x(e).add(t)}static sub(e,t){return x(e).sub(t)}static subtract(e,t){return x(e).sub(t)}static minus(e,t){return x(e).sub(t)}static mul(e,t){return x(e).mul(t)}static multiply(e,t){return x(e).mul(t)}static times(e,t){return x(e).mul(t)}static div(e,t){return x(e).div(t)}static divide(e,t){return x(e).div(t)}static recip(e){return x(e).recip()}static reciprocal(e){return x(e).recip()}static reciprocate(e){return x(e).reciprocate()}static cmp(e,t){return x(e).cmp(t)}static cmpabs(e,t){return x(e).cmpabs(t)}static compare(e,t){return x(e).cmp(t)}static isNaN(e){return e=x(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=x(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return x(e).eq(t)}static equals(e,t){return x(e).eq(t)}static neq(e,t){return x(e).neq(t)}static notEquals(e,t){return x(e).notEquals(t)}static lt(e,t){return x(e).lt(t)}static lte(e,t){return x(e).lte(t)}static gt(e,t){return x(e).gt(t)}static gte(e,t){return x(e).gte(t)}static max(e,t){return x(e).max(t)}static min(e,t){return x(e).min(t)}static minabs(e,t){return x(e).minabs(t)}static maxabs(e,t){return x(e).maxabs(t)}static clamp(e,t,n){return x(e).clamp(t,n)}static clampMin(e,t){return x(e).clampMin(t)}static clampMax(e,t){return x(e).clampMax(t)}static cmp_tolerance(e,t,n){return x(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return x(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return x(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return x(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return x(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return x(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return x(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return x(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return x(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return x(e).gte_tolerance(t,n)}static pLog10(e){return x(e).pLog10()}static absLog10(e){return x(e).absLog10()}static log10(e){return x(e).log10()}static log(e,t){return x(e).log(t)}static log2(e){return x(e).log2()}static ln(e){return x(e).ln()}static logarithm(e,t){return x(e).logarithm(t)}static pow(e,t){return x(e).pow(t)}static pow10(e){return x(e).pow10()}static pow_base(e,t){return x(e).pow_base(t)}static root(e,t){return x(e).root(t)}static factorial(e,t){return x(e).factorial()}static gamma(e,t){return x(e).gamma()}static lngamma(e,t){return x(e).lngamma()}static exp(e){return x(e).exp()}static sqr(e){return x(e).sqr()}static sqrt(e){return x(e).sqrt()}static cube(e){return x(e).cube()}static cbrt(e){return x(e).cbrt()}static tetrate(e,t=2,n=ue(1,0,1)){return x(e).tetrate(t,n)}static iteratedexp(e,t=2,n=ue(1,0,1)){return x(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return x(e).iteratedlog(t,n)}static layeradd10(e,t){return x(e).layeradd10(t)}static layeradd(e,t,n=10){return x(e).layeradd(t,n)}static slog(e,t=10){return x(e).slog(t)}static lambertw(e){return x(e).lambertw()}static ssqrt(e){return x(e).ssqrt()}static pentate(e,t=2,n=ue(1,0,1)){return x(e).pentate(t,n)}static sin(e){return x(e).sin()}static cos(e){return x(e).cos()}static tan(e){return x(e).tan()}static asin(e){return x(e).asin()}static acos(e){return x(e).acos()}static atan(e){return x(e).atan()}static sinh(e){return x(e).sinh()}static cosh(e){return x(e).cosh()}static tanh(e){return x(e).tanh()}static asinh(e){return x(e).asinh()}static acosh(e){return x(e).acosh()}static atanh(e){return x(e).atanh()}static affordGeometricSeries(e,t,n,a){return this.affordGeometricSeries_core(x(e),x(t),x(n),a)}static sumGeometricSeries(e,t,n,a){return this.sumGeometricSeries_core(e,x(t),x(n),a)}static affordArithmeticSeries(e,t,n,a){return this.affordArithmeticSeries_core(x(e),x(t),x(n),x(a))}static sumArithmeticSeries(e,t,n,a){return this.sumArithmeticSeries_core(x(e),x(t),x(n),x(a))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(x(e),x(t),x(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return ue(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return ue(t,0,1);const n=Math.floor(Math.random()*(e+1));let a=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));let i=Math.pow(10,a);return Math.random()>.9&&(i=Math.trunc(i)),te(t,n,i)}static affordGeometricSeries_core(e,t,n,a){const i=t.mul(n.pow(a));return _.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,a){return t.mul(n.pow(a)).mul(_.sub(1,n.pow(e))).div(_.sub(1,n))}static affordArithmeticSeries_core(e,t,n,a){const r=t.add(a.mul(n)).sub(n.div(2)),l=r.pow(2);return r.neg().add(l.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,a){const i=t.add(a.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<fr)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=dr)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<gr&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,n=_.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");const a=e.split("^^^");if(a.length===2){const b=parseFloat(a[0]),C=parseFloat(a[1]),B=a[1].split(";");let F=1;if(B.length===2&&(F=parseFloat(B[1]),isFinite(F)||(F=1)),isFinite(b)&&isFinite(C)){const M=_.pentate(b,C,F);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}}const i=e.split("^^");if(i.length===2){const b=parseFloat(i[0]),C=parseFloat(i[1]),B=i[1].split(";");let F=1;if(B.length===2&&(F=parseFloat(B[1]),isFinite(F)||(F=1)),isFinite(b)&&isFinite(C)){const M=_.tetrate(b,C,F);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}}const r=e.split("^");if(r.length===2){const b=parseFloat(r[0]),C=parseFloat(r[1]);if(isFinite(b)&&isFinite(C)){const B=_.pow(b,C);return this.sign=B.sign,this.layer=B.layer,this.mag=B.mag,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}}e=e.trim().toLowerCase();let l,o,u=e.split("pt");if(u.length===2){l=10,o=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let b=parseFloat(u[1]);if(isFinite(b)||(b=1),isFinite(l)&&isFinite(o)){const C=_.tetrate(l,o,b);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}}if(u=e.split("p"),u.length===2){l=10,o=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let b=parseFloat(u[1]);if(isFinite(b)||(b=1),isFinite(l)&&isFinite(o)){const C=_.tetrate(l,o,b);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}}const c=e.split("e"),m=c.length-1;if(m===0){const b=parseFloat(e);if(isFinite(b))return this.fromNumber(b),_.fromStringCache.size>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}else if(m===1){const b=parseFloat(e);if(isFinite(b)&&b!==0)return this.fromNumber(b),_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}const p=e.split("e^");if(p.length===2){this.sign=1,p[0].charAt(0)=="-"&&(this.sign=-1);let b="";for(let C=0;C<p[1].length;++C){const B=p[1].charCodeAt(C);if(B>=43&&B<=57||B===101)b+=p[1].charAt(C);else return this.layer=parseFloat(b),this.mag=parseFloat(p[1].substr(C+1)),this.normalize(),_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}}if(m<1)return this.sign=0,this.layer=0,this.mag=0,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this;const w=parseFloat(c[0]);if(w===0)return this.sign=0,this.layer=0,this.mag=0,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this;let S=parseFloat(c[c.length-1]);if(m>=2){const b=parseFloat(c[c.length-2]);isFinite(b)&&(S*=Math.sign(b),S+=ra(b))}if(!isFinite(w))this.sign=c[0]==="-"?-1:1,this.layer=m,this.mag=S;else if(m===1)this.sign=Math.sign(w),this.layer=1,this.mag=S+Math.log10(Math.abs(w));else if(this.sign=Math.sign(w),this.layer=m,m===2){const b=_.mul(te(1,2,S),x(w));return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}else this.mag=S;return this.normalize(),_.fromStringCache.maxSize>=1&&_.fromStringCache.set(t,_.fromDecimal(this)),this}fromValue(e){return e instanceof _?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Gt(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Gt(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Ma?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Gt(this.m,e)+"e"+Gt(this.e,e):this.layer===1?Gt(this.m,e)+"e"+Gt(this.e,e):this.layer<=Ma?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Gt(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Gt(this.mag,e)}abs(){return ue(this.sign===0?0:1,this.layer,this.mag)}neg(){return ue(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?_.dZero:this.layer===0?te(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?_.dZero:this.layer===0?te(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?_.dZero:this.layer===0?te(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?_.dZero:this.layer===0?te(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=x(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return ue(0,0,0);let n,a;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(_.cmpabs(this,t)>0?(n=this,a=t):(n=t,a=this),n.layer===0&&a.layer===0)return _.fromNumber(n.sign*n.mag+a.sign*a.mag);const i=n.layer*Math.sign(n.mag),r=a.layer*Math.sign(a.mag);if(i-r>=2)return n;if(i===0&&r===-1){if(Math.abs(a.mag-Math.log10(n.mag))>ia)return n;{const l=Math.pow(10,Math.log10(n.mag)-a.mag),o=a.sign+n.sign*l;return te(Math.sign(o),1,a.mag+Math.log10(Math.abs(o)))}}if(i===1&&r===0){if(Math.abs(n.mag-Math.log10(a.mag))>ia)return n;{const l=Math.pow(10,n.mag-Math.log10(a.mag)),o=a.sign+n.sign*l;return te(Math.sign(o),1,Math.log10(a.mag)+Math.log10(Math.abs(o)))}}if(Math.abs(n.mag-a.mag)>ia)return n;{const l=Math.pow(10,n.mag-a.mag),o=a.sign+n.sign*l;return te(Math.sign(o),1,a.mag+Math.log10(Math.abs(o)))}}plus(e){return this.add(e)}sub(e){return this.add(x(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=x(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return ue(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return ue(this.sign*t.sign,0,1);let n,a;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,a=t):(n=t,a=this),n.layer===0&&a.layer===0)return _.fromNumber(n.sign*a.sign*n.mag*a.mag);if(n.layer>=3||n.layer-a.layer>=2)return te(n.sign*a.sign,n.layer,n.mag);if(n.layer===1&&a.layer===0)return te(n.sign*a.sign,1,n.mag+Math.log10(a.mag));if(n.layer===1&&a.layer===1)return te(n.sign*a.sign,1,n.mag+a.mag);if(n.layer===2&&a.layer===1){const i=te(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(te(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return te(n.sign*a.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&a.layer===2){const i=te(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(te(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return te(n.sign*a.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=x(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?_.dNaN:this.layer===0?te(this.sign,0,1/this.mag):te(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=x(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=x(e),n=this.mag>0?this.layer:-this.layer,a=t.mag>0?t.layer:-t.layer;return n>a?1:n<a?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=x(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=x(e);return this.lt(t)?t:this}min(e){const t=x(e);return this.gt(t)?t:this}maxabs(e){const t=x(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=x(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=x(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=x(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let a=this.mag,i=n.mag;return this.layer>n.layer&&(i=ra(i)),this.layer<n.layer&&(a=ra(a)),Math.abs(a-i)<=t*Math.max(Math.abs(a),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=x(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=x(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=x(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=x(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(_.dZero)?_.dZero:this.log10()}absLog10(){return this.sign===0?_.dNaN:this.layer>0?te(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):te(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?_.dNaN:this.layer>0?te(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):te(this.sign,0,Math.log10(this.mag))}log(e){return e=x(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?_.dNaN:this.layer===0&&e.layer===0?te(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):_.div(this.log10(),e.log10())}log2(){return this.sign<=0?_.dNaN:this.layer===0?te(this.sign,0,Math.log2(this.mag)):this.layer===1?te(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?te(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):te(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?_.dNaN:this.layer===0?te(this.sign,0,Math.log(this.mag)):this.layer===1?te(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?te(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):te(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=x(e),n=this,a=t;if(n.sign===0)return a.eq(0)?ue(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(a.sign===0)return ue(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return n;const i=n.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?i.neg():Math.abs(a.toNumber()%2)%2===0?i:_.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return _.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return te(1,0,t);if(e.sign===0)return _.dOne;e=ue(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?te(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?te(-e.sign,e.layer+1,-e.mag):_.dOne}pow_base(e){return x(e).pow(this)}root(e){const t=x(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?_.exp(_.mul(this,_.ln(this).sub(1))):_.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(ue(1,0,24)))return _.fromNumber(_r(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let a=e,i=12*a,r=1/i,l=t+r;if(l===t||(t=l,a=a*n,i=360*a,r=1/i,l=t-r,l===t))return _.exp(t);t=l,a=a*n,i=1260*a;let o=1/i;return t=t+o,a=a*n,i=1680*a,o=1/i,t=t-o,_.exp(t)}else return this.layer===1?_.exp(_.mul(this,_.ln(this).sub(1))):_.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?_.dOne:this.layer===0&&this.mag<=709.7?_.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?te(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?te(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):te(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return _.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return te(1,2,Math.log10(this.mag)-.3010299956639812);{const e=_.div(ue(this.sign,this.layer-1,this.mag),ue(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=ue(1,0,1)){if(e===1)return _.pow(this,t);if(e===0)return new _(t);if(this.eq(_.dOne))return _.dOne;if(this.eq(-1))return _.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return _.fromNumber(Math.E);const r=_.ln(this).neg();return r.lambertw().div(r)}else return i>1.444667861009766?_.fromNumber(Number.POSITIVE_INFINITY):_.dNaN}if(this.eq(_.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),_.fromNumber(i)}if(e<0)return _.iteratedlog(t,this,-e);t=x(t);const n=e;e=Math.trunc(e);const a=n-e;if(this.gt(_.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const r=t;if(t=this.pow(t),r.eq(t))return t}if(a!=0){const i=this.pow(t);return t.mul(1-a).add(i.mul(a))}return t}a!==0&&(t.eq(_.dOne)?this.gt(10)?t=this.pow(a):(t=_.fromNumber(_.tetrate_critical(this.toNumber(),a)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return ue(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=ue(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return _.tetrate(e,-t,this);e=x(e);let n=_.fromDecimal(this);const a=t;t=Math.trunc(t);const i=a-t;if(n.layer-e.layer>3){const r=Math.min(t,n.layer-e.layer-3);t-=r,n.layer-=r}for(let r=0;r<t;++r){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(r>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10,t=100){let n=.001,a=!1,i=!1,r=this.slog_internal(e).toNumber();for(let l=1;l<t;++l){const u=new _(e).tetrate(r).gt(this);if(l>1&&i!=u&&(a=!0),i=u,a?n/=2:n*=2,n=Math.abs(n)*(u?-1:1),r+=n,n===0)break}return _.fromNumber(r)}slog_internal(e=10){if(e=x(e),e.lte(_.dZero)||e.eq(_.dOne))return _.dNaN;if(e.lt(_.dOne))return this.eq(_.dOne)?_.dZero:this.eq(_.dZero)?_.dNegOne:_.dNaN;if(this.mag<0||this.eq(_.dZero))return _.dNegOne;let t=0,n=_.fromDecimal(this);if(n.layer-e.layer>3){const a=n.layer-e.layer-3;t+=a,n.layer-=a}for(let a=0;a<100;++a)if(n.lt(_.dZero))n=_.pow(e,n),t-=1;else{if(n.lte(_.dOne))return _.fromNumber(t+_.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=_.log(n,e)}return _.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:_.critical_section(e,t,yr)}static tetrate_critical(e,t){return _.critical_section(e,t,br)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let a=0,i=0;for(let l=0;l<an.length;++l)if(an[l]==e){a=n[l][Math.floor(t)],i=n[l][Math.ceil(t)];break}else if(an[l]<e&&an[l+1]>e){const o=(e-an[l])/(an[l+1]-an[l]);a=n[l][Math.floor(t)]*(1-o)+n[l+1][Math.floor(t)]*o,i=n[l][Math.ceil(t)]*(1-o)+n[l+1][Math.ceil(t)]*o;break}const r=t-Math.floor(t);return a<=0||i<=0?a*(1-r)+i*r:Math.pow(e,Math.log(a)/Math.log(e)*(1-r)+Math.log(i)/Math.log(e)*r)}layeradd10(e){e=_.fromValue_noAlloc(e).toNumber();const t=_.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let a=0;a<100;++a){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const a=this.slog(t).toNumber()+e;return a>=0?_.tetrate(t,a):Number.isFinite(a)?a>=-1?_.log(_.tetrate(t,a+1),t):_.log(_.log(_.tetrate(t,a+2),t),t):_.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return _.fromNumber(Ia(this.toNumber()));if(this.layer===0)return _.fromNumber(Ia(this.sign*this.mag));if(this.layer===1)return Ta(this);if(this.layer===2)return Ta(this);if(this.layer>=3)return ue(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return ue(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=ue(1,0,1)){t=x(t);const n=e;e=Math.trunc(e);const a=n-e;a!==0&&(t.eq(_.dOne)?(++e,t=_.fromNumber(a)):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?_.fromNumber(Math.sin(this.sign*this.mag)):ue(0,0,0)}cos(){return this.mag<0?_.dOne:this.layer===0?_.fromNumber(Math.cos(this.sign*this.mag)):ue(0,0,0)}tan(){return this.mag<0?this:this.layer===0?_.fromNumber(Math.tan(this.sign*this.mag)):ue(0,0,0)}asin(){return this.mag<0?this:this.layer===0?_.fromNumber(Math.asin(this.sign*this.mag)):ue(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?_.fromNumber(Math.acos(this.toNumber())):this.layer===0?_.fromNumber(Math.acos(this.sign*this.mag)):ue(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?_.fromNumber(Math.atan(this.sign*this.mag)):_.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return _.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return _.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?ue(Number.NaN,Number.NaN,Number.NaN):_.ln(this.add(1).div(_.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(_.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let d=_;d.fromStringCache=new ur(vr);d.dZero=ue(0,0,0);d.dOne=ue(1,0,1);d.dNegOne=ue(-1,0,1);d.dTwo=ue(1,0,2);d.dTen=ue(1,0,10);d.dNaN=ue(Number.NaN,Number.NaN,Number.NaN);d.dInf=ue(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);d.dNegInf=ue(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);d.dNumberMax=te(1,0,Number.MAX_VALUE);d.dNumberMin=te(1,0,Number.MIN_VALUE);x=d.fromValue_noAlloc;te=d.fromComponents;ue=d.fromComponents_noNormalize;d.fromMantissaExponent;d.fromMantissaExponent_noNormalize;const wr=new d(1);function Cn(e,t,n=!0){let a=d.log10(e).floor(),i=d.div(e,d.pow(10,a));i.toStringWithDecimalPlaces(t)==="10"&&(i=wr,a=a.add(1));const r=a.gte(1e9)?wt(a,Math.max(Math.max(t,3),me.defaultDecimalsShown)):a.gte(1e4)?jn(a,0):a.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+r:"e"+r}function jn(e,t){if(e==null)return"NaN";if(e=new d(e),e.mag<.001)return 0 .toFixed(t);const a=e.toStringWithDecimalPlaces(t).split(".");return a[0]=a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),a.length==1?a[0]:a[0]+"."+a[1]}function Va(e,t){return e==null?"NaN":(e=new d(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),me.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Cr=new d("eeee1000"),Nr=new d("e100000"),Fa=new d("e1000"),La=new d(1e9),kr=new d(1e6),Sr=new d(1e3),xr=new d(.98),Mr=new d(.001),Ra=new d(0);function wt(e,t,n){if(t==null&&(t=me.defaultDecimalsShown),n=n!=null?n:me.defaultShowSmall,e=new d(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+wt(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Cr)){const a=e.slog();return a.gte(kr)?"F"+wt(a.floor()):d.pow(10,a.sub(a.floor())).toStringWithDecimalPlaces(3)+"F"+jn(a.floor(),0)}else{if(e.gte(Nr))return Cn(e,0,!1);if(e.gte(Fa))return Cn(e,0);if(e.gte(La))return Cn(e,t);if(e.gte(Sr))return jn(e,0);if(e.gte(Mr)||!n)return Va(e,t);if(e.eq(Ra))return 0 .toFixed(t)}return e=za(e),e.lt(Fa)?Cn(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):wt(e,t)+"\u207B\xB9"}function ce(e){return e=new d(e),e.sign<0?"-"+ce(e.neg()):e.gte(La)||e.lte(xr)&&!e.eq(Ra)?wt(e):wt(e,0)}function ja(e){return d.lt(e,0)?"-"+ja(d.neg(e)):d.gt(e,2**51)?wt(d.div(e,31536e3))+"y":(e=new d(e).toNumber(),e<60?wt(e)+"s":e<3600?ce(Math.floor(e/60))+"m "+wt(e%60)+"s":e<86400?ce(Math.floor(e/3600))+"h "+ce(Math.floor(e/60)%60)+"m "+ce(e%60)+"s":e<31536e3?ce(Math.floor(e/84600)%365)+"d "+ce(Math.floor(e/3600)%24)+"h "+ce(Math.floor(e/60)%60)+"m":ce(Math.floor(e/31536e3))+"y "+ce(Math.floor(e/84600)%365)+"d "+ce(Math.floor(e/3600)%24)+"h")}function Ir(e,t,n){e=new d(e);let a=e.toStringWithDecimalPlaces(t);return new d(a).gte(n)&&(a=d.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),a}function Tr(e,t){return wt(e,t,!0)}function za(e){let t=d.log10(e).ceil();const n=d.div(e,d.pow(10,t));return t=t.neg(),e=new d(10).pow(t).times(n),e}var Fr=Object.freeze(Object.defineProperty({__proto__:null,default:d,exponentialFormat:Cn,commaFormat:jn,regularFormat:Va,format:wt,formatWhole:ce,formatTime:ja,toPlaces:Ir,formatSmall:Tr,invertOOM:za},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:$r,commaFormat:Er,regularFormat:Dr,format:We,formatWhole:pe,formatTime:Yt,toPlaces:Pr,formatSmall:Ar,invertOOM:Or}=Fr;window.Decimal=d;window.exponentialFormat=$r;window.commaFormat=Er;window.regularFormat=Dr;window.format=We;window.formatWhole=pe;window.formatTime=Yt;window.toPlaces=Pr;window.formatSmall=Ar;window.invertOOM=Or;function qr(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function zn(e){return typeof e=="function"}var H=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(H||{});const In=Symbol("DoNotCache");function R(e,t){const n=e[t];zn(n)&&n.length===0&&!n[In]?e[t]=D(n.bind(e)):zn(n)&&(e[t]=n.bind(e),e[t][In]=!0)}function Sn(e){return zn(e)&&!e[In]&&(e=D(e)),e}const vn=Symbol("Component"),hn=Symbol("GatherProps");let Br=0;function Kn(e="feature-"){return e+Br++}var vt=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(vt||{});function Qt(e){const t=f(e);return t!==2&&t!==!1}function Qn(e){return f(e)===1}function fe(e){return e[In]=!0,e}function xe(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function Vr(e,...t){const n=[],a=i=>{Object.keys(i).forEach(r=>{const l=i[r];l!=null&&typeof l=="object"&&(t.includes(l.type)?n.push(l):!(l instanceof d)&&!ct(l)&&a(l))})};return a(e),n}var Be=window.state=ca({lastTenTicks:[],hasNaN:!1,NaNPath:[],errors:pn([])});const rn={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var ma=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(ma||{}),It={classic:rn,paper:{...rn,variables:{...rn.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...rn,variables:{...rn.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...rn,variables:{...rn.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const Je=Oa();"fonts"in document&&(document.fonts.onloadingdone=()=>Je.emit("fontsLoaded"));var Lr=Object.freeze(Object.defineProperty({__proto__:null,globalBus:Je},Symbol.toStringTag,{value:"Module"}));function Ua(e={}){return Object.assign({id:`${me.id}-0`,name:"Default Save",tabs:me.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:me.id,modVersion:me.versionNumber,layers:{}},e)}function mt(e){const t=qt.compressToUTF16(ga(e!=null?e:Z));return localStorage.setItem((e!=null?e:Z).id,t),t}async function Rr(){zr();try{let e=localStorage.getItem(_e.active);if(e==null){await on(dn());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=qt.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==me.id){await on(dn());return}t.id=_e.active,await on(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await on(dn())}}function dn(){const e=qn(),t=Ua({id:e});return mt(t),_e.saves.push(e),t}function qn(){let e,t=0;do e=`${me.id}-${t++}`;while(localStorage.getItem(e)!=null);return e}const pa=L(!1);async function on(e){console.info("Loading save",e),pa.value=!0;const{layers:t,removeLayer:n,addLayer:a}=await Mn(()=>Promise.resolve().then(function(){return Vo}),void 0),{fixOldSave:i,getInitialLayers:r}=await Mn(()=>Promise.resolve().then(function(){return xu}),void 0);for(const l in t){const o=t[l];o&&n(o)}r(e).forEach(l=>a(l,e)),e=Ua(e),e.offlineProd&&e.time!=null&&e.time&&e.devSpeed!==0&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=Math.min(e.offlineTime+(Date.now()-e.time)/1e3,me.offlineLimit*3600)),e.time=Date.now(),e.modVersion!==me.versionNumber&&(i(e.modVersion,e),e.modVersion=me.versionNumber),Object.assign(Z,e),_e.active=Z.id,Je.emit("onLoad")}setInterval(()=>{Z.autosave&&mt()},1e3);window.onbeforeunload=()=>{Z.autosave&&mt()};window.save=mt;const jr=window.hardReset=async()=>{await on(dn())};window.deleteLowerSaves=()=>{const e=Object.values(_e.saves).indexOf(Z.id)+1;Object.values(_e.saves).slice(e).forEach(t=>localStorage.removeItem(t)),_e.saves=_e.saves.slice(0,e)};const Tn=pn({active:"",saves:[],showTPS:!0,theme:ma.Nordic,unthrottled:!1,alignUnits:!1,quality:2});Ct(Tn,e=>{const t=qt.compressToUTF16(JSON.stringify(e));localStorage.setItem(me.id,t)},{deep:!0});var _e=window.settings=Tn;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:ma.Nordic,alignUnits:!1,quality:2};Je.emit("loadSettings",e),Object.assign(Tn,e),jr()};function zr(){try{let e=localStorage.getItem(me.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=qt.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(Tn,t)}Je.emit("loadSettings",Tn)}catch{}}const Ur=pn([]),Gr=pn([]),Hr=pn([]),Wr={class:"table"},Zr=re({__name:"Column",setup(e){const t=D(()=>It[_e.theme].mergeAdjacent);return(n,a)=>(k(),T("div",Wr,[v("div",{class:Ae(["col",{mergeAdjacent:t.value}])},[Bt(n.$slots,"default")],2)]))}}),Yr={class:"table"};re({__name:"Row",setup(e){const t=D(()=>It[_e.theme].mergeAdjacent);return(n,a)=>(k(),T("div",Yr,[v("div",{class:Ae(["row",{mergeAdjacent:t.value}])},[Bt(n.$slots,"default")],2)]))}});function De(e,t="span"){return typeof e=="function"?re({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),re({template:e})):re({render:()=>({})}):e}function Mt(e){if(bn(e))return typeof e=="function"?e():De(e);const t=e[vn];return s(t,e[hn](),null)}function Bn(e){if(bn(e))return typeof e=="function"?e():typeof e=="string"?s(G,null,[e]):s(e,null,null);const t=e[vn];return s(t,e[hn](),null)}function $a(e,t){return e.reduce((n,a)=>s(G,null,[n,t,a]))}function bn(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[In]===!0}function Ga(e,t){const n=L(null),a=L(void 0);function i(o){n.value||(n.value=setInterval(l,250)),a.value=o}function r(){n.value&&(clearInterval(n.value),n.value=null)}function l(){t&&t.value?t.value():e&&e.value&&e.value(a.value)}return Aa(r),{start:i,stop:r,handleHolding:l}}function Un(e,t="div"){const n=Et();return Zt(()=>{n.value=De(Qe(e),t)}),n}function yn(e,t="div"){const n=Et(null);return Zt(()=>{const a=Qe(e);n.value=a==""||a==null?null:De(a,t)}),n}function Qe(e){return f(f(e))}function Y(...e){return e.includes(Object)||e.push(Object),e}const Xr=re({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var m;const n=L({}),a=new ResizeObserver(o),i=L(null);Yn(()=>{const p=i.value;p!=null&&a.observe(p)});let r=!0,l=L((m=i.value)==null?void 0:m.getBoundingClientRect());function o(){r&&(r=!1,fn(()=>{var p;l.value=(p=i.value)==null?void 0:p.getBoundingClientRect(),Object.values(n.value).filter(w=>w).forEach(w=>w.rect=w.element.getBoundingClientRect()),t("updateNodes",n.value),r=!0}))}Je.on("fontsLoaded",o);const u={attributes:!1,childList:!0,subtree:!1};An(va,(p,w)=>{const S=new MutationObserver(()=>c(p));S.observe(w,u),n.value[p]={element:w,observer:S,rect:w.getBoundingClientRect()},o()}),An(ha,p=>{var w;(w=n.value[p])==null||w.observer.disconnect(),n.value[p]=void 0,o()}),An(ba,n),An(ya,l);function c(p){const w=n.value[p];w!=null&&(w.rect=w.element.getBoundingClientRect(),t("updateNodes",n.value))}return(p,w)=>(k(),T(G,null,[Bt(p.$slots,"default",{},void 0,!0),v("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var Ha=Se(Xr,[["__scopeId","data-v-2b1dc1bc"]]);const Jr=["onPointerdown"],Kr={class:"modal-wrapper"},Qr={class:"modal-container"},es={class:"modal-header"},ts={class:"modal-body"},ns={class:"modal-footer"},as=v("div",{style:{"flex-grow":"1"}},null,-1),Dt=re({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=Ge(e),r=D(()=>f(i.modelValue)||o.value);function l(){n("update:modelValue",!1)}const o=L(!1),u=L(null),c=D(()=>{var m,p;return(p=(m=u.value)==null?void 0:m.nodes)!=null?p:null});return t({isOpen:r,nodes:c}),(m,p)=>(k(),ie(li,{to:"#modal-root"},[s(xn,{name:"modal",onBeforeEnter:p[0]||(p[0]=w=>o.value=!0),onAfterLeave:p[1]||(p[1]=w=>o.value=!1)},{default:J(()=>[da(v("div",Vt({class:"modal-mask",onPointerdown:gn(l,["self"])},m.$attrs),[v("div",Kr,[v("div",Qr,[v("div",es,[Bt(m.$slots,"header",{shown:r.value},()=>[h(" default header ")])]),v("div",ts,[s(Ha,{ref_key:"contextRef",ref:u},{default:J(()=>[Bt(m.$slots,"body",{shown:r.value},()=>[h(" default body ")])]),_:3},512)]),v("div",ns,[Bt(m.$slots,"footer",{shown:r.value},()=>[v("div",{style:{display:"flex","text-align":"center","--layer-color":"#dadafa"}},[as,v("button",{class:"feature can",onClick:l}," Back ")])])])])])],16,Jr),[[oi,m.modelValue]])]),_:3})]))}}),Ht=Symbol("ProxyState");function cn(e,t={}){const n=t;let a=!1,i=!1;function r(){return a||(i&&console.error("Cyclical dependency detected. Cannot evaluate lazy proxy."),i=!0,Object.assign(n,e.call(n,n)),a=!0),n}return new Proxy(n,{get(l,o){if(o===Ht)return r();const u=r()[o];return u!=null&&typeof u=="object"&&$t in u?u[$t]:u},set(l,o,u){return r()[o]=u,!0},has(l,o){return o===Ht?!0:Reflect.has(r(),o)},ownKeys(){return Reflect.ownKeys(r())},getOwnPropertyDescriptor(l,o){return a||(Object.assign(n,e.call(n,n)),a=!0),Object.getOwnPropertyDescriptor(l,o)}})}const Wa=d.ln(10);function Nn(e){return e}function is(e,t){return E(t)?t.invert(d.neg(e)):(console.error("Could not invert due to no input being a variable"),0)}function rs(e,t){return E(t)?t.isIntegrable()?g.neg(t.getIntegralFormula(e)):(console.error("Could not integrate due to variable not being integrable"),g.constant(0)):(console.error("Could not integrate due to no input being a variable"),g.constant(0))}function ss(e){return g.neg(e)}function os(e,t,n){return E(t)?t.invert(d.sub(e,Ve(n))):E(n)?n.invert(d.sub(e,Ve(t))):(console.error("Could not invert due to no input being a variable"),0)}function ls(e,t,n){var a,i;if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const r=t.getIntegralFormula(e);return g.times(n,(a=t.innermostVariable)!=null?a:0).add(r)}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const r=n.getIntegralFormula(e);return g.times(t,(i=n.innermostVariable)!=null?i:0).add(r)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function us(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e);return g.add(a,n)}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=n.getIntegralFormula(e);return g.add(a,t)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function cs(e,t,n){return E(t)?t.invert(d.add(e,Ve(n))):E(n)?n.invert(d.sub(Ve(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function ds(e,t,n){var a,i;if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const r=t.getIntegralFormula(e);return g.sub(r,g.times(n,(a=t.innermostVariable)!=null?a:0))}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const r=n.getIntegralFormula(e);return g.times(t,(i=n.innermostVariable)!=null?i:0).sub(r)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function gs(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e);return g.sub(a,n)}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=n.getIntegralFormula(e);return g.sub(a,t)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function fs(e,t,n){return E(t)?t.invert(d.div(e,Ve(n))):E(n)?n.invert(d.div(e,Ve(t))):(console.error("Could not invert due to no input being a variable"),0)}function ms(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e);return g.times(a,n)}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=n.getIntegralFormula(e);return g.times(a,t)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function ps(e,t,n){return E(t)?g.div(e,n):E(n)?g.div(e,t):(console.error("Could not apply substitution due to no input being a variable"),g.constant(0))}function vs(e,t,n){return E(t)?t.invert(d.mul(e,Ve(n))):E(n)?n.invert(d.div(Ve(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function hs(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e);return g.div(a,n)}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=n.getIntegralFormula(e);return g.div(t,a)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function bs(e,t,n){return E(t)?g.mul(e,n):E(n)?g.mul(e,t):(console.error("Could not apply substitution due to no input being a variable"),g.constant(0))}function ys(e,t){return E(t)?t.invert(d.recip(e)):(console.error("Could not invert due to no input being a variable"),0)}function _s(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.ln(n)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function ws(e,t){return E(t)?t.invert(d.pow10(e)):(console.error("Could not invert due to no input being a variable"),0)}function Cs(e){return d.ln(e).sub(1).times(e).div(Wa)}function Ns(e,t){if(E(t)){const n=Wa.times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function ks(e,t){return E(t)?t.isIntegrable()?new g({inputs:[t.getIntegralFormula(e)],evaluate:Cs,invert:Ns}):(console.error("Could not integrate due to variable not being integrable"),g.constant(0)):(console.error("Could not integrate due to no input being a variable"),g.constant(0))}function Ss(e,t,n){return E(t)?t.invert(d.pow(Ve(n),e)):E(n)?n.invert(d.root(Ve(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function xs(e,t){return d.ln(e).sub(1).times(e).div(d.ln(t))}function Ms(e,t,n){if(E(t)){const a=d.ln(Ve(n)).times(e);return t.invert(a.div(a.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Is(e,t,n){return E(t)?t.isIntegrable()?new g({inputs:[t.getIntegralFormula(e),n],evaluate:xs,invert:Ms}):(console.error("Could not integrate due to variable not being integrable"),g.constant(0)):(console.error("Could not integrate due to no input being a variable"),g.constant(0))}function Ts(e,t){return E(t)?t.invert(d.pow(2,e)):(console.error("Could not invert due to no input being a variable"),0)}function Fs(e){return d.ln(e).sub(1).times(e).div(d.ln(2))}function $s(e,t){if(E(t)){const n=d.ln(2).times(e);return t.invert(n.div(n.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Es(e,t){return E(t)?t.isIntegrable()?new g({inputs:[t.getIntegralFormula(e)],evaluate:Fs,invert:$s}):(console.error("Could not integrate due to variable not being integrable"),g.constant(0)):(console.error("Could not integrate due to no input being a variable"),g.constant(0))}function Ds(e,t){return E(t)?t.invert(d.exp(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ps(e){return d.ln(e).sub(1).times(e)}function As(e,t){return E(t)?t.invert(d.div(e,d.div(e,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Os(e,t){return E(t)?t.isIntegrable()?new g({inputs:[t.getIntegralFormula(e)],evaluate:Ps,invert:As}):(console.error("Could not integrate due to variable not being integrable"),g.constant(0)):(console.error("Could not integrate due to no input being a variable"),g.constant(0))}function qs(e,t,n){return E(t)?t.invert(d.root(e,Ve(n))):E(n)?n.invert(d.ln(e).div(d.ln(Ve(t)))):(console.error("Could not invert due to no input being a variable"),0)}function Bs(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e),i=g.add(n,1);return g.pow(a,i).div(i)}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=n.getIntegralFormula(e);return g.pow(t,a).div(g.ln(t))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function Vs(e,t){return E(t)?t.invert(d.root(e,10)):(console.error("Could not invert due to no input being a variable"),0)}function Ls(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.pow10(n).div(g.ln(10))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function Rs(e,t,n){return E(t)?t.invert(d.ln(e).div(d.ln(Ve(n)))):E(n)?n.invert(d.root(Ve(t),e)):(console.error("Could not invert due to no input being a variable"),0)}function js(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e);return g.pow(n,a).div(g.ln(n))}else if(E(n)){if(!n.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=n.getIntegralFormula(e),i=g.add(t,1);return g.pow(a,i).div(i)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function zs(e,t,n){return E(t)?t.invert(d.root(e,d.recip(Ve(n)))):E(n)?n.invert(d.ln(Ve(t)).div(d.ln(e))):(console.error("Could not invert due to no input being a variable"),0)}function Us(e,t,n){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const a=t.getIntegralFormula(e);return g.pow(a,g.recip(n).add(1)).times(n).div(g.add(n,1))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function Gs(e,t){return E(t)?t.invert(d.ln(e)):(console.error("Could not invert due to no input being a variable"),0)}function Hs(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.exp(n)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function Ws(e,t=2,n=d.fromComponents_noNormalize(1,0,1)){const a=d.minabs(t,1e308).toNumber();return d.tetrate(e,a,n)}function Zs(e,t,n,a){return E(t)?t.invert(d.ssqrt(e)):(console.error("Could not invert due to no input being a variable"),0)}function Ys(e,t=2,n=d.fromComponents_noNormalize(1,0,1)){const a=d.minabs(t,1e308).toNumber();return d.iteratedexp(e,a,new d(n))}function Xs(e,t,n,a){return E(t)?t.invert(d.iteratedlog(e,Math.E,d.minabs(1e308,Ve(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Js(e,t=10,n=2){const a=d.minabs(n,1e308).toNumber();return d.iteratedlog(e,t,a)}function Ks(e,t=10){const n=d.minabs(t,1e308).toNumber();return d.slog(e,n)}function Qs(e,t,n){return E(t)?t.invert(d.tetrate(e,d.minabs(1e308,Ve(n)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function eo(e,t,n){const a=d.minabs(t,1e308).toNumber();return d.layeradd(e,a,n)}function to(e,t,n,a){return E(t)?t.invert(d.layeradd(e,d.minabs(1e308,Ve(n)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function no(e,t){return E(t)?t.invert(d.pow(Math.E,e).times(e)):(console.error("Could not invert due to no input being a variable"),0)}function ao(e,t){return E(t)?t.invert(d.tetrate(e,2)):(console.error("Could not invert due to no input being a variable"),0)}function io(e,t,n){const a=d.minabs(t,1e308).toNumber();return d.pentate(e,a,n)}function ro(e,t){return E(t)?t.invert(d.asin(e)):(console.error("Could not invert due to no input being a variable"),0)}function so(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.cos(n).neg()}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function oo(e,t){return E(t)?t.invert(d.acos(e)):(console.error("Could not invert due to no input being a variable"),0)}function lo(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.sin(n)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function uo(e,t){return E(t)?t.invert(d.atan(e)):(console.error("Could not invert due to no input being a variable"),0)}function co(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.cos(n).ln().neg()}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function go(e,t){return E(t)?t.invert(d.sin(e)):(console.error("Could not invert due to no input being a variable"),0)}function fo(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.asin(n).times(n).add(g.sqrt(g.sub(1,g.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function mo(e,t){return E(t)?t.invert(d.cos(e)):(console.error("Could not invert due to no input being a variable"),0)}function po(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.acos(n).times(n).sub(g.sqrt(g.sub(1,g.pow(n,2))))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function vo(e,t){return E(t)?t.invert(d.tan(e)):(console.error("Could not invert due to no input being a variable"),0)}function ho(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.atan(n).times(n).sub(g.ln(g.pow(n,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function bo(e,t){return E(t)?t.invert(d.asinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function yo(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.cosh(n)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function _o(e,t){return E(t)?t.invert(d.acosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function wo(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.sinh(n)}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function Co(e,t){return E(t)?t.invert(d.atanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function No(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.cosh(n).ln()}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function ko(e,t){return E(t)?t.invert(d.sinh(e)):(console.error("Could not invert due to no input being a variable"),0)}function So(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.asinh(n).times(n).sub(g.pow(n,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function xo(e,t){return E(t)?t.invert(d.cosh(e)):(console.error("Could not invert due to no input being a variable"),0)}function Mo(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.acosh(n).times(n).sub(g.add(n,1).sqrt().times(g.sub(n,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function Io(e,t){return E(t)?t.invert(d.tanh(e)):(console.error("Could not invert due to no input being a variable"),0)}function To(e,t){if(E(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),g.constant(0);const n=t.getIntegralFormula(e);return g.atanh(n).times(n).add(g.sub(1,g.pow(n,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),g.constant(0)}function _n(e){return(t,n)=>new g({inputs:[t,n],evaluate:e,invert:Nn})}function E(e){return e instanceof Oe&&e.hasVariable()}function Ve(e,t){return e instanceof Oe?e.evaluate(t):f(e)}function Fo(){return g.pow(this,2).div(2)}function $o(){return this}const je=class{constructor(e){this.negate=this.neg,this.negated=this.neg,this.sgn=this.sign,this.plus=this.add,this.subtract=this.sub,this.minus=this.sub,this.multiply=this.mul,this.times=this.mul,this.divide=this.div,this.divideBy=this.div,this.dividedBy=this.div,this.reciprocal=this.recip,this.reciprocate=this.recip,this.logarithm=this.log;let t;"inputs"in e&&(e.inputs=e.inputs.map(n=>typeof n=="object"&&$t in n?n[$t]:n)),"variable"in e?(typeof e.variable=="object"&&$t in e.variable&&(e.variable=e.variable[$t]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Fo,internalIntegrateInner:$o,applySubstitution:Nn}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){var w,S;const{inputs:t,evaluate:n,invert:a,integrate:i,integrateInner:r,applySubstitution:l}=e,o=t.reduce((b,C)=>b+(C instanceof je?C.internalVariables:0),0),u=t.find(b=>b instanceof je&&b.hasVariable()),c=o===1?u==null?void 0:u.innermostVariable:void 0,m=(w=u==null?void 0:u.isInvertible())!=null?w:!1,p=(S=u==null?void 0:u.isIntegrable())!=null?S:!1;return{inputs:t,internalEvaluate:n,internalInvert:m?a:void 0,internalIntegrate:p?i:void 0,internalIntegrateInner:r,applySubstitution:l,innermostVariable:c,internalVariables:o}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t,n,a;return(a=(n=(t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>Ve(i,e))))!=null?n:this.hasVariable()?e:null)!=null?a:Ve(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,n)=>t instanceof je&&e.inputs[n]instanceof je?t.equals(e.inputs[n]):!(t instanceof je)&&!(e.inputs[n]instanceof je)&&d.eq(f(t),f(e.inputs[n])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new g({inputs:[e]})}static variable(e){return new g({variable:e})}static step(e,t,n){const a=n(g.variable(0)),i=Sn(t);function r(o){return d.lt(o,f(i))?o:d.add(a.evaluate(d.sub(o,f(i))),f(i))}function l(o,u){return E(u)&&a.isInvertible()?(d.gt(o,f(i))&&(o=d.add(a.invert(d.sub(o,f(i))),f(i))),u.invert(o)):(console.error("Could not invert due to no input being a variable"),0)}return new g({inputs:[e],evaluate:r,invert:a.isInvertible()&&a.hasVariable()?l:void 0})}static if(e,t,n,a){const i=L(0),r=g.variable(i),l=n(r),o=a==null?void 0:a(r),u=Sn(t);function c(p){return f(u)?(i.value=p,l.evaluate()):o?(i.value=p,o.evaluate()):p}function m(p,w){return!E(w)||!l.isInvertible()||o!=null&&!o.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):f(u)?w.invert(l.invert(p)):o?w.invert(o.invert(p)):w.invert(p)}return new g({inputs:[e],evaluate:c,invert:l.isInvertible()&&l.hasVariable()?m:void 0})}static conditional(e,t,n,a){return g.if(e,t,n,a)}static abs(e){return new g({inputs:[e],evaluate:d.abs})}static neg(e){return new g({inputs:[e],evaluate:d.neg,invert:is,applySubstitution:ss,integrate:rs})}static sign(e){return new g({inputs:[e],evaluate:d.sign})}static round(e){return new g({inputs:[e],evaluate:d.round})}static floor(e){return new g({inputs:[e],evaluate:d.floor})}static ceil(e){return new g({inputs:[e],evaluate:d.ceil})}static trunc(e){return new g({inputs:[e],evaluate:d.trunc})}static add(e,t){return new g({inputs:[e,t],evaluate:d.add,invert:os,integrate:ls,integrateInner:us,applySubstitution:Nn})}static sub(e,t){return new g({inputs:[e,t],evaluate:d.sub,invert:cs,integrate:ds,integrateInner:gs,applySubstitution:Nn})}static mul(e,t){return new g({inputs:[e,t],evaluate:d.mul,invert:fs,integrate:ms,applySubstitution:ps})}static div(e,t){return new g({inputs:[e,t],evaluate:d.div,invert:vs,integrate:hs,applySubstitution:bs})}static recip(e){return new g({inputs:[e],evaluate:d.recip,invert:ys,integrate:_s})}static clamp(e,t,n){return new g({inputs:[e,t,n],evaluate:d.clamp,invert:Nn})}static pLog10(e){return new g({inputs:[e],evaluate:d.pLog10})}static absLog10(e){return new g({inputs:[e],evaluate:d.absLog10})}static log10(e){return new g({inputs:[e],evaluate:d.log10,invert:ws,integrate:ks})}static log(e,t){return new g({inputs:[e,t],evaluate:d.log,invert:Ss,integrate:Is})}static log2(e){return new g({inputs:[e],evaluate:d.log2,invert:Ts,integrate:Es})}static ln(e){return new g({inputs:[e],evaluate:d.ln,invert:Ds,integrate:Os})}static pow(e,t){return new g({inputs:[e,t],evaluate:d.pow,invert:qs,integrate:Bs})}static pow10(e){return new g({inputs:[e],evaluate:d.pow10,invert:Vs,integrate:Ls})}static pow_base(e,t){return new g({inputs:[e,t],evaluate:d.pow_base,invert:Rs,integrate:js})}static root(e,t){return new g({inputs:[e,t],evaluate:d.root,invert:zs,integrate:Us})}static factorial(e){return new g({inputs:[e],evaluate:d.factorial})}static gamma(e){return new g({inputs:[e],evaluate:d.gamma})}static lngamma(e){return new g({inputs:[e],evaluate:d.lngamma})}static exp(e){return new g({inputs:[e],evaluate:d.exp,invert:Gs,integrate:Hs})}static sqr(e){return g.pow(e,2)}static sqrt(e){return g.root(e,2)}static cube(e){return g.pow(e,3)}static cbrt(e){return g.root(e,3)}static tetrate(e,t=2,n=d.fromComponents_noNormalize(1,0,1)){return new g({inputs:[e,t,n],evaluate:Ws,invert:Zs})}static iteratedexp(e,t=2,n=d.fromComponents_noNormalize(1,0,1)){return new g({inputs:[e,t,n],evaluate:Ys,invert:Xs})}static iteratedlog(e,t=10,n=1){return new g({inputs:[e,t,n],evaluate:Js})}static slog(e,t=10){return new g({inputs:[e,t],evaluate:Ks,invert:Qs})}static layeradd10(e,t){return new g({inputs:[e,t],evaluate:d.layeradd10})}static layeradd(e,t,n=10){return new g({inputs:[e,t,n],evaluate:eo,invert:to})}static lambertw(e){return new g({inputs:[e],evaluate:d.lambertw,invert:no})}static ssqrt(e){return new g({inputs:[e],evaluate:d.ssqrt,invert:ao})}static pentate(e,t=2,n=d.fromComponents_noNormalize(1,0,1)){return new g({inputs:[e,t,n],evaluate:io})}static sin(e){return new g({inputs:[e],evaluate:d.sin,invert:go,integrate:so})}static cos(e){return new g({inputs:[e],evaluate:d.cos,invert:mo,integrate:lo})}static tan(e){return new g({inputs:[e],evaluate:d.tan,invert:vo,integrate:co})}static asin(e){return new g({inputs:[e],evaluate:d.asin,invert:ro,integrate:fo})}static acos(e){return new g({inputs:[e],evaluate:d.acos,invert:oo,integrate:po})}static atan(e){return new g({inputs:[e],evaluate:d.atan,invert:uo,integrate:ho})}static sinh(e){return new g({inputs:[e],evaluate:d.sinh,invert:ko,integrate:yo})}static cosh(e){return new g({inputs:[e],evaluate:d.cosh,invert:xo,integrate:wo})}static tanh(e){return new g({inputs:[e],evaluate:d.tanh,invert:Io,integrate:No})}static asinh(e){return new g({inputs:[e],evaluate:d.asinh,invert:bo,integrate:So})}static acosh(e){return new g({inputs:[e],evaluate:d.acosh,invert:_o,integrate:Mo})}static atanh(e){return new g({inputs:[e],evaluate:d.atanh,invert:Co,integrate:To})}step(e,t){return g.step(this,e,t)}if(e,t){return g.if(this,e,t)}conditional(e,t){return g.if(this,e,t)}abs(){return g.abs(this)}neg(){return g.neg(this)}sign(){return g.sign(this)}round(){return g.round(this)}floor(){return g.floor(this)}ceil(){return g.ceil(this)}trunc(){return g.trunc(this)}add(e){return g.add(this,e)}sub(e){return g.sub(this,e)}mul(e){return g.mul(this,e)}div(e){return g.div(this,e)}recip(){return g.recip(this)}max(e){return g.max(this,e)}min(e){return g.min(this,e)}maxabs(e){return g.maxabs(this,e)}minabs(e){return g.minabs(this,e)}clamp(e,t){return g.clamp(this,e,t)}clampMin(e){return g.clampMin(this,e)}clampMax(e){return g.clampMax(this,e)}pLog10(){return g.pLog10(this)}absLog10(){return g.absLog10(this)}log10(){return g.log10(this)}log(e){return g.log(this,e)}log2(){return g.log2(this)}ln(){return g.ln(this)}pow(e){return g.pow(this,e)}pow10(){return g.pow10(this)}pow_base(e){return g.pow_base(this,e)}root(e){return g.root(this,e)}factorial(){return g.factorial(this)}gamma(){return g.gamma(this)}lngamma(){return g.lngamma(this)}exp(){return g.exp(this)}sqr(){return g.pow(this,2)}sqrt(){return g.root(this,2)}cube(){return g.pow(this,3)}cbrt(){return g.root(this,3)}tetrate(e=2,t=d.fromComponents_noNormalize(1,0,1)){return g.tetrate(this,e,t)}iteratedexp(e=2,t=d.fromComponents_noNormalize(1,0,1)){return g.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return g.iteratedlog(this,e,t)}slog(e=10){return g.slog(this,e)}layeradd10(e){return g.layeradd10(this,e)}layeradd(e,t){return g.layeradd(this,e,t)}lambertw(){return g.lambertw(this)}ssqrt(){return g.ssqrt(this)}pentate(e=2,t=d.fromComponents_noNormalize(1,0,1)){return g.pentate(this,e,t)}sin(){return g.sin(this)}cos(){return g.cos(this)}tan(){return g.tan(this)}asin(){return g.asin(this)}acos(){return g.acos(this)}atan(){return g.atan(this)}sinh(){return g.sinh(this)}cosh(){return g.cosh(this)}tanh(){return g.tanh(this)}asinh(){return g.asinh(this)}acosh(){return g.acosh(this)}atanh(){return g.atanh(this)}};let Oe=je;Oe.negate=je.neg;Oe.negated=je.neg;Oe.sgn=je.sign;Oe.plus=je.add;Oe.subtract=je.sub;Oe.minus=je.sub;Oe.multiply=je.mul;Oe.times=je.mul;Oe.divide=je.div;Oe.divideBy=je.div;Oe.dividedBy=je.div;Oe.reciprocal=je.recip;Oe.reciprocate=je.recip;Oe.max=_n(d.max);Oe.min=_n(d.min);Oe.minabs=_n(d.minabs);Oe.maxabs=_n(d.maxabs);Oe.clampMin=_n(d.clampMin);Oe.clampMax=_n(d.clampMax);Oe.logarithm=je.log;class g extends Oe{invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),n=d.add(this.evaluate(0),this.evaluate(1)).div(2);return d.sub(n,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),g.constant(0);let n=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(a=>n=a(n)),this.integralFormula=n}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),g.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),g.constant(0)):(t.push(n=>this.applySubstitution.call(this,n,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),g.constant(0)))}}function Eo(e,t,n=!0,a,i=d.dInf){const r=Sn(n),l=Sn(a),o=Sn(i);return D(()=>{var w,S,b,C;const u=f(o);if(d.eq(u,1))return d.gte(t.value,e.evaluate())?d.dOne:d.dZero;const c=f(r),m=(w=f(l))!=null?w:c?10:0;let p=0;if(d.gt(u,m)){if(!e.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(c){if(!e.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;p=d.floor(e.invertIntegral(d.add(t.value,e.evaluateIntegral()))).sub((S=f(e.innermostVariable))!=null?S:0)}else p=d.floor(e.invert(t.value))}if(p=d.clampMax(p,u),m>0){const B=p;p=d.sub(p,m).clampMin(0);let F;for(c?F=Vn(e,p,!0,0):F=e.evaluate(d.add((b=f(e.innermostVariable))!=null?b:0,p));d.lt(p,u)&&d.lt(p,Number.MAX_SAFE_INTEGER)&&d.add(B,1).gte(p);){const M=e.evaluate(p.add((C=f(e.innermostVariable))!=null?C:0));if(d.add(F,M).lte(t.value))p=p.add(1),F=d.add(F,M);else break}}return p})}function Vn(e,t,n=!0,a){var u;if(d.eq(t,1))return e.evaluate();const i=(u=f(e.innermostVariable))!=null?u:0;let r=d.add(t,i);const l=r;a!=null||(a=n?10:0),r=r.sub(a).clampMin(i);let o=0;if(d.gt(t,a)){if(!e.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(n){if(!e.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(o=d.sub(e.evaluateIntegral(r),e.evaluateIntegral()),l.gt(1e308))return d.add(o,d.sub(l,r).times(e.evaluate(r)))}else if(o=e.evaluate(r),r=r.add(1),l.gt(1e308))return d.sub(l,r).add(1).times(o)}for(let c=r.toNumber();c<l.toNumber();c++)o=d.add(o,e.evaluate(c));return o}const Xt=Symbol("PersistentState"),mn=Symbol("DefaultValue"),Gn=Symbol("StackTrace"),Hn=Symbol("Deleted"),$t=Symbol("NonPersistent"),ln=Symbol("SaveDataPath"),la=Symbol("SkipPersistence");function Do(){var e,t;return(t=(e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(n=>n.trim()).join(`
`))!=null?t:""}function Ea(e,t){var n;d.isNaN(t)&&(Be.hasNaN||(Z.autosave=!1,Be.hasNaN=!0,Be.NaNPath=e[ln],Be.NaNPersistent=e),console.error(`Attempted to save NaN value to ${(n=e[ln])==null?void 0:n.join(".")}`)),e[Xt].value=t}function ye(e,t=!0){const n=ct(e)?e:L(e);ct(e)&&(e=e.value);const a=D({get(){return n.value},set(r){t?Ea(i,r):i[Xt].value=r}});a[mn]=e;const i={get value(){return n.value},set value(r){t?Ea(i,r):i[Xt].value=r},__v_isRef:!0,[Xt]:n,[mn]:e,[Gn]:Do(),[Hn]:!1,[$t]:a,[ln]:void 0};return ut.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",i,`
Created at:
`+i[Gn]):un[ut[ut.length-1]].add(i),i}function Po(e){return e!=null&&typeof e=="object"&&Xt in e}function Ee(e){return!(Ht in e)&&$t in e?e[$t]:new Proxy(e,{get(t,n){if(n!==Xt)return n===la?!0:t[n]},set(t,n,a){return t[n]=a,!0},has(t,n){return n===Xt?!1:n==la?!0:Reflect.has(t,n)}})}function Ao(e){ut.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",e):un[ut[ut.length-1]].delete(e),e[Hn]=!0}Je.on("addLayer",(e,t)=>{const n=[],a=(i,r=[])=>{let l=!1;return Object.keys(i).forEach(o=>{let u=i[o];if(u!=null&&typeof u=="object"){if(u[la]===!0)return;if(Ht in u&&(u=u[Ht]),Po(u)){if(l=!0,u[Hn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",u,`
Created at:
`+u[Gn]);return}un[e.id].delete(u);const c=[e.id,...r,o];u[ln]!=null&&JSON.stringify(c)!==JSON.stringify(u[ln])&&console.error(`Persistent ref is being saved to \`${c.join(".")}\` when it's already present at \`${u[ln].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),u[ln]=c;const m=r.reduce((w,S)=>(S in w||(w[S]={}),w[S]),t),p=m[o];m[o]=u[Xt],ui(m)?p!=null?m[o]=p:m[o]=u[mn]:p!=null?m[o].value=p:m[o].value=u[mn]}else!(u instanceof d)&&!(u instanceof g)&&!ct(u)&&!n.includes(u)&&(typeof u.type=="symbol"&&n.push(u),a(u,[...r,o])&&(Lt(u)&&!Lt(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",Ht in i?i[Ht]:i,o):l=!0))}}),l};a(e[Ht]),un[e.id].forEach(i=>{i[Hn]||console.error(`Created persistent ref in ${e.id} without registering it to the layer!`,`Make sure to include everything persistent in the returned object.

Created at:
`+i[Gn])}),un[e.id].clear()});const va=Symbol("RegisterNode"),ha=Symbol("UnregisterNode"),ba=Symbol("Nodes"),ya=Symbol("Bounds"),it=ca({});window.layers=it;const un={},ut=[];function _a(e,t){return cn(()=>{const n={},a=n.emitter=Oa();if(n.on=a.on.bind(a),n.emit=a.emit.bind(a),n.nodes=L({}),n.id=e,ut.push(e),un[e]=new Set,n.minimized=ye(!1,!1),Object.assign(n,t.call(n,n)),ut[ut.length-1]==null||ut[ut.length-1]!==e)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${ut}
Trying to pop ${n.id}`);ut.pop(),R(n,"color"),R(n,"display"),R(n,"classes"),R(n,"style"),R(n,"name"),xe(n,"name",n.id),R(n,"minWidth"),xe(n,"minWidth",600),R(n,"minimizable"),xe(n,"minimizable",!0),R(n,"minimizedDisplay");const i=n.style;return n.style=D(()=>{var l,o;let r=f(n.minWidth);return(typeof r=="number"||!Number.isNaN(parseInt(r)))&&(r=r+"px"),[(l=f(i))!=null?l:"",(o=n.minimized)!=null&&o.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:r,flexBasis:r,margin:""}]}),n})}function Za(e,t){if(console.info("Adding layer",e.id),it[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,it[e.id]);return}xe(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),it[e.id]=e,Je.emit("addLayer",e,t.layers[e.id])}function Oo(e){return it[e]}function Ya(e){console.info("Removing layer",e.id),Je.emit("removeLayer",e),it[e.id]=void 0}function qo(e){Ya(e),Za(e,Z)}function Bo(e){const t=L(!1);return{openModal:()=>t.value=!0,modal:fe(()=>s(Dt,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>s("h2",null,[f(e.name)]),body:f(e.display)}))}}Je.on("update",function(t){Object.values(it).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(it).forEach(n=>{n==null||n.emit("update",t)}),Object.values(it).forEach(n=>{n==null||n.emit("postUpdate",t)})});var Vo=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:va,UnregisterNodeInjectionKey:ha,NodesInjectionKey:ba,BoundsInjectionKey:ya,layers:it,persistentRefs:un,addingLayers:ut,createLayer:_a,addLayer:Za,getLayer:Oo,removeLayer:Ya,reloadLayer:qo,setupLayerModal:Bo},Symbol.toStringTag,{value:"Module"}));const Lo=re({components:{Context:Ha,ErrorVue:qa},props:{index:{type:Number,required:!0},display:{type:Y(Object,String,Function),required:!0},minimizedDisplay:Y(Object,String,Function),minimized:{type:Object,required:!0},name:{type:Y(String),required:!0},color:Y(String),minimizable:Y(Boolean),nodes:{type:Object,required:!0}},emits:["setMinimized"],setup(e){const{display:t,index:n,minimized:a,minimizedDisplay:i}=Ge(e),r=Un(t),l=yn(i),o=D(()=>me.allowGoBack&&n.value>0&&!Qe(a));function u(){Z.tabs.splice(f(e.index),1/0)}function c(p){e.nodes.value=p}const m=L([]);return ci((p,w,S)=>(console.warn(`Error caught in "${e.name}" layer`,p,w,S),m.value.push(p instanceof Error?p:new Error(JSON.stringify(p))),!1)),{component:r,minimizedComponent:l,showGoBack:o,updateNodes:c,unref:f,goBack:u,errors:m}}}),Ro={key:1};function jo(e,t,n,a,i,r){const l=Rt("ErrorVue"),o=Rt("Context");return e.errors.length>0?(k(),ie(l,{key:0,errors:e.errors},null,8,["errors"])):(k(),T("div",Vt({key:1,class:"layer-container",style:{"--layer-color":e.unref(e.color)}},e.$attrs),[e.showGoBack?(k(),T("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...u)=>e.goBack&&e.goBack(...u))},"\u274C")):W("",!0),e.unref(e.minimized)?(k(),T("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=u=>e.$emit("setMinimized",!1))},[e.minimizedComponent?(k(),ie(Xe(e.minimizedComponent),{key:0})):(k(),T("div",Ro,se(e.unref(e.name)),1))])):(k(),T("div",{key:2,class:Ae(["layer-tab",{showGoBack:e.showGoBack}])},[s(o,{onUpdateNodes:e.updateNodes},{default:J(()=>[(k(),ie(Xe(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(k(),T("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=u=>e.$emit("setMinimized",!0))}," \u25BC ")):W("",!0)],16))}var zo=Se(Lo,[["render",jo],["__scopeId","data-v-a9f5b1da"]]);const en=e=>(Jt("data-v-6a06f016"),e=e(),Kt(),e),Uo=en(()=>v("h2",null,"Changelog",-1)),Go=en(()=>v("details",{open:""},[v("summary",null,[h("v0.6.1 QoL Patch 1 - "),v("time",null,"2025-02-18")]),v("ul",null,[v("li",{class:"feature"},"Added the option to open 10 capsules at once"),v("li",{class:"feature"},"Added a new research upgrade")]),v("summary",null,[h("v0.6 Relooped - "),v("time",null,"2025-02-08")]),v("ul",null,[v("li",{class:"feature"},"Added two new research upgrades"),v("li",{class:"feature"},"Added building enhancements (WIP)"),v("li",{class:"fix"},"Fixed a crash from the original game lol")])],-1)),Ho=en(()=>v("details",{open:""},[v("summary",null,[h("v0.5 The Last Update (for now) - "),v("time",null,"2023-05-29")]),v("ul",null,[v("li",{class:"feature"},"Added new buildings"),v("li",{class:"changed"},"Added transition animations between hub and game")])],-1)),Wo=en(()=>v("details",{open:""},[v("summary",null,[h("v0.4 this game isn't that great tbh - "),v("time",null,"2023-05-28")]),v("ul",null,[v("li",{class:"feature"},"Added new buildings"),v("li",{class:"changed"},"Adjusted enemies' health formula"),v("li",{class:"changed"},"Changed how game modes affect health"),v("li",{class:"changed"},"Style polishments")])],-1)),Zo=en(()=>v("details",null,[v("summary",null,[h("v0.3 Lesser Prototypey Thing - "),v("time",null,"2023-05-27")]),v("ul",null,[v("li",{class:"feature"},"Added new building type - Influencer"),v("li",{class:"feature"},"Added new buildings"),v("li",{class:"feature"},"Added new objectives")])],-1)),Yo=en(()=>v("details",null,[v("summary",null,[h("v0.2.1 Slightly Less Prototypey Thing - "),v("time",null,"2023-05-27")]),v("ul",null,[v("li",{class:"fix"},"Fix breaking error")])],-1)),Xo=en(()=>v("details",null,[v("summary",null,[h("v0.2 Slightly Less Prototypey Thing - "),v("time",null,"2023-05-26")]),v("ul",null,[v("li",{class:"feature"},"Added the meta game"),v("li",{class:"feature"},"Added more buildings")])],-1)),Jo=en(()=>v("details",null,[v("summary",null,[h("v0.1 Prototype Thing - "),v("time",null,"2023-05-25")]),h(" This is the first release :D "),v("ul",null,[v("li",{class:"feature"},"Did everything"),v("li",{class:"fix"},"Had some fun"),v("li",{class:"breaking"},"Removed everything"),v("li",{class:"changed"},"Created some bugs to fix later")])],-1)),Ko=re({__name:"Changelog",setup(e,{expose:t}){const n=L(!1);return t({open(){n.value=!0}}),(a,i)=>(k(),ie(Dt,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=r=>n.value=r)},{header:J(()=>[Uo]),body:J(()=>[Go,Ho,Wo,Zo,Yo,Xo,Jo]),_:1},8,["modelValue"]))}});var Qo=Se(Ko,[["__scopeId","data-v-6a06f016"]]),el=re({props:{element:Object,display:{type:Y(Object,String,Function),required:!0},style:Y(Object,String,Array),classes:Y(Object),direction:Y(String),xoffset:Y(String),yoffset:Y(String),pinned:Object},setup(e){const{element:t,display:n,pinned:a}=Ge(e),i=L(!1),r=D(()=>(Qe(a)||i.value)&&l.value),l=yn(n),o=Et(De(fe(()=>{const m=Qe(t);return m==null?"":Bn(m)})));function u(m){const p=a;m.shiftKey&&p&&(p.value=!p.value,m.stopPropagation(),m.preventDefault())}const c=D(()=>Qe(a)&&It[_e.theme].showPin);return{Direction:H,isHovered:i,isShown:r,comp:l,elementComp:o,unref:f,togglePinned:u,showPin:c}}});const tl={key:0,class:"material-icons pinned"};function nl(e,t,n,a,i,r){return k(),T("div",{class:Ae(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=l=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=l=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...l)=>e.togglePinned&&e.togglePinned(...l))},[Bt(e.$slots,"default",{},void 0,!0),e.elementComp?(k(),ie(Xe(e.elementComp),{key:0})):W("",!0),s(xn,{name:"fade"},{default:J(()=>{var l;return[e.isShown?(k(),T("div",{key:0,class:Ae(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:at([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(l=e.unref(e.style))!=null?l:{}])},[e.showPin?(k(),T("span",tl,"push_pin")):W("",!0),e.comp?(k(),ie(Xe(e.comp),{key:1})):W("",!0)],6)):W("",!0)]}),_:1})],34)}var Ue=Se(el,[["render",nl],["__scopeId","data-v-6102fa3a"]]);const Pt=e=>(Jt("data-v-fc6ee478"),e=e(),Kt(),e),al=Pt(()=>v("h1",{class:"result-title"},"RELOOPED",-1)),il={style:{"font-style":"italic"}},rl={key:0,style:{"text-align":"center"}},sl={key:0},ol={style:{display:"inline-block"},href:"https://maemoon.me",target:"_blank"},ll=Pt(()=>v("br",null,null,-1)),ul=Pt(()=>v("div",null,[h(" A mod of "),v("a",{style:{display:"inline-block"},href:"https://itch.io/jam/profectus-creation-jam",target:"_blank"}," Delooped "),h(" by ducdat0507 ")],-1)),cl=Pt(()=>v("div",{style:{"font-size":"smaller",opacity:".5"}}," (Profectus by thepaperpilot, with inspiration from Acameada and Jacorb) ",-1)),dl=Pt(()=>v("br",null,null,-1)),gl=Pt(()=>v("br",null,null,-1)),fl=["href"],ml=Pt(()=>v("span",{class:"material-icons info-modal-discord"},"discord",-1)),pl=Pt(()=>v("div",null,[v("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[v("span",{class:"material-icons info-modal-discord"},"discord"),h(" The Paper Pilot Community ")])],-1)),vl=Pt(()=>v("div",null,[v("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[v("span",{class:"material-icons info-modal-discord"},"discord"),h(" The Modding Tree ")])],-1)),hl=Pt(()=>v("br",null,null,-1));var bl=re({__name:"Info",props:{changelog:{}},setup(e,{expose:t}){const n=e,{title:a,logo:i,author:r,discordName:l,discordLink:o,versionNumber:u,versionTitle:c}=me,m=Ge(n),p=L(!1),w=D(()=>Yt(Z.timePlayed)),S=D(()=>De(fe(()=>s(G,null,[Gr.map(Mt)]))));t({open(){p.value=!0}});function b(){var C;console.log(m.changelog),(C=f(m.changelog))==null||C.open()}return(C,B)=>(k(),ie(Dt,{modelValue:p.value,"onUpdate:modelValue":B[0]||(B[0]=F=>p.value=F)},{header:J(()=>[al,v("h2",il," - "+se(f(c))+" - ",1),v("h4",null," v"+se(f(u)),1)]),body:J(({shown:F})=>[F?(k(),T("div",rl,[f(r)?(k(),T("div",sl,[h("by "),v("a",ol,se(f(r)),1)])):W("",!0),ll,ul,cl,dl,v("div",{class:"link",onClick:b},"Changelog"),gl,v("div",null,[f(o)?(k(),T("a",{key:0,href:f(o),class:"info-modal-discord-link",target:"_blank"},[ml,h(" "+se(f(l)),1)],8,fl)):W("",!0)]),pl,vl,hl,v("div",null,"Time Played: "+se(w.value),1),(k(),ie(Xe(S.value)))])):W("",!0)]),_:1},8,["modelValue"]))}});var yl=Se(bl,[["__scopeId","data-v-fc6ee478"]]);const _l={class:"field"},wl={key:0,class:"field-title"},ua=re({__name:"Select",props:{title:{type:[String,Object,Function]},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var l;const n=e,a=yn(Tt(n,"title"),"span"),i=L((l=n.options.find(o=>o.value===n.modelValue))!=null?l:null);Ct(Tt(n,"modelValue"),o=>{var u;Qe(i)!==o&&(i.value=(u=n.options.find(c=>c.value===o))!=null?u:null)});function r(o){t("update:modelValue",o.value)}return(o,u)=>(k(),T("div",_l,[f(a)?(k(),T("span",wl,[(k(),ie(Xe(f(a))))])):W("",!0),s(f(pi),{options:o.options,modelValue:i.value,"onUpdate:modelValue":[u[0]||(u[0]=c=>i.value=c),r],min:1,"label-by":"label",placeholder:o.placeholder,"close-on-select":o.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Cl={class:"field"},Nl=re({__name:"Toggle",props:{title:{type:[String,Object,Function]},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=D(()=>{var r;return De((r=f(n.title))!=null?r:"<span></span>","span")}),i=D({get(){return!!n.modelValue},set(r){t("update:modelValue",r)}});return(r,l)=>(k(),T("label",Cl,[da(v("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":l[0]||(l[0]=o=>i.value=o)},null,512),[[di,i.value]]),(k(),ie(Xe(a.value)))]))}});var Wt=Se(Nl,[["__scopeId","data-v-11046116"]]);const kl=v("h1",{class:"result-title"},"SETTINGS",-1),Sl=v("h2",{style:{"font-style":"italic"}}," - Tweak your preferences. - ",-1),xl={class:"option-tabs"},Ml={key:0},Il={key:1};var Tl=re({__name:"Options",setup(e,{expose:t}){const n=L(!1),a=L("behaviour");function i(Ce){return Ce==a.value}function r(Ce){a.value=Ce}t({isTab:i,setTab:r,save:mt,open(){n.value=!0}});const l=Object.keys(It).map(Ce=>({label:qr(Ce),value:Ce})),o=[{label:"Low",value:0},{label:"Medium",value:1},{label:"High",value:2}],u=D(()=>De(fe(()=>s(G,null,[Ur.map(Mt)])))),{showTPS:c,theme:m,unthrottled:p,alignUnits:w,quality:S}=Ge(_e),{autosave:b,offlineProd:C}=Ge(Z),B=D({get(){return Z.devSpeed===0},set(Ce){Z.devSpeed=Ce?0:null}}),F=fe(()=>s("span",{class:"option-title"},[h("Unthrottled"),s("desc",null,[h("Allow the game to run as fast as possible. Not battery friendly.")])])),M=fe(()=>s("span",{class:"option-title"},[h("Offline Production"),s(Ue,{display:"Save-specific",direction:H.Right},{default:()=>[h("*")]}),s("desc",null,[h("Simulate production that occurs while the game is closed.")])])),I=fe(()=>s("span",{class:"option-title"},[h("Autosave"),s(Ue,{display:"Save-specific",direction:H.Right},{default:()=>[h("*")]}),s("desc",null,[h("Automatically save the game every second or when the game is closed.")])])),K=fe(()=>s("span",{class:"option-title"},[h("Pause game"),s(Ue,{display:"Save-specific",direction:H.Right},{default:()=>[h("*")]}),s("desc",null,[h("Stop everything from moving.")])])),oe=fe(()=>s("span",{class:"option-title"},[h("Theme"),s("desc",null,[h("How the game looks.")])])),we=fe(()=>s("span",{class:"option-title"},[h("Quality"),s("desc",null,[h("How much should the game trade performance for visual quality.")])])),rt=fe(()=>s("span",{class:"option-title"},[h("Show TPS"),s("desc",null,[h("Show TPS meter at the bottom-left corner of the page.")])]));return fe(()=>s("span",{class:"option-title"},[h("Align modifier units"),s("desc",null,[h("Align numbers to the beginning of the unit in modifier view.")])])),(Ce,ve)=>(k(),ie(Dt,{modelValue:n.value,"onUpdate:modelValue":ve[10]||(ve[10]=V=>n.value=V)},{header:J(()=>[kl,Sl,v("div",xl,[v("button",{class:Ae({selected:i("behaviour")}),onClick:ve[0]||(ve[0]=V=>r("behaviour"))},"Behaviour",2),v("button",{class:Ae({selected:i("appearance")}),onClick:ve[1]||(ve[1]=V=>r("appearance"))},"Appearance",2)])]),body:J(()=>[i("behaviour")?(k(),T("div",Ml,[s(Wt,{title:f(F),modelValue:f(p),"onUpdate:modelValue":ve[2]||(ve[2]=V=>ct(p)?p.value=V:null)},null,8,["title","modelValue"]),f(me).enablePausing?(k(),ie(Wt,{key:0,title:f(K),modelValue:B.value,"onUpdate:modelValue":ve[3]||(ve[3]=V=>B.value=V)},null,8,["title","modelValue"])):W("",!0),f(me).offlineLimit>0?(k(),ie(Wt,{key:1,title:f(M),modelValue:f(C),"onUpdate:modelValue":ve[4]||(ve[4]=V=>ct(C)?C.value=V:null)},null,8,["title","modelValue"])):W("",!0),s(Wt,{title:f(I),modelValue:f(b),"onUpdate:modelValue":ve[5]||(ve[5]=V=>ct(b)?b.value=V:null)},null,8,["title","modelValue"]),f(b)?W("",!0):(k(),ie(fa,{key:2,class:"button save-button",onClick:ve[6]||(ve[6]=V=>f(mt)())},{default:J(()=>[h("Manually save")]),_:1}))])):W("",!0),i("appearance")?(k(),T("div",Il,[s(ua,{title:f(oe),options:f(l),modelValue:f(m),"onUpdate:modelValue":ve[7]||(ve[7]=V=>ct(m)?m.value=V:null)},null,8,["title","options","modelValue"]),s(ua,{title:f(we),options:o,modelValue:f(S),"onUpdate:modelValue":ve[8]||(ve[8]=V=>ct(S)?S.value=V:null)},null,8,["title","modelValue"]),(k(),ie(Xe(u.value))),s(Wt,{title:f(rt),modelValue:f(c),"onUpdate:modelValue":ve[9]||(ve[9]=V=>ct(c)?c.value=V:null)},null,8,["title","modelValue"])])):W("",!0)]),_:1},8,["modelValue"]))}});const Fl=["onSubmit"],$l={class:"field"},El={key:0,class:"field-title"},Dl=["placeholder"],Pl=re({__name:"Text",props:{title:{type:[String,Object,Function]},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,a=yn(Tt(n,"title"),"span"),i=Et(null);Yn(()=>{var u;(u=i.value)==null||u.focus()});const r=D({get(){var u;return(u=f(n.modelValue))!=null?u:""},set(u){t("update:modelValue",u)}});function l(){t("submit")}function o(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(u,c)=>(k(),T("form",{onSubmit:gn(l,["prevent"])},[v("div",$l,[f(a)?(k(),T("span",El,[(k(),ie(Xe(f(a))))])):W("",!0),u.textArea?(k(),ie(f(hi),{key:1,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=m=>r.value=m),placeholder:u.placeholder,maxHeight:u.maxHeight,onBlur:o,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):da((k(),T("input",{key:2,type:"text","onUpdate:modelValue":c[1]||(c[1]=m=>r.value=m),placeholder:u.placeholder,class:Ae({fullWidth:!u.title}),onBlur:o,ref_key:"field",ref:i},null,42,Dl)),[[gi,r.value]])])],40,Fl))}});var Xa=Se(Pl,[["__scopeId","data-v-90bd4994"]]);const Al={key:0},Ol=["onClick","disabled"],ql={key:0},Bl=["onClick"],Vl=re({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const a=Ge(e),i=L(!1);Ct(i,o=>{t("confirmingChanged",o)});function r(){if(f(a.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function l(){i.value=!1}return(o,u)=>(k(),T("span",{class:Ae(["container",{confirming:i.value}])},[i.value?(k(),T("span",Al,"Are you sure?")):W("",!0),v("button",{onClick:gn(r,["stop"]),class:"button danger",disabled:o.disabled},[i.value?(k(),T("span",ql,"Yes")):Bt(o.$slots,"default",{key:1},void 0,!0)],8,Ol),i.value?(k(),T("button",{key:1,class:"button",onClick:gn(l,["stop"])},"No",8,Bl)):W("",!0)],2))}});var Ll=Se(Vl,[["__scopeId","data-v-2f8ef34c"]]);const de=Symbol("BoardID"),$=Symbol("BoardConnections");function Ze(e,t){e.effects.decay&&(t*=2),e.effects.blazing&&(t*=4),e.health-=t}function Wn(e,t="points",n=0,a=void 0){const i=ct(e)?e:ye(e);if(i.displayName=t,i.precision=n,i.small=a,!ct(e)){const r=i[$t];r.displayName=t,r.precision=n,r.small=a}return i}function sa(e){const t=ye(e.value);return Ct(e,n=>{pa.value||d.gt(n,t.value)&&(t.value=n)}),t}function Ja(e){const t=ye(e.value);return Ct(e,(n,a)=>{pa.value||d.gt(n,a)&&(t.value=d.add(t.value,d.sub(n,a)))}),t}new d("10^^8");new d("1e100");function Da(e,t){const n=t!=null?t:e.value;return d.eq(e.precision,0)?pe(e.small?n:d.floor(n)):We(n,e.precision,e.small)}const Rl=["x1","y1","x2","y2"],jl=re({__name:"BoardLink",props:{link:{},dragging:{},dragged:{}},setup(e){const n=Ge(e),a=D(()=>{var l,o,u,c,m,p,w;const r={...n.link.value.startNode.position};return n.link.value.offsetStart&&(r.x+=f(n.link.value.offsetStart).x,r.y+=f(n.link.value.offsetStart).y),((l=n.dragging)==null?void 0:l.value)===n.link.value.startNode&&(r.x+=(c=(u=(o=n.dragged)==null?void 0:o.value)==null?void 0:u.x)!=null?c:0,r.y+=(w=(p=(m=n.dragged)==null?void 0:m.value)==null?void 0:p.y)!=null?w:0),r}),i=D(()=>{var l,o,u,c,m,p,w;const r={...n.link.value.endNode.position};return n.link.value.offsetEnd&&(r.x+=f(n.link.value.offsetEnd).x,r.y+=f(n.link.value.offsetEnd).y),((l=n.dragging)==null?void 0:l.value)===n.link.value.endNode&&(r.x+=(c=(u=(o=n.dragged)==null?void 0:o.value)==null?void 0:u.x)!=null?c:0,r.y+=(w=(p=(m=n.dragged)==null?void 0:m.value)==null?void 0:p.y)!=null?w:0),r});return(r,l)=>(k(),T("line",Vt({class:"link"},{...r.link,"stroke-width":r.link.strokeWidth},{class:{pulsing:r.link.pulsing},x1:a.value.x,y1:a.value.y,x2:i.value.x,y2:i.value.y}),null,16,Rl))}});var zl=Se(jl,[["__scopeId","data-v-28281ab6"]]);const Ul={key:0},Gl=["transform","onMousedown","onTouchstart","onMouseup","onTouchend"],Hl=["fill","stroke-width","stroke"],Wl=["fill"],Zl=re({__name:"BoardNodeAction",props:{node:{},nodeType:{},actions:{},isSelected:{type:Boolean},selectedAction:{}},emits:["clickAction"],setup(e,{emit:t}){const a=Ge(e),i=D(()=>Ne(a.nodeType.value.size,f(a.node))),r=D(()=>{var m;return(m=Ne(a.nodeType.value.outlineColor,f(a.node)))!=null?m:It[_e.theme].variables["--outline"]}),l=D(()=>{var m;return(m=Ne(a.nodeType.value.titleColor,f(a.node)))!=null?m:It[_e.theme].variables["--foreground"]}),o=D(()=>Ne(a.nodeType.value.actionDistance,f(a.node)));function u(m,p){t("clickAction",p.id),m.preventDefault(),m.stopPropagation()}function c(m,p){var w;((w=f(a.selectedAction))==null?void 0:w.id)===p.id&&(m.preventDefault(),m.stopPropagation())}return(m,p)=>(k(),ie(xn,{name:"actions",appear:""},{default:J(()=>[m.isSelected&&m.actions?(k(),T("g",Ul,[(k(!0),T(G,null,Ft(m.actions,(w,S)=>{var b,C;return k(),T("g",{key:w.id,class:Ae(["action",{selected:((b=m.selectedAction)==null?void 0:b.id)===w.id}]),transform:`translate(
                        ${(-i.value-30)*Math.sin(((m.actions.length-1)/2-S)*o.value)},
                        ${(i.value+30)*Math.cos(((m.actions.length-1)/2-S)*o.value)}
                    )`,onMousedown:B=>u(B,w),onTouchstart:B=>u(B,w),onMouseup:B=>c(B,w),onTouchend:gn(B=>c(B,w),["stop"])},[v("circle",{fill:f(Ne)(w.fillColor,m.node),r:"20","stroke-width":((C=m.selectedAction)==null?void 0:C.id)===w.id?4:0,stroke:r.value},null,8,Hl),v("text",{fill:l.value,class:"material-icons"},se(f(Ne)(w.icon,m.node)),9,Wl)],42,Gl)}),128))])):W("",!0)]),_:1}))}});var Yl=Se(Zl,[["__scopeId","data-v-9efb2a56"]]);const Xl=["transform"],Jl=["d","fill","stroke"],Kl=["d","fill","stroke"],Ql=["d","fill"],eu=["d","stroke-dashoffset","stroke"],tu=["fill"],nu={key:0},au=["fill","y"],iu=["fill","y"],ru=re({__name:"BoardNode",props:{node:{},nodeType:{},dragging:{},dragged:{},hasDragged:{type:Boolean},receivingNode:{type:Boolean},isSelected:{type:Boolean},selectedAction:{}},emits:["mouseDown","endDragging","clickAction"],setup(e,{emit:t}){const a=Ge(e),i=D(()=>Ne(a.nodeType.value.draggable,f(a.node)));Ct(i,V=>{const ke=f(a.node);f(a.dragging)===ke&&!V&&t("endDragging",ke)});const r=D(()=>{var ke;const V=f(a.node);return(ke=Ne(a.nodeType.value.actions,V))==null?void 0:ke.filter(Ke=>Qt(Ne(Ke.visibility,V)))}),l=D(()=>{var ke;const V=f(a.node);if(Ne(a.nodeType.value.draggable,V)&&((ke=f(a.dragging))==null?void 0:ke.id)===V.id&&f(a.dragged)!=null){const{x:Ke,y:ge}=f(a.dragged);return{x:V.position.x+Math.round(Ke/25)*25,y:V.position.y+Math.round(ge/25)*25}}return V.position});let o={Circle:["M",0,-1,"A",1,1,"0","0","1",0,1,"A",1,1,"0","0","1",0,-1],Diamond:["M",0,-1,"L",1,0,"L",0,1,"L",-1,0,"Z"],Square:["M",0,-.9,"L",.9,-.9,"L",.9,.9,"L",-.9,.9,"L",-.9,-.9,"Z"],Squircle:["M",0,-.95,"C",.95,-.95,.95,-.95,.95,0,"S",.95,.95,0,.95,"S",-.95,.95,-.95,0,"S",-.95,-.95,0,-.95]};function u(V){return o[c.value].map(ke=>typeof ke=="number"?ke*V:ke).join(" ")}const c=D(()=>Ne(a.nodeType.value.shape,f(a.node))),m=D(()=>Ne(a.nodeType.value.title,f(a.node))),p=D(()=>{var V;return(V=a.isSelected.value?f(a.selectedAction)&&Ne(f(a.selectedAction).tooltip,f(a.node)):null)!=null?V:Ne(a.nodeType.value.label,f(a.node))}),w=D(()=>{var V,ke;return Ne((ke=(V=f(a.selectedAction))==null?void 0:V.confirmationLabel)!=null?ke:{text:"Tap again to confirm"},f(a.node))}),S=D(()=>Ne(a.nodeType.value.size,f(a.node))),b=D(()=>{var V;return(V=Ne(a.nodeType.value.progress,f(a.node)))!=null?V:0}),C=D(()=>It[_e.theme].variables["--background"]),B=D(()=>{var V;return(V=Ne(a.nodeType.value.outlineColor,f(a.node)))!=null?V:It[_e.theme].variables["--outline"]}),F=D(()=>{var V;return(V=Ne(a.nodeType.value.fillColor,f(a.node)))!=null?V:It[_e.theme].variables["--raised-background"]}),M=D(()=>Ne(a.nodeType.value.progressColor,f(a.node))),I=D(()=>{var V;return(V=Ne(a.nodeType.value.titleColor,f(a.node)))!=null?V:It[_e.theme].variables["--foreground"]}),K=D(()=>Ne(a.nodeType.value.progressDisplay,f(a.node))),oe=D(()=>a.dragging.value!=null&&f(a.hasDragged)&&Ne(a.nodeType.value.canAccept,f(a.node),a.dragging.value)),we=D(()=>Ne(a.nodeType.value.style,f(a.node))),rt=D(()=>Ne(a.nodeType.value.classes,f(a.node)));function Ce(V){t("mouseDown",V,a.node.value,i.value)}function ve(V){var ke,Ke,ge;(ke=a.hasDragged)!=null&&ke.value||(t("endDragging",a.node.value),(ge=(Ke=a.nodeType.value).onClick)==null||ge.call(Ke,a.node.value),V.stopPropagation())}return(V,ke)=>{var Ke,ge,tn;return k(),T("g",{class:Ae(["boardnode",{[V.node.type]:!0,isSelected:V.isSelected,isDraggable:i.value,...rt.value}]),style:at([{opacity:((Ke=V.dragging)==null?void 0:Ke.id)===V.node.id&&V.hasDragged?.5:1},(ge=we.value)!=null?ge:[]]),transform:`translate(${l.value.x},${l.value.y})`},[s(Yl,{actions:(tn=r.value)!=null?tn:[],"is-selected":V.isSelected,node:V.node,"node-type":V.nodeType,"selected-action":V.selectedAction,onClickAction:ke[0]||(ke[0]=Nt=>t("clickAction",Nt))},null,8,["actions","is-selected","node","node-type","selected-action"]),v("g",{class:"node-container",onMousedown:Ce,onTouchstartPassive:Ce,onMouseup:ve,onTouchendPassive:ve},[v("g",null,[oe.value?(k(),T("path",{key:0,class:"receiver",d:u(S.value+8),fill:C.value,stroke:V.receivingNode?"#0F0":"#0F03","stroke-width":2},null,8,Jl)):W("",!0),v("path",{class:"body",d:u(S.value),fill:F.value,stroke:B.value,"stroke-width":4},null,8,Kl),K.value===f(wa).Fill?(k(),T("path",{key:1,class:"progress progressFill",d:u(Math.max(S.value*b.value-2,0)),fill:M.value},null,8,Ql)):(k(),T("path",{key:2,d:u(S.value+3.5),class:"progress progressRing",fill:"transparent",pathLength:"1","stroke-dasharray":"0 1 0","stroke-width":3,"stroke-dashoffset":-b.value,stroke:M.value},null,8,eu))]),v("text",{fill:I.value,class:"node-title"},se(m.value),9,tu)],32),s(xn,{name:"fade",appear:""},{default:J(()=>{var Nt;return[p.value?(k(),T("g",nu,[v("text",{fill:(Nt=p.value.color)!=null?Nt:I.value,class:Ae(["node-title",{pulsing:p.value.pulsing}]),y:-S.value-20},se(p.value.text),11,au)])):W("",!0)]}),_:1}),s(xn,{name:"fade",appear:""},{default:J(()=>{var Nt;return[V.isSelected&&V.selectedAction?(k(),T("text",{key:0,fill:(Nt=w.value.color)!=null?Nt:I.value,class:Ae(["node-title",{pulsing:w.value.pulsing}]),y:S.value+75},se(w.value.text),11,iu)):W("",!0)]}),_:1})],14,Xl)}}});var su=Se(ru,[["__scopeId","data-v-24b711f5"]]);const ou={class:"stage",width:"100%",height:"100%"},lu={class:"g1"},uu=re({__name:"Board",props:{nodes:{},types:{},stage:{},state:{},visibility:{},width:{},height:{},style:{},classes:{},links:{},selectedAction:{},selectedNode:{},draggingNode:{},receivingNode:{},mousePosition:{},setReceivingNode:{type:Function},setDraggingNode:{type:Function}},setup(e){const n=Ge(e),a=L({x:0,y:0}),i=L({x:0,y:0}),r=L(!1),l=L(!1),o=L(null),u=D(()=>{const b=n.nodes.value.slice();if(n.draggingNode.value){const C=b.splice(b.indexOf(n.draggingNode.value),1)[0];b.push(C)}return b});Zt(()=>{const b=n.draggingNode.value;if(b==null)return null;const C={x:b.position.x+i.value.x,y:b.position.y+i.value.y};let B=Number.MAX_VALUE;n.setReceivingNode.value(n.nodes.value.reduce((F,M)=>{if(M.id===b.id)return F;const I=n.types.value[M.type];if(!Ne(I.canAccept,M,b))return F;const oe=Math.pow(C.x-M.position.x,2)+Math.pow(C.y-M.position.y,2);let we=Ne(I.size,M);return oe>B||oe>we*we?F:(B=oe,M)},null))});function c(b){b.setTransformOrigin(null),b.moveTo(o.value.$el.clientWidth/2,o.value.$el.clientHeight/2),n.stage.value=b}function m(b,C=null,B=!1){if(n.draggingNode.value==null){b.preventDefault(),b.stopPropagation();let F,M;if("touches"in b)if(b.touches.length===1)F=b.touches[0].clientX,M=b.touches[0].clientY;else return;else F=b.clientX,M=b.clientY;a.value={x:F,y:M},i.value={x:0,y:0},l.value=!1,r.value=!0,B&&n.setDraggingNode.value(C)}}function p(b){const{x:C,y:B,scale:F}=o.value.panZoomInstance.getTransform();let M,I;if("touches"in b)if(b.touches.length===1)M=b.touches[0].clientX,I=b.touches[0].clientY;else{w(n.draggingNode.value),n.mousePosition.value=null;return}else M=b.clientX,I=b.clientY;n.mousePosition.value={x:(M-C)/F,y:(I-B)/F},i.value={x:i.value.x+(M-a.value.x)/F,y:i.value.y+(I-a.value.y)/F},a.value={x:M,y:I},(Math.abs(i.value.x)>10||Math.abs(i.value.y)>10)&&(l.value=!0),n.draggingNode.value!=null||r.value&&l.value&&(n.state.value.selectedNode=null,n.state.value.selectedAction=null)}function w(b,C=!1){var B,F;if(n.draggingNode.value!=null&&n.draggingNode.value===b){n.receivingNode.value==null&&(n.draggingNode.value.position.x+=Math.round(i.value.x/25)*25,n.draggingNode.value.position.y+=Math.round(i.value.y/25)*25);const M=n.nodes.value;M.push(M.splice(M.indexOf(n.draggingNode.value),1)[0]),n.receivingNode.value&&((F=(B=n.types.value[n.receivingNode.value.type]).onDrop)==null||F.call(B,n.receivingNode.value,n.draggingNode.value)),n.setDraggingNode.value(null)}else!l.value&&!C&&(n.state.value.selectedNode=null,n.state.value.selectedAction=null);r.value=!1}function S(b,C){n.state.value.selectedAction===C?f(n.selectedAction).onClick(f(n.selectedNode)):n.state.value={...n.state.value,selectedAction:C}}return(b,C)=>{const B=Rt("panZoom");return f(Qt)(b.visibility)?(k(),ie(B,{key:0,style:at([{width:b.width,height:b.height},b.style]),class:Ae(b.classes),selector:".g1",options:{initialZoom:1,minZoom:.1,maxZoom:10,zoomDoubleClickSpeed:1},ref_key:"stage",ref:o,onInit:c,onMousemove:p,onTouchmove:p,onMousedown:C[0]||(C[0]=F=>m(F)),onTouchstart:C[1]||(C[1]=F=>m(F)),onMouseup:C[2]||(C[2]=()=>w(f(b.draggingNode))),onTouchendPassive:C[3]||(C[3]=()=>w(f(b.draggingNode))),onMouseleave:C[4]||(C[4]=()=>w(f(b.draggingNode),!0))},{default:J(()=>[(k(),T("svg",ou,[v("g",lu,[s(Sa,{name:"link",appear:""},{default:J(()=>[(k(!0),T(G,null,Ft(f(b.links)||[],F=>(k(),T("g",{key:`${F.startNode.id}-${F.endNode.id}`},[s(zl,{link:F,dragging:f(b.draggingNode),dragged:F.startNode===f(b.draggingNode)||F.endNode===f(b.draggingNode)?i.value:void 0},null,8,["link","dragging","dragged"])]))),128))]),_:1}),s(Sa,{name:"grow",duration:500,appear:""},{default:J(()=>[(k(!0),T(G,null,Ft(u.value,F=>(k(),T("g",{key:F.id,style:{"transition-duration":"0s"}},[s(su,{node:F,nodeType:b.types[F.type],dragging:f(b.draggingNode),dragged:f(b.draggingNode)===F?i.value:void 0,hasDragged:f(b.draggingNode)==null?!1:l.value,receivingNode:f(b.receivingNode)===F,isSelected:f(b.selectedNode)===F,selectedAction:f(b.selectedNode)===F?f(b.selectedAction):null,onMouseDown:m,onEndDragging:w,onClickAction:M=>S(F,M)},null,8,["node","nodeType","dragging","dragged","hasDragged","receivingNode","isSelected","selectedAction","onClickAction"])]))),128))]),_:1})])]))]),_:1},8,["style","class"])):W("",!0)}}});Je.on("setupVue",e=>bi.install(e));const Ka=Symbol("Board");var wa=(e=>(e.Outline="Outline",e.Fill="Fill",e))(wa||{}),nt=(e=>(e.Circle="Circle",e.Diamond="Diamond",e.Square="Square",e.Squircle="Squircle",e))(nt||{});function Qa(e){const t=ye({nodes:[],selectedNode:null,selectedAction:null},!1);return cn(n=>{const a=e.call(n,n);a.id=Kn("board-"),a.type=Ka,a[vn]=uu,a.state?(Ao(t),R(a,"state")):(t[mn]={nodes:a.startNodes().map((o,u)=>(o.id=u,o)),selectedNode:null,selectedAction:null},a.state=t),a.nodes=D(()=>f(l.state).nodes),a.selectedNode=D({get(){return l.nodes.value.find(o=>o.id===f(l.state).selectedNode)||null},set(o){var u,c;ct(l.state)?l.state.value={...l.state.value,selectedNode:(u=o==null?void 0:o.id)!=null?u:null}:l.state.selectedNode=(c=o==null?void 0:o.id)!=null?c:null}}),a.selectedAction=D({get(){const o=l.selectedNode.value;if(o==null)return null;const u=l.types[o.type];return u.actions==null?null:u.actions.find(c=>c.id===f(l.state).selectedAction)||null},set(o){var u,c;ct(l.state)?l.state.value={...l.state.value,selectedAction:(u=o==null?void 0:o.id)!=null?u:null}:l.state.selectedAction=(c=o==null?void 0:o.id)!=null?c:null}}),a.mousePosition=L(null),a.links?R(a,"links"):a.links=D(()=>l.selectedAction.value==null?null:l.selectedAction.value.links&&l.selectedNode.value?Ne(l.selectedAction.value.links,l.selectedNode.value):null),a.draggingNode=L(null),a.receivingNode=L(null),a.stage=L(null),R(a,"visibility"),xe(a,"visibility",vt.Visible),R(a,"width"),xe(a,"width","100%"),R(a,"height"),xe(a,"height","100%"),R(a,"classes"),R(a,"style");for(const o in a.types){const u=a.types[o];if(R(u,"title"),R(u,"label"),R(u,"size"),xe(u,"size",50),R(u,"style"),R(u,"classes"),R(u,"draggable"),xe(u,"draggable",!1),R(u,"shape"),xe(u,"shape","Circle"),R(u,"canAccept"),xe(u,"canAccept",!1),R(u,"progress"),R(u,"progressDisplay"),xe(u,"progressDisplay","Fill"),R(u,"progressColor"),xe(u,"progressColor","none"),R(u,"fillColor"),R(u,"outlineColor"),R(u,"titleColor"),R(u,"actionDistance"),xe(u,"actionDistance",Math.PI/6),u.nodes=D(()=>f(l.state).nodes.filter(c=>c.type===o)),xe(u,"onClick",function(c){f(l.state).selectedNode=c.id}),u.actions)for(const c of u.actions)R(c,"visibility"),xe(c,"visibility",vt.Visible),R(c,"icon"),R(c,"fillColor"),R(c,"tooltip"),R(c,"confirmationLabel"),xe(c,"confirmationLabel",{text:"Tap again to confirm"}),R(c,"links")}function i(o){a.draggingNode.value=o}function r(o){a.receivingNode.value=o}a.placeInAvailableSpace=function(o,u=100,c=H.Right){const m=l.nodes.value.slice().filter(p=>p===o||(c===H.Down||c===H.Up)&&Math.abs(p.position.x-o.position.x)>u||(c===H.Left||c===H.Right)&&Math.abs(p.position.y-o.position.y)>u?!1:!(c===H.Right&&p.position.x<o.position.x-u||c===H.Left&&p.position.x>o.position.x+u||c===H.Up&&p.position.y>o.position.y+u||c===H.Down&&p.position.y<o.position.y-u)).sort(c===H.Right?(p,w)=>p.position.x-w.position.x:c===H.Left?(p,w)=>w.position.x-p.position.x:c===H.Up?(p,w)=>w.position.y-p.position.y:(p,w)=>p.position.y-w.position.y);for(let p=0;p<m.length;p++){const w=m[p],S=c===H.Right||c===H.Left?Math.abs(o.position.x-w.position.x):Math.abs(o.position.y-w.position.y);if(S<u)c===H.Right?o.position.x=w.position.x+u:c===H.Left?o.position.x=w.position.x-u:c===H.Up?o.position.y=w.position.y-u:c===H.Down&&(o.position.y=w.position.y+u);else if(p>0&&S>u)break}},a[hn]=function(){const{nodes:o,types:u,stage:c,state:m,visibility:p,width:w,height:S,style:b,classes:C,links:B,selectedAction:F,selectedNode:M,mousePosition:I,draggingNode:K,receivingNode:oe}=this;return{nodes:o,types:u,stage:c,state:m,visibility:p,width:w,height:S,style:f(b),classes:C,links:B,selectedAction:F,selectedNode:M,mousePosition:I,draggingNode:K,receivingNode:oe,setDraggingNode:i,setReceivingNode:r}};const l=a;return l})}function Ne(e,t,...n){return zn(e)?e(t,...n):f(e)}const kn={};Je.on("addLayer",e=>{const t=Vr(e,Ka);kn[e.id]=e.on("postUpdate",n=>{t.forEach(a=>{Object.values(a.types).forEach(i=>i.nodes.value.forEach(r=>{var l;return(l=i.update)==null?void 0:l.call(i,r,n)}))})})});Je.on("removeLayer",e=>{var t;(t=kn[e.id])==null||t.call(kn),kn[e.id]=void 0});const cu={key:0},du={key:0,class:"mark star"},gu=["src"],fu=re({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>t.mark?(k(),T("div",cu,[t.mark===!0?(k(),T("div",du)):(k(),T("img",{key:1,class:"mark",src:t.mark},null,8,gu))])):W("",!0)}});var ea=Se(fu,[["__scopeId","data-v-2207999f"]]);const mu=re({__name:"Node",props:{id:{}},setup(e){const n=Ge(e),a=Rn(va,()=>{}),i=Rn(ha,()=>{}),r=Et(null),l=D(()=>r.value&&r.value.parentElement);return Ct([l,n.id],([o,u],[c,m])=>{c&&i(f(m)),o&&a(u,o)}),Aa(()=>i(f(n.id))),(o,u)=>(k(),T("div",{class:"node",ref_key:"node",ref:r},null,512))}});var ta=Se(mu,[["__scopeId","data-v-a48cb382"]]);function ft(e){return cn(t=>{var a;const n=e.call(t,t);return n.partialDisplay=i=>s("span",{style:f(n.requirementMet)?"":"color: var(--danger)"},[Da(n.resource,n.cost instanceof g?Vn(n.cost,i!=null?i:1,f(n.cumulativeCost),f(n.directSum)):f(n.cost))," ",n.resource.displayName]),n.display=i=>s("div",null,[f(n.requiresPay)?"Costs: ":"Requires: ",Da(n.resource,n.cost instanceof g?Vn(n.cost,i!=null?i:1,f(n.cumulativeCost),f(n.directSum)):f(n.cost))," ",n.resource.displayName]),R(n,"visibility"),xe(n,"visibility",vt.Visible),R(n,"cost"),R(n,"requiresPay"),xe(n,"requiresPay",!0),R(n,"cumulativeCost"),xe(n,"cumulativeCost",!0),R(n,"maxBulkAmount"),xe(n,"maxBulkAmount",1),R(n,"directSum"),xe(n,"pay",function(i){const r=n.cost instanceof g?Vn(n.cost,i!=null?i:1,f(n.cumulativeCost),f(n.directSum)):f(n.cost);n.resource.value=d.sub(n.resource.value,r).max(0)}),n.canMaximize=D(()=>{var o;if(!(n.cost instanceof g))return!1;const i=f(n.maxBulkAmount);if(d.lte(i,1))return!1;const r=f(n.cumulativeCost),l=(o=f(n.directSum))!=null?o:r?10:0;return d.lte(i,l)?!0:!(!n.cost.isInvertible()||r===!0&&!n.cost.isIntegrable())}),n.cost instanceof g?n.requirementMet=Eo(n.cost,n.resource,(a=n.cumulativeCost)!=null?a:!0,n.directSum,n.maxBulkAmount):n.requirementMet=D(()=>d.gte(n.resource.value,f(n.cost))?1:0),n})}function ei(e){return cn(()=>({requirementMet:D(()=>Qt(e.visibility)),visibility:vt.None,requiresPay:!1}))}function Ca(e){if(Lt(e))return e.every(Ca);const t=f(e.requirementMet);return typeof t=="boolean"?t:d.gt(t,0)}function ti(e){if(Lt(e))return e.map(ti).reduce(d.min);const t=f(e.requirementMet);return typeof t=="boolean"?t?d.dInf:0:d.gt(t,1)&&f(e.canMaximize)!==!0?1:t}function Zn(e,t=1){var n,a;if(Lt(e)&&(e=e.filter(i=>Qt(i.visibility)),e.length===1&&(e=e[0])),Lt(e)){e=e.filter(l=>"partialDisplay"in l);const i=e.filter(l=>f(l.requiresPay)),r=e.filter(l=>!f(l.requiresPay));return s(G,null,[i.length>0?s("div",null,[h("Costs:")," ",$a(i.map(l=>l.partialDisplay(t)),s(G,null,[h(", ")]))]):null,r.length>0?s("div",null,[h("Requires:")," ",$a(r.map(l=>l.partialDisplay(t)),s(G,null,[h(", ")]))]):null])}return(a=(n=e.display)==null?void 0:n.call(e))!=null?a:s(G,null,null)}function ni(e,t=1){var n;Lt(e)?e.filter(a=>f(a.requiresPay)).forEach(a=>{var i;return(i=a.pay)==null?void 0:i.call(a,t)}):f(e.requiresPay)&&((n=e.pay)==null||n.call(e,t))}var pu=re({props:{display:{type:Y(String,Object,Function),required:!0},visibility:{type:Y(Number,Boolean),required:!0},style:Y(String,Object,Array),classes:Y(Object),requirements:{type:Object,required:!0},canPurchase:{type:Y(Boolean),required:!0},bought:{type:Y(Boolean),required:!0},mark:Y(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:ta,MarkNode:ea},setup(e){const{display:t,requirements:n,bought:a}=Ge(e),i=Et("");return Zt(()=>{const r=Qe(t);if(r==null){i.value="";return}if(bn(r)){i.value=De(r);return}const l=De(r.title||"","h3"),o=De(r.description,"div"),u=De(r.effectDisplay||"");i.value=De(fe(()=>s("span",null,[r.title!=null?s("div",null,[s(l,null,null)]):null,s(o,null,null),r.effectDisplay!=null?s("div",null,[h("Currently: "),s(u,null,null)]):null,a.value?null:s(G,null,[s("br",null,null),Zn(n.value)])])))}),{component:i,unref:f,Visibility:vt,isVisible:Qt,isHidden:Qn}}});const vu=["disabled"];function hu(e,t,n,a,i,r){var u;const l=Rt("MarkNode"),o=Rt("Node");return e.isVisible(e.visibility)?(k(),T("button",{key:0,style:at([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),onClick:t[0]||(t[0]=(...c)=>e.purchase&&e.purchase(...c)),class:Ae({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(k(),ie(Xe(e.unref(e.component)),{key:0})):W("",!0),s(l,{mark:e.unref(e.mark)},null,8,["mark"]),s(o,{id:e.id},null,8,["id"])],14,vu)):W("",!0)}var bu=Se(pu,[["render",hu],["__scopeId","data-v-9be6bac0"]]);const yu=Symbol("Upgrade");function Pa(e,...t){const n=ye(!1,!1),a=t.reduce((i,r)=>{var l;return Object.assign(i,(l=r.getPersistentData)==null?void 0:l.call(r))},{});return cn(i=>{var u,c;const r=e.call(i,i);r.id=Kn("upgrade-"),r.type=yu,r[vn]=bu;for(const m of t)(u=m.preConstruct)==null||u.call(m,r);r.bought=n,Object.assign(r,a),r.canPurchase=D(()=>!n.value&&Ca(r.requirements)),r.purchase=function(){var p;const m=r;!f(m.canPurchase)||(ni(r.requirements),n.value=!0,(p=m.onPurchase)==null||p.call(m))};const l=ei(r);Lt(r.requirements)?r.requirements.unshift(l):r.requirements=[l,r.requirements],R(r,"visibility"),xe(r,"visibility",vt.Visible),R(r,"classes"),R(r,"style"),R(r,"display"),R(r,"mark");for(const m of t)(c=m.postConstruct)==null||c.call(m,r);const o=t.reduce((m,p)=>{var w;return Object.assign(m,(w=p.getGatheredProps)==null?void 0:w.call(p,r))},{});return r[hn]=function(){const{display:m,visibility:p,style:w,classes:S,requirements:b,canPurchase:C,bought:B,mark:F,id:M,purchase:I}=this;return{display:m,visibility:p,style:f(w),classes:S,requirements:b,canPurchase:C,bought:B,mark:F,id:M,purchase:I,...o}},r})}var _u=re({props:{display:{type:Y(Object,String,Function),required:!0},visibility:{type:Y(Number,Boolean),required:!0},style:Y(Object,String,Array),classes:Y(Object),onClick:Function,onHold:Function,canClick:{type:Y(Boolean),required:!0},small:Boolean,mark:Y(Boolean,String),id:{type:String,required:!0}},components:{Node:ta,MarkNode:ea},setup(e){const{display:t,onClick:n,onHold:a}=Ge(e),i=Et("");Zt(()=>{var m;const o=Qe(t);if(o==null){i.value="";return}if(bn(o)){i.value=De(o);return}const u=De((m=o.title)!=null?m:"","h3"),c=De(o.description,"div");i.value=De(fe(()=>s("span",null,[o.title!=null?s("div",null,[s(u,null,null)]):null,s(c,null,null)])))});const{start:r,stop:l}=Ga(n,a);return{start:r,stop:l,comp:i,Visibility:vt,isVisible:Qt,isHidden:Qn,unref:f}}});function wu(e,t,n,a,i,r){var u;const l=Rt("MarkNode"),o=Rt("Node");return e.isVisible(e.visibility)?(k(),T("button",{key:0,style:at([{visibility:e.isHidden(e.visibility)?"hidden":void 0},(u=e.unref(e.style))!=null?u:[]]),onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMousedown:t[1]||(t[1]=(...c)=>e.start&&e.start(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.stop&&e.stop(...c)),onMouseup:t[3]||(t[3]=(...c)=>e.stop&&e.stop(...c)),onTouchstartPassive:t[4]||(t[4]=(...c)=>e.start&&e.start(...c)),onTouchendPassive:t[5]||(t[5]=(...c)=>e.stop&&e.stop(...c)),onTouchcancelPassive:t[6]||(t[6]=(...c)=>e.stop&&e.stop(...c)),class:Ae({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(k(),ie(Xe(e.unref(e.comp)),{key:0})):W("",!0),s(l,{mark:e.unref(e.mark)},null,8,["mark"]),s(o,{id:e.id},null,8,["id"])],38)):W("",!0)}var Cu=Se(_u,[["render",wu],["__scopeId","data-v-433a7f81"]]);const Nu=Symbol("Repeatable");function St(e,...t){const n=ye(0),a=t.reduce((i,r)=>{var l;return Object.assign(i,(l=r.getPersistentData)==null?void 0:l.call(r))},{});return cn(i=>{var w,S,b;const r=e.call(i,i);r.id=Kn("repeatable-"),r.type=Nu,r[vn]=Cu;for(const C of t)(w=C.preConstruct)==null||w.call(C,r);r.amount=n,r.amount[mn]=(S=r.initialAmount)!=null?S:0,Object.assign(r,a);const l={requirementMet:D(()=>d.sub(f(r.limit),r.amount.value)),requiresPay:!1,visibility:vt.None,canMaximize:!0},o=ei(r);Lt(r.requirements)?(r.requirements.unshift(o),r.requirements.push(l)):r.requirements=[o,r.requirements,l],r.maxed=D(()=>d.gte(r.amount.value,f(r.limit))),R(r,"classes");const u=r.classes;r.classes=D(()=>{const C=f(u)||{};return r.maxed.value&&(C.bought=!0),C}),r.amountToIncrease=D(()=>d.clampMin(ti(r.requirements),1)),r.canClick=D(()=>Ca(r.requirements));const c=r.onClick;r.onClick=function(C){var M;const B=r;if(!f(B.canClick))return;const F=(M=f(r.amountToIncrease))!=null?M:1;ni(r.requirements,F),B.amount.value=d.add(B.amount.value,F),c==null||c(C)},R(r,"display");const m=r.display;r.display=fe(()=>{var B,F,M;const C=f(m);if(bn(C)){const I=De(C);return s(I,null,null)}if(C!=null){const I=r,K=De((B=C.title)!=null?B:"","h3"),oe=De((F=C.description)!=null?F:""),we=De((M=C.effectDisplay)!=null?M:"");return s("span",null,[C.title==null?null:s("div",null,[s(K,null,null)]),C.description==null?null:s(oe,null,null),C.showAmount===!1?null:s("div",null,[s("hr",null,null),s(G,null,[h("Amount: "),pe(I.amount.value)]),d.isFinite(f(I.limit))?s(G,null,[h(" / "),pe(f(I.limit))]):void 0]),C.effectDisplay==null?null:s("div",null,[s("hr",null,null),h("Currently: "),s(we,null,null)]),I.maxed.value?null:s("div",null,[s("hr",null,null),Zn(I.requirements,f(r.amountToIncrease))])])}return""}),R(r,"visibility"),xe(r,"visibility",vt.Visible),R(r,"limit"),xe(r,"limit",d.dInf),R(r,"style"),R(r,"mark"),R(r,"small");for(const C of t)(b=C.postConstruct)==null||b.call(C,r);const p=t.reduce((C,B)=>{var F;return Object.assign(C,(F=B.getGatheredProps)==null?void 0:F.call(B,r))},{});return r[hn]=function(){const{display:C,visibility:B,style:F,classes:M,onClick:I,canClick:K,small:oe,mark:we,id:rt}=this;return{display:C,visibility:B,style:f(F),classes:M,onClick:I,canClick:K,small:oe,mark:we,id:rt,...p}},r})}const Ie=Xn;var Ln=function(e){return e.Idle="idle",e.Transitioning="trans",e}(Ln||{});let xt={standard:{name:"Standard",description:`The default game mode.
Standard rules apply.`,multiplier:1},boosted:{name:"Boosted",description:`Harder enemies.
Faster health drain.`,multiplier:1.5},hardcore:{name:"Hardcore",description:`Hardest enemies.
No speed changes.
Stress = Lethal.`,multiplier:2}},sn=["standard","boosted","hardcore"];const ae=_a("main",function(){const e=Wn(0,"xp"),t=Ja(e),n=Wn(0,"\u{1F48A}"),a=ye(0),i=L("idle");let r={standard:ye(0),boosted:ye(0),hardcore:ye(0)},l=ye("standard",!1),o=ye({beamer:!0,plasma:!0,freezer:!0,energizer:!0}),u=ye(["beamer","plasma","freezer","energizer"]),c=L(""),m={collection:ye(!1),research:ye(!1),objectives:ye(!1),capsules:ye(!1)};const p=L(!1);function w(y=1e3){var U;p.value=!0;let j=null;(U=Ce.stage.value)==null||U.setMinZoom(.1);function P(Q){var Ye;j===null&&(j=Q),Q=(Q-j)/y;let be=1-(1e3**(1-Q)-1)/999;(Ye=Ce.stage.value)==null||Ye.zoomAbs(window.innerWidth/2,window.innerHeight/2,Math.max(be,1e-6)),Q<1?requestAnimationFrame(P):p.value=!1}requestAnimationFrame(P)}function S(y=1e3){p.value=!0;let j=Ce.stage.value.getTransform().scale,P=null;Ce.stage.value.smoothMoveTo(window.innerWidth/2,window.innerHeight/2),Ce.stage.value.setMinZoom(0);function U(Q){P===null&&(P=Q),Q=(Q-P)/y;let be=(1e3**Q-1)/999;Ce.stage.value.zoomAbs(window.innerWidth/2,window.innerHeight/2,Math.max(j*(1-be),1e-6)),Q<1?requestAnimationFrame(U):p.value=!1}requestAnimationFrame(U)}let b={startEnergy:St(y=>({display:{title:"Better Funding",description:"Increase the starting Energy budget by 25.",effectDisplay:fe(()=>s(G,null,[pe(d.mul(y.amount.value,25).add(100))])),showAmount:!1},limit:9,requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(1.3).mul(200).sub(200)})),style:{width:"180px",padding:"0 10px"}})),maxBuildings:St(y=>({display:{title:"Bigger Inventory",description:"Increase the maximum amount of buildings you can equip by 1.",effectDisplay:fe(()=>s(G,null,[pe(d.add(y.amount.value,6)),h(" / 14")])),showAmount:!1},limit:8,requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(1.6).mul(300)})),style:{width:"180px",padding:"0 10px"}})),speedManip:St(y=>({display:{title:"Speed Manipulation",description:fe(()=>s(G,null,[h("Unlock "),d.gte(y.amount.value,1)?pe(d.add(y.amount.value,1).min(4))+"x / 4x speed change":"pausing",h("."),s("br",null,null),h("Is disabled on certain game modes.")])),showAmount:!1},limit:4,requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(3).mul(200)})),style:{width:"180px",padding:"0 10px"}})),sellCooldown:St(y=>({display:{title:"Decommission Machine",description:"Reduce the selling cooldown by 5 seconds.",effectDisplay:fe(()=>s(G,null,[pe(d.mul(y.amount.value,-5).add(60)),h("s / 10s")])),showAmount:!1},limit:10,requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(1.4).mul(200)})),style:{width:"180px",padding:"0 10px"}})),capsuleGain:St(y=>({display:{title:"Capsule Productor",description:"Increase capsule's production speed by 1%.",effectDisplay:fe(()=>s(G,null,[h("+"),pe(y.amount.value),h("%")])),showAmount:!1},visibility:Ee(m.capsules),requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(1.3).mul(175)})),style:{width:"180px",padding:"0 10px"}})),capsuleCap:St(y=>({display:{title:"Capsule Storage",description:"Increase capsule's maximum storage by 1.",effectDisplay:fe(()=>s(G,null,[h("+"),pe(y.amount.value)])),showAmount:!1},visibility:Ee(m.capsules),requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(1.6).mul(200)})),style:{width:"180px",padding:"0 10px"}})),capsuleEffect:St(y=>({display:{title:"Re-encapsulation",description:"Unlock a new capsule effect",effectDisplay:fe(()=>s(G,null,[h("+"),pe(y.amount.value)])),showAmount:!1},limit:1,visibility:Ee(m.capsules),requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(4).mul(1e3)})),style:{width:"180px",padding:"0 10px"}})),startInfo:St(y=>({display:{title:"Head Start",description:"Increase the starting Information budget by 50.",effectDisplay:fe(()=>s(G,null,[pe(d.mul(y.amount.value,50))])),showAmount:!1},limit:5,visibility:Ee(D(()=>o.value.observer==!0)),requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(1.5).mul(400)})),style:{width:"180px",padding:"0 10px"}})),enemyDecrease:St(y=>({display:{title:"Repellent",description:"Decrease the amount of enemies per wave by 1.",effectDisplay:fe(()=>s(G,null,[h("-"),pe(y.amount.value)])),showAmount:!1},limit:3,requirements:ft(()=>({resource:Ee(e),cost:g.variable(y.amount).pow_base(2.2).mul(800)})),style:{width:"180px",padding:"0 10px"}}))},C={beamer:{cost:Pa(y=>({display:{title:"Cheaper Beamer",description:"Decrease the base cost by 5"},requirements:ft(()=>({resource:Ee(e),cost:200}))})),double:Pa(y=>({display:{title:"Double Up",description:"Allow the beamer to attack two enemies at once"},requirements:ft(()=>({resource:Ee(e),cost:2e3}))}))}};const B={bestEnergy:sa(pt.resourcesTotal.energy),bestInfo:sa(pt.resourcesTotal.info),bestTime:sa(pt.lifetime)};let F=ye({}),M=L("normal"),I={standardCycle:{name:"First Cycle",description:"Reach Cycle {0} in Standard mode.",target:Ee(r.standard),goal:y=>10+y*5,reward:y=>["xp",10+y*(y+1)*(y+2)/6],exclusiveRewards:{3:["building","splatter"],6:["building","blaster"],9:["building","splitter"],12:["building","thunder"]}},boostedCycle:{name:"Second Cycle",description:"Reach Cycle {0} in Boosted mode.",target:Ee(r.boosted),goal:y=>10+y*5,reward:y=>["xp",12+y*(y+1)*(y+2)/3],exclusiveRewards:{3:["building","bomber"],6:["building","hourglass"],9:["building","decayer"]}},hardcoreCycle:{name:"Third Cycle",description:"Reach Cycle {0} in Hardcore mode.",target:Ee(r.hardcore),goal:y=>10+y*5,reward:y=>["xp",15+y*(y+1)*(y+2)/2],exclusiveRewards:{3:["building","igniter"],6:["building","pagoda"]}},upgradeCount:{name:"Not Really a Fair Game",description:"Buy {0} Researches.",target:D(()=>Object.values(b).reduce((y,j)=>d.add(y,j.amount.value).toNumber(),0)),goal:y=>3+y*2,reward:y=>["capsules",Math.floor(3+y/2)],exclusiveRewards:{3:["building","observer"],6:["building","overclocker"],9:["building","sharpener"],12:["building","stunner"]}},capsuleCount:{name:"Is This P2W?",description:"Open {0} \u{1F48A}.",target:D(()=>Object.values(oe.value).reduce((y,j)=>y+j,0)),goal:y=>10+y*4+y*(y+1)/2+Math.floor(y*y*y/32),reward:y=>["xp",50+y*4+y*(y+1)*(y+2)/6],exclusiveRewards:{3:["building","synthesizer"],6:["building","expander"],9:["building","winderR"],12:["building","antiwinder"]}},totalXP:{name:"Look how much you've grown!",description:"Gain a total of {0} XP.",target:Ee(t),goal:y=>500+y*(y+1)*(y+2)*250,reward:y=>["capsules",Math.floor(3+y/2)],exclusiveRewards:{3:["building","lengthener"],6:["building","swamp"]}},bestEnergy:{name:"Power Player",description:"Reach a best total Energy of {0}.",target:Ee(B.bestEnergy),goal:y=>1e4+y*(y+1)*(y+2)*500,reward:y=>["xp",20+y*(y+1)*(y+2)*1.5],exclusiveRewards:{3:["building","multiplier"],5:["building","fox"]}},bestInfo:{name:"Knowledged Looper",description:"Reach a best total Information of {0}.",target:Ee(B.bestInfo),goal:y=>1e3+y*(y+1)*(y+2)*50,reward:y=>["xp",40+y*(y+1)*(y+2)*2.5],exclusiveRewards:{3:["building","thinker"],5:["building","turtle"]}},bestTime:{name:"Marathoner",description:"Have a {0} seconds long game.",target:Ee(B.bestTime),goal:y=>300+y*80+y*y*20,reward:y=>["xp",40+y*(y+1)*(y+2)],exclusiveRewards:{3:["building","tachyon"],6:["building","snail"]}},meta:{name:"Very Creative Objective",description:"Complete {0} Objectives.",target:D(()=>Object.values(F.value).reduce((y,j)=>y+j,0)),goal:y=>20+y*4+y*(y+1)/2,reward:y=>["capsules",Math.floor(3+y/3)],exclusiveRewards:{2:["building","xray"],5:["building","winderL"],8:["building","winder"]}}},K={anxiety:{name:"Anxiety",description:"Reach a stress level of 200%.",reward:["building","stablizer"]},stucked:{name:"Stucked",description:'Get yourself into a "softlocked" state.',reward:["building","pins"]},wysi:{name:"All-Seeing",description:"Have *exactly* 727 Energy at some point.",reward:["building","wysi"]}},oe=ye({}),we={xp:{name:"XP Core",description:"+{0}% xp gain.",formula:y=>y},energy:{name:"Energy Core",description:"+{0} starting Energy.",formula:y=>y},capsules:{name:"Capsule Core",description:"+{0}% capsule production.",formula:y=>Math.sqrt(y),precision:2},capacity:{name:"Capacity Core",description:"+{0} capsule capacity.",formula:y=>Math.sqrt(y/10),precision:2},health:{name:"Health Core",description:"-{0}% enemy health.",formula:y=>Math.sqrt(y/5),precision:2,visibility:()=>d.gte(b.capsuleEffect.amount.value,1)}};function rt(y){var j;return we[y].formula((j=oe.value[y])!=null?j:0)}Je.on("onLoad",()=>{var y,j;for(let[P,U]of Object.entries(I))for(let[Q,be]of Object.entries(U.exclusiveRewards))((y=F.value[P])!=null?y:0)>+Q&&be[0]=="building"&&(o.value[be[1]]=!0);for(let[P,U]of Object.entries(K))((j=F.value[P])!=null?j:0)>=1&&U.reward[0]=="building"&&(o.value[U.reward[1]]=!0)});const Ce=Qa(()=>({startNodes:()=>[],state(){return{nodes:[{id:0,type:"play",position:{x:0,y:0}},{id:1,type:"info",position:{x:Math.sin(Z.timePlayed/20)*150,y:Math.cos(Z.timePlayed/20)*150}},{id:2,type:"setting",position:{x:Math.sin(Z.timePlayed/20+Math.PI*.66667)*150,y:Math.cos(Z.timePlayed/20+Math.PI*.66667)*150}},{id:3,type:"saves",position:{x:Math.sin(Z.timePlayed/20+Math.PI*1.33333)*150,y:Math.cos(Z.timePlayed/20+Math.PI*1.33333)*150}},{id:4,type:"collection",position:{x:Math.sin(Z.timePlayed/-50)*300,y:Math.cos(Z.timePlayed/-50)*300}},{id:5,type:"research",position:{x:Math.sin(Z.timePlayed/-50+Math.PI)*300,y:Math.cos(Z.timePlayed/-50+Math.PI)*300}},{id:6,type:"objectives",position:{x:Math.sin(Z.timePlayed/-50+Math.PI*.5)*300,y:Math.cos(Z.timePlayed/-50+Math.PI*.5)*300}},{id:7,type:"capsules",position:{x:Math.sin(Z.timePlayed/-50+Math.PI*1.5)*300,y:Math.cos(Z.timePlayed/-50+Math.PI*1.5)*300}}],selectedNode:null,selectedAction:null}},classes:{"hub-board":!0},types:{play:{shape:nt.Circle,fillColor:"#afcfef",size:80,title:"\u25B6",onClick(y){ve()}},info:{shape:nt.Circle,fillColor:"#afcfef",size:30,title:"i",onClick(y){var j;(j=document.querySelector(".overlay-nav :nth-child(4)"))==null||j.click()}},setting:{shape:nt.Circle,fillColor:"#afcfef",size:30,title:"\u2699\uFE0F",onClick(y){var j;(j=document.querySelector(".overlay-nav :nth-child(3)"))==null||j.click()}},saves:{shape:nt.Circle,fillColor:"#afcfef",size:30,title:"\u{1F4BE}",onClick(y){var j;(j=document.querySelector(".overlay-nav :nth-child(2)"))==null||j.click()}},collection:{shape:nt.Circle,fillColor:"#afcfef",size:50,title:"\u{1F4DA}",onClick(y){ke()}},research:{shape:nt.Circle,fillColor:"#afcfef",size:50,title:"\u{1F52C}",onClick(y){Ke()}},objectives:{shape:nt.Circle,fillColor:"#afcfef",size:50,title:"\u{1F3AF}",onClick(y){ge()}},capsules:{shape:nt.Circle,fillColor:"#afcfef",size:50,title:"\u{1F48A}",onClick(y){tn()}}}}));function ve(){st.value=s(G,null,[s("h1",{class:"result-title"},[h("NEW GAME")]),s("h2",{style:"font-style: italic;"},[h("- Select your game mode. -")])]),bt.value=()=>{let y=sn.indexOf(l.value),j=sn[(y+sn.length-1)%sn.length],P=sn[(y+1)%sn.length];return s(G,null,[s("div",{class:"game-mode-holder"},[s("button",{class:"feature game-mode-card prev",onClick:()=>l.value=j},[s("h2",null,[xt[j].name]),s("hr",null,null),s("i",null,[xt[j].description,s("br",null,null),We(xt[j].multiplier,1),h("\xD7 XP gain.")]),s("hr",null,null),h("Highest cycle reached:"),s("br",null,null),s("h1",null,[pe(r[j].value)])]),s("button",{class:"feature game-mode-card"},[s("h2",null,[xt[l.value].name]),s("hr",null,null),s("i",null,[xt[l.value].description,s("br",null,null),We(xt[l.value].multiplier,1),h("\xD7 XP gain.")]),s("hr",null,null),h("Highest cycle reached:"),s("br",null,null),s("h1",null,[pe(r[l.value].value)])]),s("button",{class:"feature game-mode-card next",onClick:()=>l.value=P},[s("h2",null,[xt[P].name]),s("hr",null,null),s("i",null,[xt[P].description,s("br",null,null),We(xt[P].multiplier,1),h("\xD7 XP gain.")]),s("hr",null,null),h("Highest cycle reached:"),s("br",null,null),s("h1",null,[pe(r[P].value)])])])])},kt.value=s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("button",{class:"feature can",onClick:()=>{He.value=!1}},[h("Back")]),s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{V()}},[h("Next")])]),He.value=!0}function V(){let y=d.add(b.maxBuildings.amount.value,6).toNumber(),j=d.mul(b.startEnergy.amount.value,25).add(100).toNumber();st.value=()=>s(G,null,[s("h1",{class:"result-title"},[h("NEW GAME")]),s("h2",{style:"font-style: italic;"},[h("- Equip your buildings. -")]),s("div",{class:"building-list collection",style:"flex-wrap: nowrap; overflow-x: auto; width: 100%; margin-bottom: 20px; transition: none"},[u.value.map(P=>{let U=Ie[P];return s("button",{class:Object.fromEntries([[U.class,!0],["selected",c.value==P]]),onClick:()=>{c.value==P?u.value.splice(u.value.indexOf(P),1):c.value=P}},[s("div",{class:"background",style:{background:U.color}},[s("div",{class:"icon"},[U.icon])])])}),[...Array(y-u.value.length).keys()].map(()=>s("button",{class:"disabled"},[h("a")]))]),s("hr",{style:"background: var(--foreground); opacity: 1"},null)]),bt.value=()=>s(G,null,[s("div",{class:"building-list collection",style:"transition: none"},[Object.keys(o.value).map(P=>{let U=Ie[P];return s("button",{class:Object.fromEntries([[U.class,!0],["disabled",u.value.includes(P)],["selected",c.value==P]]),onClick:()=>{c.value==P?u.value.includes(P)?u.value.splice(u.value.indexOf(P),1):u.value.length<y&&u.value.push(P):c.value=P}},[s("div",{class:"background",style:{background:U.color}},[s("div",{class:"icon"},[U.icon])])])})])]),kt.value=()=>s(G,null,[c.value?s("div",{style:"display: flex; flex-direction: row; align-content: flex-start; gap: 10px; font-size: 12px; transition: none"},[s("div",{style:"flex: 0 0 calc(50% - 5px); margin: 0"},[s("h3",null,[Ie[c.value].name])," ",s("h5",{style:"display: inline-block; margin: 0"},[s("i",null,[h("- "),Ie[c.value].class.toUpperCase()])]),s("br",null,null),s("i",null,[Ie[c.value].description])]),s("div",{style:"flex: 0 0 calc(50% - 5px); margin: 0"},[s("h5",null,[h("BASE BUILDING COST:")]),s("div",{class:"stat-entries"},[Object.entries(Ie[c.value].baseCost).map(([P,U])=>s("div",null,[s("div",{class:"name"},[pt.resources[P].displayName]),s("div",{class:"value"},[pe(U)])]))]),s("hr",{style:"opacity: 0; margin: 3px"},null),s("h5",null,[h("STARTING SPECS:")]),s("div",{class:"stat-entries"},[Object.entries(Ie[c.value].upgrades).map(([P,U])=>{var Q,be;return s("div",null,[s("div",{class:"name"},[U.name]),s("div",{class:"value"},[We(U.effect(0),(Q=U.precision)!=null?Q:0)+((be=U.unit)!=null?be:"")])])})])])]):s("div",{style:"text-align: center; font-style: italic;"},[h("Click on a building to view its details.")]),s("hr",{style:"opacity: 0; margin: 3px"},null),s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("button",{class:"feature can",onClick:()=>{ve()}},[h("Back")]),s("button",{class:"feature can",onClick:()=>{He.value=!1}},[h("Close")]),s("div",{style:"flex-grow: 1"},null),u.value.findIndex(P=>{var U;return Ie[P].class=="damager"&&Object.keys(Ie[P].baseCost).length<=1&&((U=Ie[P].baseCost.energy)!=null?U:1/0)<=j&&Ie[P].onUpdate})>=0?s("button",{class:"feature can",onClick:()=>{He.value=!1,S(1500),i.value=Ln.Transitioning,setTimeout(()=>{Z.tabs=["game"],pt.startGame(),pt.intro(2e3),i.value=Ln.Idle},2e3)}},[h("Start game")]):s("div",null,[h("Need at least 1 building that can defeat enemies at start.")])])]),c.value="",He.value=!0}function ke(){st.value=s(G,null,[s("h1",{class:"result-title"},[h("COLLECTION")]),s("h2",{style:"font-style: italic;"},[h("- View your unlocked buildings. -")])]),bt.value=()=>{let y=0;return m.collection.value?s("div",{class:"building-list collection"},[Object.entries(Ie).map(([j,P])=>s("button",{class:Object.fromEntries([[P.class,!0],["disabled",!o.value[j]],["selected",c.value==j]]),onClick:()=>c.value=j},[s("div",{class:"background",style:{background:P.color}},[s("div",{class:"icon"},[P.icon])])]))]):s("div",{style:"text-align: center; --layer-color: #afcfef"},[s("button",{class:{feature:!0,can:e.value>=y},style:"font-size: 10px; width: 200px; height: 80px; margin: 2s0px;",onClick:()=>{e.value>=y&&(e.value-=y,m.collection.value=!0)}},[s("h2",null,[h("Unlock Collection.")]),s("br",null,null),s("br",null,null),h("Costs: "),pe(y),h(" xp")])])},kt.value=()=>s(G,null,[c.value?s("div",{style:"display: flex; flex-direction: row; align-content: flex-start; gap: 10px; font-size: 12px; transition: none; --layer-color: #afcfef"},[s("div",{style:"flex: 0 0 calc(50% - 5px); margin: 0"},[s("h3",null,[Ie[c.value].name])," ",s("h5",{style:"display: inline-block; margin: 0"},[s("i",null,[h("- "),Ie[c.value].class.toUpperCase()])]),s("br",null,null),s("i",null,[Ie[c.value].description]),s("br",null,null),C[c.value]?s("div",null,[s("button",{class:"feature can",onClick:()=>{Nt(c.value)}},[s("h3",null,[h("Enhancements")])])]):""]),s("div",{style:"flex: 0 0 calc(50% - 5px); margin: 0"},[s("h5",null,[h("BASE BUILDING COST:")]),s("div",{class:"stat-entries"},[Object.entries(Ie[c.value].baseCost).map(([y,j])=>s("div",null,[s("div",{class:"name"},[pt.resources[y].displayName]),s("div",{class:"value"},[pe(j)])]))]),s("hr",{style:"opacity: 0; margin: 3px"},null),s("h5",null,[h("STARTING SPECS:")]),s("div",{class:"stat-entries"},[Object.entries(Ie[c.value].upgrades).map(([y,j])=>{var P,U;return s("div",null,[s("div",{class:"name"},[j.name]),s("div",{class:"value"},[We(j.effect(0),(P=j.precision)!=null?P:0)+((U=j.unit)!=null?U:"")])])})])])]):m.collection.value?s("div",{style:"text-align: center; font-style: italic;"},[h("Click on a building to view its details.")]):"",s("hr",{style:"opacity: 0; margin: 3px"},null),s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{He.value=!1}},[h("Back")])])]),c.value="",He.value=!0}function Ke(){st.value=s(G,null,[s("h1",{class:"result-title"},[h("LABORATORY")]),s("h2",{style:"font-style: italic;"},[h("- Replay. Research. Repeat. -")])]),bt.value=()=>{let y=250;return m.research.value?s("div",{style:"text-align: center; --layer-color: #afcfef"},[h("You have "),s("h2",null,[pe(e.value)]),h(" xp."),s("br",null,null),s("br",null,null),s("div",{style:"display: flex; flex-wrap: wrap; justify-content: center"},[Object.values(b).map(Mt)]),s("br",null,null),s("br",null,null)]):s("div",{style:"text-align: center; --layer-color: #afcfef"},[s("button",{class:{feature:!0,can:e.value>=y},style:"font-size: 10px; width: 200px; height: 80px; margin: 20px;",onClick:()=>{e.value>=y&&(e.value-=y,m.research.value=!0)}},[s("h2",null,[h("Unlock Research.")]),s("br",null,null),s("br",null,null),h("Costs: "),pe(y),h(" xp")])])},kt.value=s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{He.value=!1}},[h("Back")])]),He.value=!0}function ge(){st.value=()=>s(G,null,[s("h1",{class:"result-title"},[h("OBJECTIVES")]),s("h2",{style:"font-style: italic;"},[h("- Do tasks. Reap rewards. -")]),m.objectives.value?s("div",{class:"option-tabs"},[s("button",{class:{selected:M.value=="normal"},onClick:()=>M.value="normal"},[h("Normal")]),s("button",{class:{selected:M.value=="special"},onClick:()=>M.value="special"},[h("Special")])]):""]),bt.value=()=>{let y=0;return m.objectives.value?s("div",{style:"text-align: center; --layer-color: #afcfef"},[M.value=="special"?Object.entries(K).map(([j,P])=>{let U=F.value[j];return s("div",{class:"objective-holder"},[s("h3",null,[P.name]),s("br",null,null),U===void 0?P.description.replaceAll(/\S/g,"?"):P.description,s("hr",null,null),s("div",{class:"building-list",style:"justify-content: center; margin-top: 0; transition: none"},[s("button",{class:Object.fromEntries([...P.reward[0]=="building"?[[Ie[P.reward[1]].class,!0]]:[],["disabled",U===1],["claimable",U===0]]),onClick:()=>{U===0&&(P.reward[0]=="building"&&(o.value[P.reward[1]]=!0),U=F.value[j]=1)}},[s("div",{class:"background",style:{background:Ie[P.reward[1]].color}},[s("div",{class:"icon"},[Ie[P.reward[1]].icon])])])])])}):Object.entries(I).map(([j,P])=>{var be,Ye,dt;let U=(be=F.value[j])!=null?be:0,Q=P.goal(U);return s("div",{class:"objective-holder"},[s("h3",null,[P.name]),s("br",null,null),P.description.replace("{0}",We(Q,(Ye=P.goalPrecision)!=null?Ye:0)),s("hr",null,null),s("div",{style:"display: inline-block; min-width: 50px; padding-inline: 5px; border-bottom: 2px solid var(--foreground); transition: none"},[We(P.target.value,(dt=P.goalPrecision)!=null?dt:0)]),s("div",{class:"building-list"},[[-3,-2,-1,0,1,2,3].map(Te=>{var En,Ot;let gt=P.exclusiveRewards[U+Te],$n=P.reward(U+Te);return s("button",{class:Object.fromEntries([...(gt==null?void 0:gt[0])=="building"?[[Ie[gt[1]].class,!0]]:[],["disabled",Te<0],["claimable",Te>=0&&P.target.value>=P.goal(U+Te)]]),onClick:()=>{if(Te>=0&&P.target.value>=P.goal(U+Te))for(let N=0;N<=Te;N++){let A=P.exclusiveRewards[U];if(A)A[0]=="building"&&(o.value[A[1]]=!0);else{let O=P.reward(U),q={xp:e,capsules:n}[O[0]];q.value=d.add(q.value,O[1]).toNumber()}U=F.value[j]=U+1}}},[s("div",{class:{goal:!0,zero:Te==0}},[U+Te>=0?We(P.goal(U+Te),(En=P.goalPrecision)!=null?En:0):""]),U+Te<0?"":gt?s("div",{class:"background",style:{background:Ie[gt[1]].color}},[s("div",{class:"icon"},[Ie[gt[1]].icon])]):s("div",{class:"xp-reward"},[We($n[1],(Ot=P.rewardPrecision)!=null?Ot:0),s("br",null,null),{xp:"XP",capsules:"\u{1F48A}"}[$n[0]]])])})])])})]):s("div",{style:"text-align: center; --layer-color: #afcfef"},[s("button",{class:{feature:!0,can:e.value>=y},style:"font-size: 10px; width: 200px; height: 80px; margin: 20px;",onClick:()=>{e.value>=y&&(e.value-=y,m.objectives.value=!0)}},[s("h2",null,[h("Unlock Objectives.")]),s("br",null,null),s("br",null,null),h("Costs: "),pe(y),h(" xp")])])},kt.value=s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{He.value=!1}},[h("Back")])]),He.value=!0}function tn(){st.value=s(G,null,[s("h1",{class:"result-title"},[h("CAPSULES")]),s("h2",{style:"font-style: italic;"},[h("- The solution to everything. -")])]),bt.value=()=>{let y=1,j=900/(100+rt("capsules"))/(100+new d(b.capsuleGain.amount.value).toNumber())*1e4,P=20+rt("capacity")+new d(b.capsuleCap.amount.value).toNumber(),U=Math.min((Z.time-a.value)/j/1e3,P);return m.capsules.value?s("div",{style:"text-align: center; --layer-color: #afcfef"},[h("You have "),s("h2",null,[pe(n.value)]),h(" \u{1F48A}."),s("hr",null,null),Object.entries(we).map(([Q,be])=>{var dt,Te;if(be.visibility&&!be.visibility())return null;let Ye=(dt=oe.value[Q])!=null?dt:0;return s("button",{class:"feature",style:"background: #afcfef; font-size: 10px; width: 240px; height: 100px;"},[pe(Ye),h(" \u{1F48A}"),s("br",null,null),s("h3",null,[be.name]),s("br",null,null),be.description.replace("{0}",We(be.formula(Ye),(Te=be.precision)!=null?Te:0))])}),s("hr",null,null),s("div",{style:"display: flex; gap: 10px; justify-content: center"},[s("button",{class:{feature:!0,can:n.value>=1},style:"font-size: 12px; width: 115px; height: 50px;",onClick:()=>{var Q;if(n.value>=1){n.value-=1;let be=Object.entries(we).filter(([dt,Te])=>!Te.visibility||Te.visibility()).map(([dt,Te])=>dt),Ye=be[Math.floor(Math.random()*be.length)];oe.value[Ye]=((Q=oe.value[Ye])!=null?Q:0)+1}}},[h("Open 1 \u{1F48A}")]),s("button",{class:{feature:!0,can:n.value>=10},style:"font-size: 12px; width: 115px; height: 50px;",onClick:()=>{var Q;if(n.value>=10){n.value-=10;for(let be=0;be<10;be++){let Ye=Object.entries(we).filter(([Te,gt])=>!gt.visibility||gt.visibility()).map(([Te,gt])=>Te),dt=Ye[Math.floor(Math.random()*Ye.length)];oe.value[dt]=((Q=oe.value[dt])!=null?Q:0)+1}}}},[h("Open 10 \u{1F48A}")])]),s("hr",null,null),s("br",null,null),h("You have "),s("h2",null,[We(U,2),h(" / "),We(P,2)]),h(" unclaimed \u{1F48A}."),s("br",null,null),h("You gain 1 \u{1F48A} every "),Yt(j),h("."),s("br",null,null),h("("),U>=P?"Your \u{1F48A} is full, claim them now!":"Full after "+Yt((P-U)*j),h(")"),s("hr",null,null),s("button",{class:{feature:!0,can:U>=1},style:"font-size: 12px; width: 240px; height: 50px;",onClick:()=>{let Q=Math.floor(U);n.value+=Q,U-=Q,a.value=Date.now()-U*j*1e3}},[h("Claim "),pe(Math.floor(U)),h(" \u{1F48A}")])]):s("div",{style:"text-align: center; --layer-color: #afcfef"},[s("button",{class:{feature:!0,can:n.value>=y},style:"font-size: 10px; width: 200px; height: 80px; margin: 20px;",onClick:()=>{n.value>=y&&(n.value-=y,m.capsules.value=!0)}},[s("h2",null,[h("Unlock Capsules.")]),s("br",null,null),s("br",null,null),h("Costs: "),pe(y),h(" \u{1F48A}")])])},kt.value=s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{He.value=!1}},[h("Back")])]),He.value=!0}function Nt(y){let j=Ie[y];st.value=()=>s(G,null,[s("h1",{class:"result-title"},[j.name]),s("h2",{style:"font-style: italic;"},[h("- Enhance your building. -")])]),bt.value=()=>s("div",{style:"text-align: center; --layer-color: #afcfef"},[h("You have "),s("h2",null,[pe(e.value)]),h(" xp."),s("br",null,null),s("br",null,null),s("div",{style:"display: flex; flex-wrap: wrap; justify-content: center"},[Object.values(C[y]).map(Mt)])]),kt.value=s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{ke(),c.value=y}},[h("Back")])])}let He=L(!1),st=L(""),bt=L(""),kt=L("");return{name:"Tree",color:"#afcfef",classes:{hub:!0},minimizable:!1,points:e,total:t,capsules:n,timeSinceLastClaim:a,intro:w,outtro:S,bestCycle:r,stats:B,hubState:i,selectedGameMode:l,unlockedBuildings:o,selectedBuildings:u,board:Ce,unlocks:m,upgrades:b,buildingUpgrades:C,objectives:F,allocatedCapsules:oe,getCapsuleEffect:rt,display:fe(()=>s(G,null,[Mt(Ce),s("div",{class:{"game-top":!0,hidden:i.value==Ln.Transitioning||p.value}},[s("div",{style:"display: flex; height: 31px; justify-content: center"},[s("span",{class:"bar-label",style:"margin: 4px;"},[pe(e.value),h(" xp")]),s("span",{class:"bar-label",style:"margin: 4px;"},[pe(n.value),h(" \u{1F48A}")])])]),s(Dt,{modelValue:He.value,"onUpdate:modelValue":y=>He.value=y},{header:st.value,body:bt.value,footer:kt.value})]))}}),ku=e=>[ae,pt],ai=D(()=>Object.keys(ae.unlockedBuildings.value).length>=Object.keys(Ie).length);function Su(e,t){}var xu=Object.freeze(Object.defineProperty({__proto__:null,gameModes:xt,gameModeArray:sn,main:ae,getInitialLayers:ku,hasWon:ai,fixOldSave:Su},Symbol.toStringTag,{value:"Module"}));const On=Xn,Mu={shape:nt.Circle,size:50,title:e=>{let t=e.state.target.enemies.length;return _e.quality<1&&t>0?ce(t):""},classes:{loop:!0}},Iu={shape:nt.Circle,size:8,title:"",classes:{enemy:!0}},Tu={shape:e=>{var t;return{damager:nt.Circle,effector:nt.Diamond,influencer:nt.Squircle,generator:nt.Square}[(t=On[e.state.target.type])==null?void 0:t.class]},size:30,title:e=>{var t;return(t=On[e.state.target.type])==null?void 0:t.icon},fillColor:e=>{var t;return(t=On[e.state.target.type])==null?void 0:t.color},progress:e=>{var n,a,i;let t=e.state.target;return(i=(a=(n=On[t.type]).progress)==null?void 0:a.call(n,t))!=null?i:0},progressColor:"var(--foreground)",progressDisplay:wa.Outline,classes:{building:!0}};var Fu=Object.freeze(Object.defineProperty({__proto__:null,loop:Mu,enemy:Iu,building:Tu},Symbol.toStringTag,{value:"Module"}));const $u=re({props:{progress:{type:Y(String,Object,Number),required:!0},width:{type:Y(Number),required:!0},height:{type:Y(Number),required:!0},direction:{type:Y(String),required:!0},display:Y(Object,String,Function),visibility:{type:Y(Number,Boolean),required:!0},style:Y(Object,String,Array),classes:Y(Object),borderStyle:Y(Object,String,Array),textStyle:Y(Object,String,Array),baseStyle:Y(Object,String,Array),fillStyle:Y(Object,String,Array),mark:Y(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ea,Node:ta},setup(e){const{progress:t,width:n,height:a,direction:i,display:r}=Ge(e),l=D(()=>{let c=t.value instanceof d?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(c,0),1))*100}),o=D(()=>{const c={width:Qe(n)+1+"px",height:Qe(a)+.5+"px"};switch(f(i)){case H.Up:c.clipPath=`inset(${l.value}% 0% 0% 0%)`,c.width=Qe(n)+1+"px";break;case H.Down:c.clipPath=`inset(0% 0% ${l.value}% 0%)`,c.width=Qe(n)+1+"px";break;case H.Right:c.clipPath=`inset(0% ${l.value}% 0% 0%)`;break;case H.Left:c.clipPath=`inset(0% 0% 0% ${l.value}%)`;break;case H.Default:c.clipPath="inset(0% 50% 0% 0%)";break}return c}),u=yn(r);return{normalizedProgress:l,barStyle:o,component:u,unref:f,Visibility:vt,isVisible:Qt,isHidden:Qn}}});function Eu(e,t,n,a,i,r){var u,c,m,p,w,S,b;const l=Rt("MarkNode"),o=Rt("Node");return e.isVisible(e.visibility)?(k(),T("div",{key:0,style:at([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.isHidden(e.visibility)?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),class:Ae({bar:!0,...e.unref(e.classes)})},[v("div",{class:"overlayTextContainer border",style:at([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(c=e.unref(e.borderStyle))!=null?c:{}])},[e.component?(k(),T("span",{key:0,class:"overlayText",style:at(e.unref(e.textStyle))},[(k(),ie(Xe(e.component)))],4)):W("",!0)],4),v("div",{class:"border",style:at([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(m=e.unref(e.style))!=null?m:{},(p=e.unref(e.baseStyle))!=null?p:{},(w=e.unref(e.borderStyle))!=null?w:{}])},[v("div",{class:"fill",style:at([e.barStyle,(S=e.unref(e.style))!=null?S:{},(b=e.unref(e.fillStyle))!=null?b:{}])},null,4)],4),s(l,{mark:e.unref(e.mark)},null,8,["mark"]),s(o,{id:e.id},null,8,["id"])],6)):W("",!0)}var Du=Se($u,[["render",Eu],["__scopeId","data-v-368a68be"]]);const Pu=Symbol("Bar");function oa(e,...t){const n=t.reduce((a,i)=>{var r;return Object.assign(a,(r=i.getPersistentData)==null?void 0:r.call(i))},{});return cn(a=>{var l,o;const i=e.call(a,a);i.id=Kn("bar-"),i.type=Pu,i[vn]=Du;for(const u of t)(l=u.preConstruct)==null||l.call(u,i);Object.assign(i,n),R(i,"visibility"),xe(i,"visibility",vt.Visible),R(i,"width"),R(i,"height"),R(i,"direction"),R(i,"style"),R(i,"classes"),R(i,"borderStyle"),R(i,"baseStyle"),R(i,"textStyle"),R(i,"fillStyle"),R(i,"progress"),R(i,"display"),R(i,"mark");for(const u of t)(o=u.postConstruct)==null||o.call(u,i);const r=t.reduce((u,c)=>{var m;return Object.assign(u,(m=c.getGatheredProps)==null?void 0:m.call(c,i))},{});return i[hn]=function(){const{progress:u,width:c,height:m,direction:p,display:w,visibility:S,style:b,classes:C,borderStyle:B,textStyle:F,baseStyle:M,fillStyle:I,mark:K,id:oe}=this;return{progress:u,width:c,height:m,direction:p,display:w,visibility:S,style:f(b),classes:C,borderStyle:B,textStyle:F,baseStyle:M,fillStyle:I,mark:K,id:oe,...r}},i})}const ze=Xn,Au="game";function wn(e){let[t,n]=e.split("x");return{x:+t,y:+n}}function Re(e,t){return e+"x"+t}var lt=function(e){return e.New="",e.Started="start",e.Stopped="stop",e.Idle="idle",e}(lt||{});const pt=_a(Au,function(){const e="Game",t=ye(0),n=ye(0),a=ye(0),i=L(0),r=ye({}),l=ye(0),o={energy:Wn(0,"Energy"),info:Wn(0,"Info")},u=Object.fromEntries(Object.entries(o).map(([N,A])=>[N,Ja(A)])),c=ye(0),m=ye({});function p(N){var A;return 1.1**(c.value+((A=m.value[N])!=null?A:0))}function w(N){return N==="beamer"&&ae.buildingUpgrades.beamer.cost.bought.value==!0?5:0}const S=ye("",!1),b=ye(0),C=L(!1),B=L(!1),F=ye(0),M=L(0),I=L(!1);function K(N=1e3){var q;I.value=!0;let A=null;(q=ge.stage.value)==null||q.setMinZoom(.1);function O(z){var ne;A===null&&(A=z),z=(z-A)/N;let ee=1-(1e3**(1-z)-1)/999;(ne=ge.stage.value)==null||ne.zoomAbs(window.innerWidth/2,window.innerHeight/2,Math.max(ee,1e-6)),z<1?requestAnimationFrame(O):I.value=!1}requestAnimationFrame(O)}function oe(N=1e3){I.value=!0;let A=ge.stage.value.getTransform().scale,O=null;ge.stage.value.setMinZoom(0);function q(z){O===null&&(O=z),z=(z-O)/N;let ee=(1e3**z-1)/999;ge.stage.value.zoomAbs(window.innerWidth/2,window.innerHeight/2,Math.max(A*(1-ee),1e-6)),z<1?requestAnimationFrame(q):I.value=!1}requestAnimationFrame(q)}const we={stress:St(N=>({display:fe(()=>s(G,null,[h("Level "),ce(N.amount.value),s("br",null,null),s("h3",null,[h("Stress Tolerance")]),s("hr",null,null),h("\u2191 "),ce(d.add(N.amount.value,101)),h("% \u2191"),s("br",null,null),ce(d.add(N.amount.value,100)),h("%"),s("br",null,null),s("hr",null,null),Zn(we.stress.requirements)])),requirements:ft(()=>({resource:Ee(o.info),cost:g.variable(N.amount).pow_base(1.1).mul(50)}))})),energy:St(N=>({display:fe(()=>s(G,null,[h("Level "),ce(N.amount.value),s("br",null,null),s("h3",null,[h("Enemy Base Energy")]),s("hr",null,null),h("\u2191 "),ce(d.add(N.amount.value,26)),h(" \u2191"),s("br",null,null),ce(d.add(N.amount.value,25)),s("br",null,null),s("hr",null,null),Zn(we.energy.requirements)])),requirements:ft(()=>({resource:Ee(o.info),cost:g.variable(N.amount).pow_base(1.15).mul(50)}))}))};function rt(){t.value=0,n.value=0,o.energy.value=d.mul(ae.upgrades.startEnergy.amount.value,25).add(ae.getCapsuleEffect("energy")).add(100).toNumber(),o.info.value=d.mul(ae.upgrades.startInfo.amount.value,50).toNumber(),fn(()=>{u.energy.value=0,u.info.value=o.info.value}),c.value=0,m.value={},l.value=0,S.value=lt.Started,b.value=1,B.value=!1;for(let A of Object.values(we))A.amount.value=0;F.value=0,a.value=100;let N=()=>setTimeout(()=>{ge.stage.value?(ge.stage.value.getTransform(),ge.stage.value.zoomAbs(window.innerWidth/2,window.innerHeight/2,1),ge.stage.value.moveTo(window.innerWidth/2,window.innerHeight/2)):N()},0);N(),r.value={"0x0":{enemies:[{angle:0,lifetime:0,speed:Number.EPSILON,health:20,maxHealth:20,effects:{},loot:{energy:100}}]}}}function Ce(N=3e3,A=6e3){S.value=lt.Stopped,b.value=.1,ae.bestCycle[ae.selectedGameMode.value].value=Math.max(ae.bestCycle[ae.selectedGameMode.value].value,t.value);let O={x:0,y:0},q={x:0,y:0};for(let qe in r.value){let{x:Fe,y:et}=wn(qe);O.x=Math.min(O.x,Fe),O.y=Math.min(O.y,et),q.x=Math.max(q.x,Fe),q.y=Math.max(q.y,et)}let z=(O.x+q.x)*-50,ee=(O.y+q.y)*-50,ne=Math.min(window.innerWidth/(q.x-O.x+1)/120,window.innerHeight/(q.y-O.y+1)/120,1),Pe=()=>setTimeout(()=>{ge.stage.value?(ge.stage.value.smoothMoveTo(z+window.innerWidth/2,ee+window.innerHeight/2),ge.stage.value.smoothZoomAbs(window.innerWidth/2,window.innerHeight/2,ne)):Pe()},0);Pe(),M.value=Math.sqrt(t.value)*Math.sqrt(l.value/60)*(1+ae.getCapsuleEffect("xp")/100)*Object.values(u).reduce((qe,Fe)=>qe+Math.log10(new d(Fe.value).toNumber()+1),1),M.value*=xt[ae.selectedGameMode.value].multiplier,setTimeout(()=>{for(let qe of f(ge.state).nodes)qe.state.velocity={x:Math.random()*450-225,y:Math.random()*-450}},N),A&&setTimeout(()=>{Ot.value=!0},A)}function ve(){let N=1+.1*t.value+.01*t.value*Math.min(t.value,40);N=Math.floor(N)+(Math.random()<N%1?1:0),N=Math.max(1,N-Number(ae.upgrades.enemyDecrease.amount.value));let A=Object.values(r.value);if(A.length<=0)return;let O=1;switch(ae.selectedGameMode.value){case"standard":O=1;break;case"boosted":O=1.5;break;case"hardcore":O=2;break}for(let q=0;q<N;q++){let z=18*(1+.05*(t.value*O)**O)*1.02**t.value*(Math.random()*.2+.9);z*=1-ae.getCapsuleEffect("health")/100,A[Math.floor(Math.random()*A.length)].enemies.push({angle:Math.random(),lifetime:0,speed:(Math.random()*.4+.8+.05*t.value*O)*(Math.random()<.5?1:-1),health:z,maxHealth:z,effects:{},loot:{energy:d.add(25,we.energy.amount.value).toNumber()}})}}function V(N){var z,ee,ne;let{x:A,y:O}=wn(N),q={};for(let[Pe,qe]of[[1,0],[-1,0],[0,1],[0,-1]]){let Fe=r.value[Re(A+Pe,O+qe)],et=null;if((Fe==null?void 0:Fe.building)&&(et=(ee=(z=ze[Fe.building.type]).influences)==null?void 0:ee.call(z,Fe.building,Fe)))for(let yt in et)q[yt]=((ne=q[yt])!=null?ne:1)*et[yt]}return q}function ke(){let N=Object.entries(r.value),A="";for(;N.length;){let O=Math.floor(Math.random()*N.length),q=N[O],{x:z,y:ee}=wn(q[0]),ne=[];if(r.value[Re(z+1,ee)]||ne.push(Re(z+1,ee)),r.value[Re(z-1,ee)]||ne.push(Re(z-1,ee)),r.value[Re(z,ee+1)]||ne.push(Re(z,ee+1)),r.value[Re(z,ee-1)]||ne.push(Re(z,ee-1)),ne.length){A=ne[Math.floor(Math.random()*ne.length)];break}else N.splice(O,1)}r.value[A]={enemies:[]}}Je.on("onLoad",()=>{S.value==lt.New?(rt(),K(3e3)):S.value==lt.Stopped&&Ce()}),Je.on("update",N=>{var A,O,q,z,ee,ne,Pe,qe,Fe,et,yt,jt,zt,_t;if(S.value==lt.Started){if(b.value<=0||C.value)return;N*=b.value,l.value+=N,F.value-=N,t.value>=1&&(n.value+=N/(15+Math.sqrt(t.value)),n.value>=1&&(n.value--,t.value++,ve(),(t.value+1)%2==0&&ke()));let he=!1,$e=!0;for(let le of Object.values(r.value))he||(he=le.enemies.length>0),$e&&($e=!le.building);if(he||(n.value=0,t.value++,ve(),(t.value+1)%2==0&&ke()),$e&&!B.value){for(let le of ae.selectedBuildings.value)if(ze[le].class=="damager"&&be(le)){$e=!1;break}$e&&(ae.objectives.value.stucked=(A=ae.objectives.value.stucked)!=null?A:0,B.value=!0,setTimeout(()=>{C.value=!1,Ce()},3e3))}Math.floor(o.energy.value)==727&&(ae.objectives.value.wysi=(O=ae.objectives.value.wysi)!=null?O:0);let tt=[];i.value=0;for(let le in r.value){let Le=r.value[le],{x:Me,y:ot}=wn(le);for(let X of Le.enemies){let ka=X.angle,nn=X.speed*.1*N;X.effects.stun&&(nn*=5e-4),X.effects.freeze&&(nn*=.5),X.effects.swamped&&(nn*=.5),X.effects.blaze&&(nn*=2),X.angle+=nn,X.lifetime+=Math.abs(nn),i.value+=X.lifetime,X.angle=(X.angle%1+1)%1;let[Dn,Pn]=[Math.min(ka,X.angle),Math.max(ka,X.angle)];if(X.health<=0){Le.enemies.splice(Le.enemies.indexOf(X),1);for(let[Ut,si]of Object.entries(X.loot))o[Ut].value=d.add(o[Ut].value,si).toNumber()}Dn<.25&&Pn>.75?r.value[Re(Me,ot+1)]&&Math.random()<.5&&(tt.push({enemy:X,from:Re(Me,ot),to:Re(Me,ot+1)}),X.angle=.5-X.angle,X.speed=-X.speed):Dn<.25&&Pn>.25?r.value[Re(Me+1,ot)]&&Math.random()<.5&&(tt.push({enemy:X,from:Re(Me,ot),to:Re(Me+1,ot)}),X.angle=1-X.angle,X.speed=-X.speed):Dn<.5&&Pn>.5?r.value[Re(Me,ot-1)]&&Math.random()<.5&&(tt.push({enemy:X,from:Re(Me,ot),to:Re(Me,ot-1)}),X.angle=.5-X.angle,X.speed=-X.speed):Dn<.75&&Pn>.75&&r.value[Re(Me-1,ot)]&&Math.random()<.5&&(tt.push({enemy:X,from:Re(Me,ot),to:Re(Me-1,ot)}),X.angle=1-X.angle,X.speed=-X.speed),X.angle=(X.angle%1+1)%1;for(let Ut in X.effects)X.effects[Ut]-=Math.abs(nn),X.effects[Ut]<=0&&delete X.effects[Ut];if(X[$])for(let Ut in X[$])X[$][Ut]-=N}Le.building&&((z=(q=ze[Le.building.type]).onUpdate)==null||z.call(q,Le.building,Le,N,V(le)))}if(i.value/=Object.values(r.value).length*10*d.div(we.stress.amount.value,100).add(1).toNumber(),i.value>1){let le=1;switch(ae.selectedGameMode.value){case"standard":le=1;break;case"boosted":le=2;break;case"hardcore":le=10;break}a.value-=2**i.value*N*le}i.value>=2&&(ae.objectives.value.anxiety=(ee=ae.objectives.value.anxiety)!=null?ee:0),a.value<=0&&Ce();for(let le of tt){let Le=r.value[le.from],Me=r.value[le.to];Le.enemies.splice(Le.enemies.indexOf(le.enemy),1),Me.enemies.push(le.enemy),Le.building&&((Pe=(ne=ze[Le.building.type]).onEnemyExit)==null||Pe.call(ne,Le.building,Le,le.enemy,V(le.from))),Me.building&&((Fe=(qe=ze[Me.building.type]).onEnemyEnter)==null||Fe.call(qe,Me.building,Me,le.enemy,V(le.to)))}if(Q.value)if(be(Q.value)){if(((et=ge.selectedNode.value)==null?void 0:et.type)=="loop"){let le=ge.selectedNode.value.state.target;if(le.building)f(ge.state).selectedNode=null;else{le.building={type:Q.value,upgrades:{},data:{},sellValue:{}};for(let[Me,ot]of Object.entries(ze[Q.value].baseCost)){let X=(ot-w(Q.value))*p(Q.value);o[Me].value-=X,le.building.sellValue[Me]=X*.75}let Le=(yt=Object.entries(r.value).find(Me=>Me[1]==le))==null?void 0:yt[0];if(Le)for(let Me of le.enemies)(zt=(jt=ze[Q.value]).onEnemyEnter)==null||zt.call(jt,le.building,le,Me,V(Le));c.value++,m.value[Q.value]=((_t=m.value[Q.value])!=null?_t:0)+1,Q.value=""}}}else Q.value=""}else if(S.value==lt.Stopped){for(let he in r.value)for(let $e of r.value[he].enemies)$e.angle+=.001*N;for(let he of f(ge.state).nodes){let $e=he.state;$e.velocity?(he.position.x+=$e.velocity.x*N,he.position.y+=$e.velocity.y*N,$e.velocity.y+=250*N):(he.position.x+=Math.random()*2-1,he.position.y+=Math.random()*2-1)}}});let Ke=0;const ge=Qa(()=>({startNodes:()=>[],state(){var A,O,q,z,ee,ne,Pe,qe,Fe,et,yt,jt,zt;let N=[];{let _t=[];for(let[he,$e]of Object.entries(r.value)){let{x:tt,y:le}=wn(he);for(let Le of $e.enemies)Le[de]||(Le[de]=Ke,Ke+=1),_t.push({...Le,position:{x:tt,y:le}});tt=tt*100,le=le*100,$e[de]||($e[de]=Ke,Ke+=2),N.push({id:(A=$e[de])!=null?A:0,position:{x:tt,y:le},type:"loop",state:{target:$e}}),$e.building&&N.push({id:((O=$e[de])!=null?O:0)+1,position:{x:tt,y:le},type:"building",state:{target:$e.building}})}if(_e.quality>=1)for(let he of _t){let{x:$e,y:tt}=he.position;N.push({id:(q=he[de])!=null?q:0,position:{x:($e+Math.sin(he.angle*2*Math.PI)*.5)*100,y:(tt+Math.cos(he.angle*2*Math.PI)*.5)*100},type:"enemy",state:{target:he}})}}if(S.value==lt.Stopped&&((z=f(ge.state))==null?void 0:z.nodes.length)>0){let _t=(ee=f(ge.state))==null?void 0:ee.nodes;for(let he in N)N[he].position.x=(Pe=(ne=_t[he])==null?void 0:ne.position.x)!=null?Pe:N[he].position.x,N[he].position.y=(Fe=(qe=_t[he])==null?void 0:qe.position.y)!=null?Fe:N[he].position.y,N[he].state=(yt=(et=_t[he])==null?void 0:et.state)!=null?yt:N[he].state}return{nodes:N,selectedNode:(zt=(jt=f(ge.state))==null?void 0:jt.selectedNode)!=null?zt:null,selectedAction:null}},links(){let N=[];if(_e.quality<2)return N;for(let[A,O]of Object.entries(r.value))for(let q of O.enemies)if(q[$])for(let z in q[$]){let ee=ge.nodes.value.find(Pe=>Pe.id==+z),ne=ge.nodes.value.find(Pe=>Pe.id==q[de]);ee&&ne&&N.push({startNode:ee,endNode:ne,stroke:"white",strokeWidth:2}),q[$][z]<=0&&delete q[$][z]}return N},classes:{"game-board":!0},types:Fu})),tn=oa(()=>({width:500,height:31,direction:H.Right,progress:D(()=>n.value),display:fe(()=>s("span",{class:"bar-label"},[h("Cycle "),ce(t.value)])),fillStyle:{backgroundColor:"#50637c"},baseStyle:{backgroundColor:"#0000001f"},borderStyle:{border:"none",borderTop:"2px solid var(--outline)",borderRadius:"0 0 0 4px"}})),Nt=oa(()=>({width:249,height:31,direction:H.Right,progress:D(()=>i.value),display:fe(()=>s("span",{class:"bar-label left"},[h("Stress: "),ce(i.value*100),h("%")])),fillStyle:{backgroundColor:"#ff5c5a"},baseStyle:{backgroundColor:"#0000001f"},borderStyle:{border:"none",borderTop:"2px solid var(--outline)",borderRadius:"0 0 0 4px"}})),He=oa(()=>({width:249,height:31,direction:H.Left,progress:D(()=>a.value/100),display:fe(()=>s("span",{class:"bar-label right"},[h("HP: "),ce(a.value),h("%")])),fillStyle:{backgroundColor:"#ff5c5a"},baseStyle:{backgroundColor:"#0000001f"},borderStyle:{border:"none",borderTop:"2px solid var(--outline)",borderLeft:"2px solid var(--outline)",borderRadius:"0 0 4px 0"}}));let st=0,bt=L(!1),kt=L(""),y=L(H.Default),j=L({});function P(N,A,O=H.Default){kt.value=N,bt.value=!0,y.value=O,setTimeout(()=>{var qe;let q=(qe=document.querySelector(".game-tooltip"))==null?void 0:qe.getBoundingClientRect(),z=A.getBoundingClientRect();if(!q)return;(q.right+q.left)/2,(q.bottom+q.top)/2;let ee={x:(z.right+z.left)/2,y:(z.bottom+z.top)/2},ne=Fe=>Math.min(Math.max(Fe,8),window.innerHeight-q.height-8),Pe=Fe=>Math.min(Math.max(Fe,8),window.innerWidth-q.width-8);O==H.Left?j.value={right:window.innerWidth-(z.left-12)+"px",top:ne(ee.y-q.height/2)+"px"}:O==H.Right?j.value={left:z.right+12+"px",top:ne(ee.y-q.height/2)+"px"}:O==H.Up?j.value={left:Pe(ee.x-q.width/2)+"px",bottom:window.innerHeight-(z.top-12)+"px"}:O==H.Down&&(j.value={left:Pe(ee.x-q.width/2)+"px",top:z.bottom+12+"px"})},0)}function U(){bt.value=!1}let Q=L("");function be(N){if(!ze[N])return!1;let A=p(N),O=w(N);for(let[q,z]of Object.entries(ze[N].baseCost))if(o[q].value<(z-O)*A)return!1;return!0}function Ye(N,A){var O,q;if(ze[N.type].upgrades[A].max!==void 0&&N.upgrades[A]>=((O=ze[N.type].upgrades[A].max)!=null?O:0)-1)return!1;for(let[z,ee]of Object.entries(ze[N.type].upgrades[A].cost((q=N.upgrades[A])!=null?q:0)))if(o[z].value<ee)return!1;return!0}function dt(N,A){var O,q,z;if(Ye(N,A)){for(let[ee,ne]of Object.entries(ze[N.type].upgrades[A].cost((O=N.upgrades[A])!=null?O:0)))o[ee].value-=ne,N.sellValue[ee]=((q=N.sellValue[ee])!=null?q:0)+ne*.5;N.upgrades[A]=((z=N.upgrades[A])!=null?z:0)+1}}function Te(N){var A;if(N.building&&N.building.type!="pins"&&F.value<=0){for(let[O,q]of Object.entries(N.building.sellValue))o[O].value+=q,u[O].value=d.sub(u[O].value,q).toNumber();c.value--,m.value[N.building.type]=((A=m.value[N.building.type])!=null?A:0)-1,delete N.building,F.value=d.mul(ae.upgrades.sellCooldown.amount.value,-5).add(60).toNumber()}}function gt(N,A,O){st=setTimeout(()=>{let q=p(O),z=w(O);P(s(G,null,[s("h3",null,[A.name])," ",s("h5",{style:"display: inline-block; margin: 0"},[s("i",null,[h("- "),A.class.toUpperCase()])]),s("br",null,null),s("i",null,[A.description]),s("hr",null,null),s("h5",null,[h("BUILDING COST:")]),s("div",{class:"stat-entries"},[Object.entries(A.baseCost).map(([ee,ne])=>s("div",{class:{red:o[ee].value<ne*q}},[s("div",{class:"name"},[o[ee].displayName]),s("div",{class:"value"},[ce((ne-z)*q)])]))]),s("hr",null,null),s("h5",null,[h("STARTING SPECS:")]),s("div",{class:"stat-entries"},[Object.entries(A.upgrades).map(([ee,ne])=>{var Pe,qe;return s("div",null,[s("div",{class:"name"},[ne.name]),s("div",{class:"value"},[We(ne.effect(0),(Pe=ne.precision)!=null?Pe:0)+((qe=ne.unit)!=null?qe:"")])])})])]),N.target,H.Left)},500)}function $n(N,A,O){clearTimeout(st),U()}function En(N,A,O){clearTimeout(st),U(),be(O)&&(Q.value=Q.value==O?"":O)}const Ot=L(!1);return{name:e,color:"#afcfef",intro:K,outtro:oe,cycle:t,cycleProgress:n,cycleBar:tn,health:a,healthBar:He,gameState:S,gameSpeed:b,sellCooldown:F,upgrades:we,loops:r,buildingFactor:c,buildingFactors:m,resources:o,resourcesTotal:u,lifetime:l,board:ge,startGame:rt,endGame:Ce,display:fe(()=>s(G,null,[Mt(ge),s("div",{class:{"game-top":!0,hidden:S.value!=lt.Started||I.value||t.value<=0}},[s("div",{style:"display: flex; height: 31px"},[s("span",{class:"bar-label"},[ce(o.energy.value),h(" energy")]),d.gt(u.info.value,0)?s("span",{class:"bar-label"},[ce(o.info.value),h(" info")]):""]),Mt(tn),s("div",{style:"display: flex"},[Mt(Nt),Mt(He)])]),s("div",{class:{"game-bottom":!0,hidden:S.value!=lt.Started||I.value}},[(()=>{var A;let N=(A=ge.selectedNode.value)==null?void 0:A.state;return s(G,null,[N?s("div",{style:"display: flex; height: 31px"},[N.target.building?s("div",{class:"building-upgrades",style:{"--layer-color":ze[N.target.building.type].color}},[Object.entries(ze[N.target.building.type].upgrades).map(([O,q])=>{var ee,ne,Pe,qe,Fe,et,yt,jt,zt,_t,he;let z=(ne=(ee=N==null?void 0:N.target.building)==null?void 0:ee.upgrades[O])!=null?ne:0;return ze[(qe=(Pe=N==null?void 0:N.target.building)==null?void 0:Pe.type)!=null?qe:""].upgrades[O].max!==void 0&&z>=((yt=ze[(et=(Fe=N==null?void 0:N.target.building)==null?void 0:Fe.type)!=null?et:""].upgrades[O].max)!=null?yt:0)-1,s("button",{class:{feature:!0,can:Ye(N==null?void 0:N.target.building,O)},onClick:()=>dt(N==null?void 0:N.target.building,O)},[h("Level "),ce(z+1)+(q.max?" / "+ce(q.max):""),s("br",null,null),s("h3",null,[q.name]),s("hr",null,null),h("\u2191 "),We(q.effect(z+1),(jt=q.precision)!=null?jt:0)+((zt=q.unit)!=null?zt:""),h(" \u2191"),s("br",null,null),We(q.effect(z),(_t=q.precision)!=null?_t:0)+((he=q.unit)!=null?he:""),s("br",null,null),s("hr",null,null),Object.entries(q.cost(z)).map(([$e,tt])=>ce(tt)+" "+o[$e].displayName).join(", ")])}),N.target.building.type=="pins"?"":s("button",{class:{feature:!0,can:F.value<=0},style:"width: 100px; flex-basis: 100px",onClick:()=>Te(N==null?void 0:N.target)},[F.value<=0?s(G,null,[h("Sell for"),s("hr",null,null),Object.entries(N.target.building.sellValue).map(([O,q])=>ce(q)+" "+o[O].displayName).join(", ")]):s(G,null,[h("Sell cooldown"),s("hr",null,null),Yt(F.value)])])]):s("span",{class:"bar-label"},[h("Select a building to build \u2192")])]):d.gt(u.info.value,0)?s("div",{style:"display: flex; height: 31px"},[s("div",{class:"building-upgrades",style:"--layer-color: #afcfef"},[Object.values(we).map(Mt)])]):"",s("div",{style:"display: flex; height: 31px"},[s("span",null,[N?N.target.building?ze[N.target.building.type].name:s("i",null,[h("No building")]):Q.value?"\u25B2 Select a loop to build \u25B2":"\u25B2 Select a loop from above \u25B2"])])])})()]),s("div",{class:{"game-left":!0,hidden:S.value!=lt.Started||I.value||t.value<=0}},[s("div",{class:"action-list"},[s("button",{class:"action",onClick:()=>C.value=!0},[s("div",{class:"background"},[s("div",{class:"icon"},[h("\u2630")])])]),ae.selectedGameMode.value=="hardcore"?"":s(G,null,[d.gte(ae.upgrades.speedManip.amount.value,1)?s(G,null,[s("button",{class:"action speed",onClick:()=>b.value=1e-6},[s("div",{class:"background"},[s("div",{class:"icon"},[h("\u23F8\uFE0F")])])]),s("button",{class:"action speed",onClick:()=>b.value=1},[s("div",{class:"background"},[s("div",{class:"icon"},[h("\u25B6")])])])]):"",[...Array(d.sub(ae.upgrades.speedManip.amount.value,1).max(0).toNumber()).keys()].map(N=>s("button",{class:"action speed",onClick:()=>b.value=N+2},[s("div",{class:"background"},[s("div",{class:"icon"},[N+2,h("x")])])]))])])]),s("div",{class:{"game-right":!0,hidden:S.value!=lt.Started||I.value}},[s("div",{class:"building-list"},[ae.selectedBuildings.value.map(N=>{let A=ze[N];return s("button",{class:Object.fromEntries([[A.class,!0],["selected",Q.value==N],["disabled",!be(N)]]),onMouseenter:O=>gt(O,A,N),onMouseleave:O=>$n(),onClick:O=>En(O,A,N)},[s("div",{class:"background",style:{background:A.color}},[s("div",{class:"icon"},[A.icon])])])})])]),s("div",{class:{"game-tooltip":!0,hidden:!bt.value,left:y.value==H.Left,right:y.value==H.Right,top:y.value==H.Up,bottom:y.value==H.Down},style:j.value},[kt.value]),s(Dt,{modelValue:C.value},{header:()=>s(G,null,[s("h1",{class:"result-title"},[h("PAUSED")]),s("h2",{style:"font-style: italic;"},[h("- Operations halted. -")])]),body:()=>s("div",{style:"text-align: center"},[s("div",{class:"result-entry"},[s("div",{class:"name"},[h("Cycles reached")]),s("h1",{class:"value"},[ce(t.value)])]),s("div",{class:"result-entry"},[s("div",{class:"name"},[h("Relative lifetime")]),s("div",{class:"value"},[Yt(l.value)])]),s("div",{style:"width: 75%; margin-top: 10px;"},[s("div",{class:"name"},[h("Total resources gained:")]),s("div",{class:"stat-entries"},[Object.entries(u).filter(([N,A])=>d.gt(A.value,0)).map(([N,A])=>s("div",null,[s("div",{class:"name"},[o[N].displayName]),s("div",{class:"value"},[ce(A.value)])]))||"Nothing :("])])]),footer:()=>s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("button",{class:"feature can",onClick:()=>{Ce(1e3,0),setTimeout(()=>{oe()},1e3),setTimeout(()=>{r.value={}},2e3),setTimeout(()=>{ae.points.value=d.add(ae.points.value,M.value).toNumber(),Ot.value=!1,K(),rt()},2500),C.value=!1}},[h("Restart")]),s("button",{class:"feature can",onClick:()=>{Ce(1e3,0),setTimeout(()=>{oe()},1e3),setTimeout(()=>{ae.points.value=d.add(ae.points.value,M.value).toNumber(),S.value=lt.Idle,Ot.value=!1,Z.tabs=["main"],ae.intro(2e3)},2500),C.value=!1}},[h("Forfeit and Return to Hub")]),s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{C.value=!1}},[h("Continue")])])}),s(Dt,{modelValue:Ot.value},{header:()=>s(G,null,[s("h1",{class:"result-title"},[h("GAME OVER")]),s("h2",{style:"font-style: italic;"},[h("- "),B.value?"You managed to softlock yourself...":"The cycle has been broken.",h(" -")])]),body:()=>s("div",{style:"text-align: center"},[s("div",{class:"result-entry"},[s("div",{class:"name"},[h("Cycles reached")]),s("h1",{class:"value"},[ce(t.value)])]),s("div",{class:"result-entry"},[s("div",{class:"name"},[h("Relative lifetime")]),s("div",{class:"value"},[Yt(l.value)])]),s("div",{style:"width: 75%; margin-top: 10px;"},[s("div",{class:"name"},[h("Total resources gained:")]),s("div",{class:"stat-entries"},[Object.entries(u).filter(([N,A])=>d.gt(A.value,0)).map(([N,A])=>s("div",null,[s("div",{class:"name"},[o[N].displayName]),s("div",{class:"value"},[ce(A.value)])]))||"Nothing :("])]),s("div",{style:"width: 75%; margin-top: 10px;"},[s("div",{class:"name"},[h("Hub rewards:")]),s("div",{class:"stat-entries"},[s("div",null,[s("div",{class:"name"},[h("XP")]),s("div",{class:"value"},[ce(M.value)])])])])]),footer:()=>s("div",{style:"display: flex; text-align: center; --layer-color: #dadafa"},[s("button",{class:"feature can",onClick:()=>{setTimeout(()=>{ae.points.value=d.add(ae.points.value,M.value).toNumber(),K(),rt()},1e3),Ot.value=!1}},[h("Replay")]),s("button",{class:"feature can",onClick:N=>{try{navigator.share({title:"Delooped",text:"I reached Cycle "+ce(t.value)+" on Delooped!",url:"https://ducdat0507.itch.io/delooped"})}catch(A){A instanceof TypeError&&(navigator.clipboard.writeText("I reached Cycle "+ce(t.value)+` on Delooped!
https://ducdat0507.itch.io/delooped`),clearTimeout(st),N.target.innerText="Copied to clipboard",st=setTimeout(()=>N.target.innerText="Share",2e3))}}},[h("Share")]),s("div",{style:"flex-grow: 1"},null),s("button",{class:"feature can",onClick:()=>{setTimeout(()=>{ae.points.value=d.add(ae.points.value,M.value).toNumber(),S.value=lt.Idle,Z.tabs=["main"],ae.intro(2e3)},1e3),Ot.value=!1}},[h("Return to Hub")])])})])),minimizable:!1,classes:{game:!0}}});re({__name:"Collapsible",props:{collapsed:{},display:{type:[String,Object,Function]},content:{type:[String,Object,Function]}},setup(e){const t=e,n=Un(Tt(t,"display")),a=Un(Tt(t,"content"));return(i,r)=>(k(),ie(Zr,{class:"collapsible-container"},{default:J(()=>[v("button",{onClick:r[0]||(r[0]=l=>i.collapsed.value=!i.collapsed.value),class:"feature collapsible-toggle"},[(k(),ie(Xe(f(n))))]),i.collapsed.value?W("",!0):(k(),ie(Xe(f(a)),{key:0}))]),_:1}))}});const Ou=["x1","y1","x2","y2"],qu=re({__name:"Link",props:{link:{},startNode:{},endNode:{},boundingRect:{}},setup(e){const n=Ge(e),a=D(()=>{const r=n.startNode.value.rect,l=n.boundingRect.value,o=l?{x:r.x+r.width/2-l.x,y:r.y+r.height/2-l.y}:{x:0,y:0};return n.link.value.offsetStart&&(o.x+=n.link.value.offsetStart.x,o.y+=n.link.value.offsetStart.y),o}),i=D(()=>{const r=n.endNode.value.rect,l=n.boundingRect.value,o=l?{x:r.x+r.width/2-l.x,y:r.y+r.height/2-l.y}:{x:0,y:0};return n.link.value.offsetEnd&&(o.x+=n.link.value.offsetEnd.x,o.y+=n.link.value.offsetEnd.y),o});return(r,l)=>(k(),T("line",Vt({"stroke-width":"15px",stroke:"white"},r.link,{x1:a.value.x,y1:a.value.y,x2:i.value.x,y2:i.value.y}),null,16,Ou))}});const Bu=re({__name:"Links",props:{links:{}},setup(e){var u;const n=Tt(e,"links"),a=L(null),i=Rn(ba,L({})),r=Rn(ya,L(void 0)),l=L((u=a.value)==null?void 0:u.getBoundingClientRect());Ct(r,()=>{var c;return l.value=(c=a.value)==null?void 0:c.getBoundingClientRect()}),Yn(()=>{var c;return l.value=(c=a.value)==null?void 0:c.getBoundingClientRect()});const o=D(()=>{var m,p;const c=i.value;return(p=(m=n.value)==null?void 0:m.filter(w=>{var S,b;return((S=c[w.startNode.id])==null?void 0:S.rect)&&((b=c[w.startNode.id])==null?void 0:b.rect)}))!=null?p:[]});return(c,m)=>(k(),T(G,null,[o.value?(k(),T("svg",fi(Vt({key:0},c.$attrs)),[(k(!0),T(G,null,Ft(o.value,(p,w)=>(k(),ie(qu,{key:w,link:p,boundingRect:l.value,startNode:f(i)[p.startNode.id],endNode:f(i)[p.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):W("",!0),v("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}});var Vu=Se(Bu,[["__scopeId","data-v-063f6d6b"]]);re({props:{nodes:{type:Y(Array),required:!0},leftSideNodes:Y(Array),rightSideNodes:Y(Array),branches:Y(Array)},components:{Links:Vu},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:a}=Ge(e),i=Et();Zt(()=>{const o=Qe(t);i.value=De(fe(()=>s(G,null,[o.map(u=>s("span",{class:"row tree-row",style:"margin: 50px auto;"},[u.map(Bn)]))])))});const r=Et();Zt(()=>{const o=Qe(n);r.value=o?De(fe(()=>s("span",{class:"left-side-nodes small"},[o.map(Bn)]))):""});const l=Et();return Zt(()=>{const o=Qe(a);l.value=o?De(fe(()=>s("span",{class:"side-nodes small"},[o.map(Bn)]))):""}),{unref:f,nodesComp:i,leftNodesComp:r,rightNodesComp:l}}});re({props:{display:Y(Object,String,Function),visibility:{type:Y(Number,Boolean),required:!0},style:Y(String,Object,Array),classes:Y(Object),onClick:Function,onHold:Function,color:Y(String),glowColor:Y(String),canClick:{type:Y(Boolean),required:!0},mark:Y(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ea,Node:ta},setup(e){const{onClick:t,onHold:n,display:a}=Ge(e),i=yn(a),{start:r,stop:l}=Ga(t,n);return{start:r,stop:l,comp:i,unref:f,Visibility:vt,isCoercableComponent:bn,isVisible:Qt,isHidden:Qn}}});function Lu(e,t){if(t>e.length)throw new Error("n cannot be greater than the number of unique elements in the array.");const n=e.slice();for(let a=n.length-1;a>0;a--){const i=Math.floor(Math.random()*(a+1));[n[a],n[i]]=[n[i],n[a]]}return n.slice(0,t)}const Ru={name:"Beamer",icon:"\u{1F4A0}",color:"#afcfef",class:"damager",description:"Beams one random enemy on the loop it's on once every a certain amount of time.",baseCost:{energy:100},upgrades:{damage:{name:"Damage",effect:e=>10+2*e,cost:e=>({energy:50*1.2**e}),unit:"/hit"},interval:{name:"Interval",max:15,effect:e=>2*.9**e,cost:e=>({energy:50*1.3**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l;if(t.enemies.length){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.prg>=1){let o=1;ae.buildingUpgrades.beamer.double.bought.value==!0&&(o+=1),Lu(t.enemies,Math.min(t.enemies.length,o)).forEach(c=>{var m,p,w;Ze(c,this.upgrades.damage.effect((m=e.upgrades.damage)!=null?m:0)*((p=a.damage)!=null?p:1)),c[$]||(c[$]={}),c[$][(w=t[de])!=null?w:0]=0}),e.data.prg--}}else e.data.prg=0}},ju={name:"Splatter",icon:"\u{1F539}",color:"#afcfef",class:"damager",description:"Splats one random enemy on the loop it's on at a very fast speed.",baseCost:{energy:150},upgrades:{damage:{name:"Damage",effect:e=>2+1*e,cost:e=>({energy:50*1.3**e}),unit:"/hit"},interval:{name:"Interval",max:5,effect:e=>.5*.8**e,cost:e=>({energy:100*2**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c;if(t.enemies.length){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.prg>=1){let m=t.enemies[Math.floor(Math.random()*t.enemies.length)];Ze(m,this.upgrades.damage.effect((o=e.upgrades.damage)!=null?o:0)*((u=a.damage)!=null?u:1)),m[$]||(m[$]={}),m[$][(c=t[de])!=null?c:0]=0,e.data.prg--}}else e.data.prg=0}},zu={name:"Blaster",icon:"\u{1F537}",color:"#afcfef",class:"damager",description:"Blasts one random enemy on the loop it's on once every a certain amount of time. Takes a while to charge but its damage is scaled to the time since the last blast.",baseCost:{energy:200},upgrades:{damage:{name:"Base Damage",effect:e=>20+4*e,cost:e=>({energy:100*1.2**e}),unit:"/hit"},damage2:{name:"Time Factor",effect:e=>1+e,cost:e=>({energy:200*1.5**e}),unit:"x"},interval:{name:"Interval",max:10,effect:e=>5*.9**e,cost:e=>({energy:100*1.3**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c,m,p;if(t.enemies.length){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.time=((o=e.data.time)!=null?o:0)+n,e.data.prg>=1){let w=t.enemies[Math.floor(Math.random()*t.enemies.length)],S=this.upgrades.damage.effect((u=e.upgrades.damage)!=null?u:0)+Math.log(e.data.time+1)*this.upgrades.damage2.effect((c=e.upgrades.damage2)!=null?c:0);Ze(w,S*((m=a.damage)!=null?m:1)),w[$]||(w[$]={}),w[$][(p=t[de])!=null?p:0]=0,e.data.prg--,e.data.time=0}}else e.data.prg=0}},Uu={name:"Stunner",icon:"\u{1F4AB}",color:"#afcfef",class:"damager",description:"Shoots one random enemy on the loop it's on once every a certain amount of time. Have a chance to stun enemies.",baseCost:{energy:200},upgrades:{damage:{name:"Damage",effect:e=>20+4*e,cost:e=>({energy:100*1.2**e}),unit:"/hit"},interval:{name:"Interval",max:10,effect:e=>5*.9**e,cost:e=>({energy:100*1.3**e}),precision:2,unit:"s"},chance:{name:"Stun Chance",max:5,effect:e=>20+e,cost:e=>({energy:200*1.5**e}),unit:"%"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c,m,p;if(t.enemies.length){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.time=((o=e.data.time)!=null?o:0)+n,e.data.prg>=1){let w=t.enemies[Math.floor(Math.random()*t.enemies.length)],S=this.upgrades.damage.effect((u=e.upgrades.damage)!=null?u:0);Ze(w,S*((c=a.damage)!=null?c:1)),Math.random()<this.upgrades.chance.effect((m=e.upgrades.chance)!=null?m:0)/100&&(w.effects.stun=5e-4),w[$]||(w[$]={}),w[$][(p=t[de])!=null?p:0]=0,e.data.prg--,e.data.time=0}}else e.data.prg=0}},Gu={name:"Hourglass",icon:"\u23F3",color:"#afcfef",class:"damager",description:"A beamer whose damage is scaled based on time since it was placed. You can not upgrade the damage, only the interval.",baseCost:{energy:200},upgrades:{interval:{name:"Interval",max:15,effect:e=>2*.9**e,cost:e=>({energy:100*1.3**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c;if(t.enemies.length){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.time=((o=e.data.time)!=null?o:0)+n,e.data.prg>=1){let m=t.enemies[Math.floor(Math.random()*t.enemies.length)],p=10+2*Math.sqrt(e.data.time+1);Ze(m,p*((u=a.damage)!=null?u:1)),m[$]||(m[$]={}),m[$][(c=t[de])!=null?c:0]=0,e.data.prg--}}else e.data.prg=0}},Hu={name:"X-Ray",icon:"\u{1FA7B}",color:"#afcfef",class:"damager",description:"Deals continuous damage to an enemy on the loop it's on. Prioritizes enemies with the least amount of absolute health.",baseCost:{energy:200},upgrades:{damage:{name:"Damage",effect:e=>8+2*e,cost:e=>({energy:150*1.2**e}),unit:"/s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l;if(t.enemies.length){let o=this.upgrades.damage.effect((i=e.upgrades.damage)!=null?i:0)*((r=a.damage)!=null?r:1),u=t.enemies[0];for(let c=1;c<t.enemies.length;c++)t.enemies[c].health<u.health&&(u=t.enemies[c]);Ze(u,o*n),u[$]||(u[$]={}),u[$][(l=t[de])!=null?l:0]=0}}},Wu={name:"Plasma",icon:"\u26AA",color:"#efbfbf",class:"damager",description:"Deal damage per second to all enemies on the loop it's on.",baseCost:{energy:300},upgrades:{damage:{name:"Damage",effect:e=>8+2*e,cost:e=>({energy:200*1.2**e}),unit:"/s"}},onUpdate(e,t,n,a){var r,l,o;let i=this.upgrades.damage.effect((r=e.upgrades.damage)!=null?r:0)*((l=a.damage)!=null?l:1);for(let u of t.enemies)Ze(u,i*n),u[$]||(u[$]={}),u[$][(o=t[de])!=null?o:0]=0}},Zu={name:"Bomber",icon:"\u{1F4A3}",color:"#efbfbf",class:"damager",description:"Deal damage to all enemies on the loop it's on every once in a while.",baseCost:{energy:400},upgrades:{damage:{name:"Damage",effect:e=>18+3*e,cost:e=>({energy:200*1.2**e}),unit:"/hit"},interval:{name:"Interval",max:15,effect:e=>2.5*.9**e,cost:e=>({energy:300*1.3**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c;if(t.enemies.length){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.prg>=1){let m=this.upgrades.damage.effect((o=e.upgrades.damage)!=null?o:0)*((u=a.damage)!=null?u:1);for(let p of t.enemies)Ze(p,m),p[$]||(p[$]={}),p[$][(c=t[de])!=null?c:0]=0;e.data.prg-=1}}else e.data.prg=0}},Yu={name:"Winder",icon:"\u{1F4A8}",color:"#efbfbf",class:"damager",description:"Deal damage to all enemies on the loop it's on every 3 seconds. This building charges 5% faster for every enemy that's on the loop it's on.",baseCost:{energy:250},upgrades:{damage:{name:"Damage",effect:e=>10+2*e,cost:e=>({energy:200*1.2**e}),unit:"/hit"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u;if(t.enemies.length){let c=3*((i=a.speed)!=null?i:1);for(let m of t.enemies)m.speed>0&&(c/=1.05);if(e.data.prg=((r=e.data.prg)!=null?r:0)+n/c,e.data.prg>=1){let m=this.upgrades.damage.effect((l=e.upgrades.damage)!=null?l:0)*((o=a.damage)!=null?o:1);for(let p of t.enemies)Ze(p,m),p[$]||(p[$]={}),p[$][(u=t[de])!=null?u:0]=0;e.data.prg-=1}}else e.data.prg=0}},Xu={name:"Anti-winder",icon:"\u{1F343}",color:"#efbfbf",class:"damager",description:"Deal damage to all enemies on the loop it's on every 2 seconds. This building charges 10% slower for every enemy that's on the loop it's on, and charging progress is halved every time an enemy enters it.",baseCost:{energy:200},upgrades:{damage:{name:"Damage",effect:e=>10+2*e,cost:e=>({energy:200*1.2**e}),unit:"/hit"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u;if(t.enemies.length){let c=3*((i=a.speed)!=null?i:1);for(let m of t.enemies)m.speed>0&&(c*=1.1);if(e.data.prg=((r=e.data.prg)!=null?r:0)+n/c,e.data.prg>=1){let m=this.upgrades.damage.effect((l=e.upgrades.damage)!=null?l:0)*((o=a.damage)!=null?o:1);for(let p of t.enemies)Ze(p,m),p[$]||(p[$]={}),p[$][(u=t[de])!=null?u:0]=0;e.data.prg-=1}}else e.data.prg=0},onEnemyEnter(e,t,n,a){var i;e.data.prg=((i=e.data.prg)!=null?i:0)/2}},Ju={name:"Winder L",icon:"\u21BB",color:"#efbfbf",class:"damager",description:"Deal damage to all enemies on the loop it's on every 3 seconds. This building charges 10% faster for every enemy that travels clockwise.",baseCost:{energy:200},upgrades:{damage:{name:"Damage",effect:e=>10+2*e,cost:e=>({energy:200*1.2**e}),unit:"/hit"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u;if(t.enemies.length){let c=3*((i=a.speed)!=null?i:1);for(let m of t.enemies)m.speed>0&&(c/=1.1);if(e.data.prg=((r=e.data.prg)!=null?r:0)+n/c,e.data.prg>=1){let m=this.upgrades.damage.effect((l=e.upgrades.damage)!=null?l:0)*((o=a.damage)!=null?o:1);for(let p of t.enemies)Ze(p,m),p[$]||(p[$]={}),p[$][(u=t[de])!=null?u:0]=0;e.data.prg-=1}}else e.data.prg=0}},Ku={name:"Winder R",icon:"\u21BA",color:"#efbfbf",class:"damager",description:"Deal damage to all enemies on the loop it's on every 3 seconds. This building charges 10% faster for every enemy that travels anti-clockwise.",baseCost:{energy:200},upgrades:{damage:{name:"Damage",effect:e=>10+2*e,cost:e=>({energy:200*1.2**e}),unit:"/hit"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u;if(t.enemies.length){let c=3*((i=a.speed)!=null?i:1);for(let m of t.enemies)m.speed<0&&(c/=1.1);if(e.data.prg=((r=e.data.prg)!=null?r:0)+n/c,e.data.prg>=1){let m=this.upgrades.damage.effect((l=e.upgrades.damage)!=null?l:0)*((o=a.damage)!=null?o:1);for(let p of t.enemies)Ze(p,m),p[$]||(p[$]={}),p[$][(u=t[de])!=null?u:0]=0;e.data.prg-=1}}else e.data.prg=0}},Qu={name:"Swamp",icon:"\u3030\uFE0F",color:"#efbfbf",class:"damager",description:"Deal damage per second, and slows down all enemies on the loop it's on.",baseCost:{energy:300},upgrades:{damage:{name:"Damage",effect:e=>6+2*e,cost:e=>({energy:200*1.2**e}),unit:"/s"}},onUpdate(e,t,n,a){var r,l,o;let i=this.upgrades.damage.effect((r=e.upgrades.damage)!=null?r:0)*((l=a.damage)!=null?l:1);for(let u of t.enemies)Ze(u,i*n),u.effects.swamped=1e-4,u[$]||(u[$]={}),u[$][(o=t[de])!=null?o:0]=0}},ec={name:"Thunder",icon:"\u{1F329}\uFE0F",color:"#efefaf",class:"damager",description:"Deals huge damage to enemies at a very fast speed, but requires an amount of Energy equal to its damage. Attacks of this building also make enemies lose all their Energy drop.",baseCost:{energy:500},upgrades:{damage:{name:"Damage",effect:e=>20+4*e,cost:e=>({energy:250*1.3**e}),unit:"/hit"},interval:{name:"Interval",max:5,effect:e=>.5*.8**e,cost:e=>({energy:400*2**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var r,l,o,u,c,m;let i=this.upgrades.damage.effect((r=e.upgrades.damage)!=null?r:0)*((l=a.damage)!=null?l:1);if(t.enemies.length&&pt.resources.energy.value>=i){if(e.data.prg=((o=e.data.prg)!=null?o:0)+n/this.upgrades.interval.effect((u=e.upgrades.interval)!=null?u:0)*((c=a.speed)!=null?c:1),e.data.prg>=1){let p=t.enemies[Math.floor(Math.random()*t.enemies.length)];Ze(p,i),p[$]||(p[$]={}),p[$][(m=t[de])!=null?m:0]=0,e.data.prg--,pt.resources.energy.value-=i,p.loot.energy=0}}else e.data.prg=0}},tc={name:"Pins",icon:"\u{1F4CD}",color:"#afafaf",class:"damager",description:"Deals a flat 20 damage to an enemy when one enters the loop it's on. Only has 20 uses before it vanishes. This building is not sellable and will not reverse its cost scaling when vanished.",baseCost:{energy:75},upgrades:{},progress:e=>{var t;return 1-((t=e.data.uses)!=null?t:0)/20},onEnemyEnter(e,t,n,a){var i,r,l;Ze(n,20*((i=a.damage)!=null?i:1)),e.data.uses=((r=e.data.uses)!=null?r:0)+1,e.data.uses>=20&&delete t.building,n[$]||(n[$]={}),n[$][(l=t[de])!=null?l:0]=0}},nc={name:"When You See It",icon:"\u{1F448}",color:"#afafef",class:"damager",description:"Deal 727 damage to ALL enemies on the board, but only when your Energy hits exactly 727. Removes itself on the board when triggered or 72.7 seconds after it is placed and will not reverse its cost scaling when it does so. Is not affected by enemy effects and influencers.",baseCost:{energy:727},upgrades:{},progress:e=>{var t;return 1-((t=e.data.time)!=null?t:0)/72.7},onUpdate(e,t,n,a){var i;if(e.data.time=((i=e.data.time)!=null?i:0)+n,Math.floor(pt.resources.energy.value)==727){for(let r of Object.values(pt.loops.value))for(let l of r.enemies)l.health-=727;delete t.building}e.data.time>=72.7&&delete t.building}},ac={name:"The Snail\u2122",icon:"\u{1F40C}",color:"#efafef",class:"damager",description:"Deal damage to ALL enemies on the board, every 60 seconds. This building's interval can't be upgraded nor be affected by influencers.",baseCost:{energy:600},upgrades:{damage:{name:"Damage",effect:e=>16+4*e,cost:e=>({energy:300*2**e}),unit:"/hit"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var r,l,o;let i=this.upgrades.damage.effect((r=e.upgrades.damage)!=null?r:0)*((l=a.damage)!=null?l:1);if(e.data.prg=((o=e.data.prg)!=null?o:0)+n/60,e.data.prg>=1){for(let u of Object.values(pt.loops.value))for(let c of u.enemies)Ze(c,i);e.data.prg--}}},ic={name:"The Turtle\u2122",icon:"\u{1F422}",color:"#efafef",class:"damager",description:"Deal huge damage to an enemy after a long amount of time. Only charges when there are 5 or more enemies on the loop it's on.",baseCost:{energy:400},upgrades:{damage:{name:"Damage",effect:e=>200+50*e,cost:e=>({energy:300*2**e}),unit:"/hit"},interval:{name:"Interval",max:15,effect:e=>10*.9**e,cost:e=>({energy:200*1.3**e}),precision:2,unit:"s"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c;if(t.enemies.length>=5){if(e.data.prg=((i=e.data.prg)!=null?i:0)+n/this.upgrades.interval.effect((r=e.upgrades.interval)!=null?r:0)*((l=a.speed)!=null?l:1),e.data.prg>=1){let m=t.enemies[Math.floor(Math.random()*t.enemies.length)];Ze(m,this.upgrades.damage.effect((o=e.upgrades.damage)!=null?o:0)*((u=a.damage)!=null?u:1)),m[$]||(m[$]={}),m[$][(c=t[de])!=null?c:0]=0,e.data.prg--}}else e.data.prg=0}},rc={name:"The Fox\u2122",icon:"\u{1F98A}",color:"#efafef",class:"damager",description:"Deal damage to one enemy on the loop it's on after 3 seconds. Every shoot makes this building charge 10% faster (additively), and is reset when there are no more enemies to shoot at.",baseCost:{energy:400},upgrades:{damage:{name:"Damage",effect:e=>10+2*e,cost:e=>({energy:200*2**e}),unit:"/hit"}},progress:e=>e.data.prg,onUpdate(e,t,n,a){var i,r,l,o,u,c,m;if(t.enemies.length){let p=3/(1+.1*((i=e.data.count)!=null?i:0));if(e.data.prg=((r=e.data.prg)!=null?r:0)+n/p*((l=a.speed)!=null?l:1),e.data.prg>=1){let w=t.enemies[Math.floor(Math.random()*t.enemies.length)];Ze(w,this.upgrades.damage.effect((o=e.upgrades.damage)!=null?o:0)*((u=a.damage)!=null?u:1)),w[$]||(w[$]={}),w[$][(c=t[de])!=null?c:0]=0,e.data.prg--,e.data.count=((m=e.data.count)!=null?m:0)+1}}else e.data.prg=0,e.data.count=0}},sc={name:"Freezer",icon:"\u2744\uFE0F",color:"#afcfef",class:"effector",description:`Apply the "Freezing" effect to enemies when one moves out of the loop it's on. Freezed enemies' speed are halved. If the enemy has the "Blazing" effect, removes it.`,baseCost:{energy:500},upgrades:{duration:{name:"Duration",effect:e=>2+.4*e,cost:e=>({energy:300*1.4**e}),precision:1,unit:"rad"}},onEnemyExit(e,t,n,a){var i,r;n.effects.duality||delete n.effects.blaze,n.effects.freeze=this.upgrades.duration.effect((i=e.upgrades.duration)!=null?i:0)*a.duration,n[$]||(n[$]={}),n[$][(r=t[de])!=null?r:0]=0}},oc={name:"Igniter",icon:"\u{1F525}",color:"#efafaf",class:"effector",description:`Apply the "Blazing" effect to enemies when one moves in to the loop it's on. Blazed enemies move twice as fast but receive four times the damage. If the enemy has the "Freezing" effect, removes it.`,baseCost:{energy:600},upgrades:{duration:{name:"Duration",effect:e=>8+2*e,cost:e=>({energy:350*1.4**e}),unit:"rad"}},onEnemyEnter(e,t,n,a){var i,r;n.effects.duality||delete n.effects.freeze,n.effects.blaze=this.upgrades.duration.effect((i=e.upgrades.duration)!=null?i:0)*a.duration,n[$]||(n[$]={}),n[$][(r=t[de])!=null?r:0]=0}},lc={name:"Zen Pagoda",icon:"\u262F\uFE0F",color:"#efefef",class:"effector",description:`Apply the "Duality" effect to enemies when one moves in to the loop it's on. The "Duality" effect allows enemies to have the "Freezing" and "Blazing" effect at the same time.`,baseCost:{energy:500},upgrades:{duration:{name:"Duration",effect:e=>8+4*e,cost:e=>({energy:400*1.4**e}),unit:"rad"}},onEnemyEnter(e,t,n,a){var i,r;n.effects.duality=this.upgrades.duration.effect((i=e.upgrades.duration)!=null?i:0)*a.duration,n[$]||(n[$]={}),n[$][(r=t[de])!=null?r:0]=0}},uc={name:"Decayer",icon:"\u2620\uFE0F",color:"#cfafef",class:"effector",description:`Apply the "Decay" effect to enemies when one moves in to the loop it's on. Decaying enemies take twice as much damage.`,baseCost:{energy:600},upgrades:{duration:{name:"Duration",effect:e=>5+1*e,cost:e=>({energy:400*1.4**e}),unit:"rad"}},onEnemyEnter(e,t,n,a){var i,r;n.effects.decay=this.upgrades.duration.effect((i=e.upgrades.duration)!=null?i:0)*a.duration,n[$]||(n[$]={}),n[$][(r=t[de])!=null?r:0]=0}},cc={name:"Splitter",icon:"\u2194\uFE0F",color:"#efafef",class:"effector",description:"Enemies have a chance to split upon entering the loop the building is on.",baseCost:{energy:300},upgrades:{chance:{name:"Chance",max:10,effect:e=>25+5*e,cost:e=>({energy:200*1.6**e}),unit:"%"}},onEnemyEnter(e,t,n,a){var i,r;if(Math.random()<this.upgrades.chance.effect((i=e.upgrades.chance)!=null?i:0)/100){let l={angle:n.angle,speed:-n.speed,health:n.health/=2,maxHealth:n.maxHealth/=2,lifetime:0,effects:{...n.effects},loot:{}};for(let o in n.loot)l.loot[o]=n.loot[o]/=2;t.enemies.push(l),n[$]||(n[$]={}),n[$][(r=t[de])!=null?r:0]=0}}},dc={name:"Stablizer",icon:"\u{1F518}",color:"#afefaf",class:"effector",description:"Reduces the lifespan of an enemy when one moves to the loop it's on, down to an upgradable minimum, therefore reduces the stress load.",baseCost:{energy:500},upgrades:{amount:{name:"Amount",effect:e=>2+.5*e,cost:e=>({energy:200*1.4**e}),precision:1,unit:"rad"},min:{name:"Minimum",max:20,effect:e=>20-e,cost:e=>({energy:300*1.2**e}),unit:"rad"}},onEnemyEnter(e,t,n,a){var r,l,o;let i=this.upgrades.min.effect((r=e.upgrades.min)!=null?r:0);n.lifetime>i&&(n.lifetime=Math.max(i,n.lifetime-this.upgrades.amount.effect((l=e.upgrades.amount)!=null?l:0)),n[$]||(n[$]={}),n[$][(o=t[de])!=null?o:0]=0)}},gc={name:"Tachyon",icon:"\u269B\uFE0F",color:"#efefaf",class:"effector",description:"Enemies lose stress equal to 200% of its base speed while on the loop it's on. Needs to be charged with Energy in order to work. Can only be sold for 0 Energy.",baseCost:{energy:500},upgrades:{charge:{name:"Charge",effect:e=>1+e,cost:e=>({energy:100}),unit:"x"}},progress(e){var t,n;return((t=e.upgrades.charge)!=null?t:0)+1-((n=e.data.used)!=null?n:0)},onUpdate(e,t,n,a){var r,l,o,u;e.sellValue={energy:0};let i=((r=e.upgrades.charge)!=null?r:0)+1;if(((l=e.data.used)!=null?l:0)<i)for(let c of t.enemies){let m=Math.max(n*2,c.lifetime);c.lifetime-=m,e.data.used=((o=e.data.used)!=null?o:0)+m/15,c[$]||(c[$]={}),c[$][(u=t[de])!=null?u:0]=0}}},fc={name:"Sharpener",icon:"\u{1F5E1}\uFE0F",color:"#afafaf",class:"influencer",description:"Increase the damage of adjacent Damager buildings.",baseCost:{energy:400},upgrades:{factor:{name:"Factor",max:10,effect:e=>1.5+e*.1,cost:e=>({energy:200*1.6**e}),precision:1,unit:"x"}},influences(e,t){var n;return{damage:this.upgrades.factor.effect((n=e.upgrades.factor)!=null?n:0)}}},mc={name:"Overclocker",icon:"\u23F0",color:"#efafaf",class:"influencer",description:"Increase the speed of adjacent Damager buildings.",baseCost:{energy:300},upgrades:{factor:{name:"Factor",max:5,effect:e=>1.25+e*.05,cost:e=>({energy:200*2**e}),precision:2,unit:"x"}},influences(e,t){var n;return{speed:this.upgrades.factor.effect((n=e.upgrades.factor)!=null?n:0)}}},pc={name:"Lengthener",icon:"\u{1FAE7}",color:"#afcfef",class:"influencer",description:"Increase the duration of adjacent Effector buildings.",baseCost:{energy:500},upgrades:{factor:{name:"Factor",max:4,effect:e=>1.2+e*.05,cost:e=>({energy:200*2.4**e}),precision:2,unit:"x"}},influences(e,t){var n;return{duration:this.upgrades.factor.effect((n=e.upgrades.factor)!=null?n:0)}}},vc={name:"Synthesizer",icon:"\u{1F9EC}",color:"#cfafef",class:"influencer",description:"Increase the gain amount of adjacent Generator buildings.",baseCost:{energy:600},upgrades:{factor:{name:"Factor",max:5,effect:e=>1.5+e*.1,cost:e=>({energy:300*1.6**e}),precision:1,unit:"x"}},influences(e,t){var n;return{amount:this.upgrades.factor.effect((n=e.upgrades.factor)!=null?n:0)}}},hc={name:"Expander",icon:"\u{1F533}",color:"#cfcfcf",class:"influencer",description:"Increase the threshold of adjacent Generator buildings.",baseCost:{energy:500},upgrades:{factor:{name:"Factor",max:5,effect:e=>1.25+e*.05,cost:e=>({energy:300*2**e}),precision:2,unit:"x"}},influences(e,t){var n;return{threshold:this.upgrades.factor.effect((n=e.upgrades.factor)!=null?n:0)}}},bc={name:"Energizer",icon:"\u26A1",color:"#efefaf",class:"generator",description:"Infuse enemies with Energy while they are on the loop it's on, resulting in them dropping more Energy when defeated. Scales with base enemy speed.",baseCost:{energy:200},upgrades:{amount:{name:"Amount",effect:e=>2+e*(e+1)/2,cost:e=>({energy:400*3**e}),unit:"/rad"}},onUpdate(e,t,n,a){var r,l,o,u;let i=this.upgrades.amount.effect((r=e.upgrades.amount)!=null?r:0)*((l=a.amount)!=null?l:1);for(let c of t.enemies)c.loot.energy=((o=c.loot.energy)!=null?o:0)+i*n*Math.abs(c.speed),c[$]||(c[$]={}),c[$][(u=t[de])!=null?u:0]=0}},yc={name:"Multiplier",icon:"\u2716\uFE0F",color:"#efefaf",class:"generator",description:"When an enemy enters the loop its on, if an enemy's Energy drop is in a certain threshold or below, double the Energy drop.",baseCost:{energy:600},upgrades:{threshold:{name:"Threshold",effect:e=>200+50*e,cost:e=>({energy:500*3**e})}},onEnemyEnter(e,t,n,a){var r,l,o;let i=this.upgrades.threshold.effect((r=e.upgrades.threshold)!=null?r:0)*((l=a.threshold)!=null?l:1);n.loot.energy<=i&&(n.loot.energy*=2,n[$]||(n[$]={}),n[$][(o=t[de])!=null?o:0]=0)}},_c={name:"Observer",icon:"\u{1F441}\uFE0F",color:"#efafcf",class:"generator",description:"Generates Information while an enemy is on the loop it's on. Use Information to purchase global upgrades (accessed when no loop is selected).",baseCost:{energy:400},upgrades:{amount:{name:"Amount",effect:e=>1+e,cost:e=>({energy:400*2**e}),unit:"/s"}},onUpdate(e,t,n,a){var r,l,o,u;let i=this.upgrades.amount.effect((r=e.upgrades.amount)!=null?r:0)*((l=a.amount)!=null?l:1);for(let c of t.enemies)c.loot.info=((o=c.loot.info)!=null?o:0)+i*n,c[$]||(c[$]={}),c[$][(u=t[de])!=null?u:0]=0}},wc={name:"The Thinker",icon:"\u{1F914}",color:"#efafcf",class:"generator",description:"When an enemy enters the loop its on, if an enemy's Info drop is in a certain threshold or below, double the Info drop.",baseCost:{energy:500},upgrades:{threshold:{name:"Threshold",effect:e=>100+50*e,cost:e=>({energy:200*3**e})}},onEnemyEnter(e,t,n,a){var r,l,o;let i=this.upgrades.threshold.effect((r=e.upgrades.threshold)!=null?r:0)*((l=a.threshold)!=null?l:1);n.loot.info<=i&&(n.loot.info*=2,n[$]||(n[$]={}),n[$][(o=t[de])!=null?o:0]=0)}};const At=e=>(Jt("data-v-38755378"),e=e(),Kt(),e),Cc=At(()=>v("div",{class:"handle material-icons"},"drag_handle",-1)),Nc={key:0,class:"actions"},kc=At(()=>v("span",{class:"material-icons"},"content_paste",-1)),Sc=At(()=>v("span",{class:"material-icons"},"content_copy",-1)),xc=At(()=>v("span",{class:"material-icons"},"edit",-1)),Mc=At(()=>v("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),Ic={key:1,class:"actions"},Tc=At(()=>v("span",{class:"material-icons"},"check",-1)),Fc=At(()=>v("span",{class:"material-icons"},"close",-1)),$c={key:2,class:"details"},Ec={class:"save-version"},Dc=At(()=>v("br",null,null,-1)),Pc={key:0},Ac=At(()=>v("hr",null,null,-1)),Oc={key:1},qc={key:3,class:"details"},Bc={key:4,class:"details error"},Vc=At(()=>v("br",null,null,-1)),Lc=re({__name:"Save",props:{save:{}},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:a}=Ge(n),i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=L(!1),l=L(!1),o=L("");Ct(r,()=>{var w;return o.value=(w=a.value.name)!=null?w:""});const u=D(()=>a.value!=null&&a.value.id===Z.id),c=D(()=>{var w;return u.value?Z.time:(w=a.value!=null&&a.value.time)!=null?w:0}),m=Un(D(()=>{var S,b;let w=(b=(S=a.value)==null?void 0:S.layers)==null?void 0:b.main;return pe(Object.keys((w==null?void 0:w.unlockedBuildings)||{}).length)+" / "+pe(Object.keys(Xn).length)+" buildings unlocked"}));function p(){t("editName",o.value),r.value=!1}return(w,S)=>(k(),T("div",{class:Ae(["save",{active:u.value}])},[Cc,r.value?(k(),T("div",Ic,[v("button",{onClick:p,class:"button"},[s(Ue,{display:"Save",direction:f(H).Left,class:"info"},{default:J(()=>[Tc]),_:1},8,["direction"])]),v("button",{onClick:S[5]||(S[5]=b=>r.value=!r.value),class:"button"},[s(Ue,{display:"Cancel",direction:f(H).Left,class:"info"},{default:J(()=>[Fc]),_:1},8,["direction"])])])):(k(),T("div",Nc,[f(a).error==null&&!l.value?(k(),ie(fa,{key:0,onClick:S[0]||(S[0]=b=>t("export")),class:"button",left:""},{default:J(()=>[s(Ue,{display:"Export",direction:f(H).Left,class:"info"},{default:J(()=>[kc]),_:1},8,["direction"])]),_:1})):W("",!0),f(a).error==null&&!l.value?(k(),T("button",{key:1,onClick:S[1]||(S[1]=b=>t("duplicate")),class:"button"},[s(Ue,{display:"Duplicate",direction:f(H).Left,class:"info"},{default:J(()=>[Sc]),_:1},8,["direction"])])):W("",!0),f(a).error==null&&!l.value?(k(),T("button",{key:2,onClick:S[2]||(S[2]=b=>r.value=!r.value),class:"button"},[s(Ue,{display:"Edit Name",direction:f(H).Left,class:"info"},{default:J(()=>[xc]),_:1},8,["direction"])])):W("",!0),s(Ll,{disabled:u.value,onClick:S[3]||(S[3]=b=>t("delete")),onConfirmingChanged:S[4]||(S[4]=b=>l.value=b)},{default:J(()=>[s(Ue,{display:"Delete",direction:f(H).Left,class:"info"},{default:J(()=>[Mc]),_:1},8,["direction"])]),_:1},8,["disabled"])])),f(a).error==null&&!r.value?(k(),T("div",$c,[v("button",{class:"button open",onClick:S[6]||(S[6]=b=>t("open"))},[v("h3",null,se(f(a).name),1)]),v("span",Ec,"v"+se(f(a).modVersion),1),Dc,c.value?(k(),T("div",Pc,"Last played "+se(f(i).format(c.value)),1)):W("",!0),Ac,f(m)?(k(),T("div",Oc,[(k(),ie(Xe(f(m))))])):W("",!0)])):f(a).error==null&&r.value?(k(),T("div",qc,[s(Xa,{modelValue:o.value,"onUpdate:modelValue":S[7]||(S[7]=b=>o.value=b),class:"editname",onSubmit:p},null,8,["modelValue"])])):(k(),T("div",Bc,[h(" Error: Failed to load save with id "+se(f(a).id),1),Vc,h(se(f(a).error),1)]))],2))}});var Rc=Se(Lc,[["__scopeId","data-v-38755378"]]);const na=e=>(Jt("data-v-14e7bbf6"),e=e(),Kt(),e),jc=na(()=>v("h1",{class:"result-title"},"ARCHIVE",-1)),zc=na(()=>v("h2",{style:{"font-style":"italic"}}," - Manage your save states. - ",-1)),Uc={class:"modal-footer"},Gc={class:"field",style:{"--layer-color":"#dadafa"}},Hc=na(()=>v("span",{class:"field-title"},"Create Save",-1)),Wc={class:"field-buttons"},Zc={class:"footer",style:{"--layer-color":"#dadafa"}},Yc=na(()=>v("div",{style:{"flex-grow":"1"}},null,-1)),Xc=re({__name:"SavesManager",setup(e,{expose:t}){const n=L(!1),a=L(null);t({open(){n.value=!0}});const i=L(!1),r=L(""),l=L(null);Ct(r,M=>{M?fn(()=>{try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=qt.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M),i.value=!0;return}const I=JSON.parse(M);if(typeof I!="object"){i.value=!0;return}const K=qn();I.id=K,mt(I),r.value="",i.value=!1,_e.saves.push(K)}catch{i.value=!0}}):i.value=!1});let o={},u=L(Object.keys(o).reduce((M,I)=>(M.push({label:I.split("/").slice(-1)[0].slice(0,-4),value:o[I]}),M),[]));const c=ca({});function m(M){if(c[M]==null){let I=localStorage.getItem(M);if(I==null)c[M]={error:"Save doesn't exist in localStorage",id:M};else if(I==="dW5kZWZpbmVk")c[M]={error:"Save is undefined",id:M};else try{if(I[0]!=="{")if(I[0]==="e")I=decodeURIComponent(escape(atob(I)));else if(I[0]==="\u1BE1")I=qt.decompressFromUTF16(I);else return console.warn("Unable to determine preset encoding",I),i.value=!0,c[M]={error:"Unable to determine preset encoding",id:M},c[M];c[M]={...JSON.parse(I),id:M}}catch(K){c[M]={error:K,id:M},console.warn(`SavesManager: Failed to load info about save with id ${M}:
${K}
${I}`)}}return c[M]}Ct(n,M=>{M&&Object.keys(c).forEach(I=>delete c[I])});const p=D(()=>_e.saves.reduce((M,I)=>(M[I]=m(I),M),{}));function w(M){let I;switch(Z.id===M?I=ga(Z):I=JSON.stringify(p.value[M]),me.exportEncoding){default:console.warn(`Unknown save encoding: ${me.exportEncoding}. Defaulting to lz`);case"lz":I=qt.compressToUTF16(I);break;case"base64":I=btoa(unescape(encodeURIComponent(I)));break;case"plain":break}const K=document.createElement("textarea");K.value=I,document.body.appendChild(K),K.select(),K.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(K)}function S(M){Z.id===M&&mt();const I={...p.value[M],id:qn()};mt(I),_e.saves.push(I.id)}function b(M){_e.saves=_e.saves.filter(I=>I!==M),localStorage.removeItem(M),c[M]=void 0}function C(M){p.value[Z.id].time=Z.time,mt(),c[Z.id]=void 0,on(p.value[M]),c[M]=void 0}function B(M){if(l.value=M,fn(()=>{l.value=null}),M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=qt.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M);return}const I=JSON.parse(M);I.id=qn(),mt(I),_e.saves.push(I.id),C(I.id)}function F(M,I){const K=p.value[M];K!=null&&(K.name=I,Z.id===M?(Z.name=I,mt()):(mt(K),c[M]=void 0))}return(M,I)=>(k(),ie(Dt,{modelValue:n.value,"onUpdate:modelValue":I[4]||(I[4]=K=>n.value=K),ref_key:"modal",ref:a},{header:J(()=>[jc,zc]),body:J(({shown:K})=>[K?(k(),ie(f(vi),{key:0,list:f(_e).saves,handle:".handle",itemKey:oe=>oe},{item:J(({element:oe})=>[s(Rc,{save:p.value[oe],onOpen:we=>C(oe),onExport:we=>w(oe),onEditName:we=>F(oe,we),onDuplicate:we=>S(oe),onDelete:we=>b(oe)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):W("",!0)]),footer:J(()=>[v("div",Uc,[s(Xa,{modelValue:r.value,"onUpdate:modelValue":I[0]||(I[0]=K=>r.value=K),title:"Import Save",placeholder:"Paste your save here!",class:Ae({importingFailed:i.value})},null,8,["modelValue","class"]),v("div",Gc,[Hc,v("div",Wc,[v("button",{class:"feature can",onClick:I[1]||(I[1]=K=>C(f(dn)().id))},"New Game"),Object.keys(f(u)).length>0?(k(),ie(ua,{key:0,options:f(u),modelValue:l.value,"onUpdate:modelValue":I[2]||(I[2]=K=>B(K)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):W("",!0)])]),v("div",Zc,[Yc,v("button",{class:"feature can",onClick:I[3]||(I[3]=K=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var ii=Se(Xc,[["__scopeId","data-v-14e7bbf6"]]);const ht=e=>(Jt("data-v-318a1c31"),e=e(),Kt(),e),Jc=["src","alt"],Kc={key:1,class:"title"},Qc=ht(()=>v("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),ed={class:"discord"},td={class:"discord-links"},nd={key:0},ad=["href"],id=ht(()=>v("li",null,[v("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"The Paper Pilot Community")],-1)),rd=ht(()=>v("li",null,[v("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),sd={href:"https://forums.moddingtree.com/",target:"_blank"},od=ht(()=>v("span",{class:"material-icons"},"forum",-1)),ld=ht(()=>v("span",{class:"material-icons"},"info",-1)),ud=ht(()=>v("span",{class:"material-icons"},"library_books",-1)),cd=ht(()=>v("span",{class:"material-icons"},"settings",-1)),dd=ht(()=>v("span",{class:"material-icons"},"library_books",-1)),gd=ht(()=>v("span",{class:"material-icons"},"settings",-1)),fd=ht(()=>v("span",{class:"material-icons"},"info",-1)),md={href:"https://forums.moddingtree.com/",target:"_blank"},pd=ht(()=>v("span",{class:"material-icons"},"forum",-1)),vd={class:"discord"},hd={class:"discord-links"},bd={key:0},yd=["href"],_d=ht(()=>v("li",null,[v("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"The Paper Pilot Community")],-1)),wd=ht(()=>v("li",null,[v("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Cd=re({__name:"Nav",setup(e){const t=L(null),n=L(null),a=L(null),i=L(null),{useHeader:r,banner:l,title:o,discordName:u,discordLink:c,versionNumber:m}=me;function p(){window.open(c,"mywindow")}return(w,S)=>(k(),T(G,null,[f(r)?(k(),T("div",Vt({key:0,class:"nav"},w.$attrs),[f(l)?(k(),T("img",{key:0,src:f(l),class:"banner",alt:f(o)},null,8,Jc)):(k(),T("div",Kc,se(f(o)),1)),v("div",{onClick:S[0]||(S[0]=b=>{var C;return(C=i.value)==null?void 0:C.open()}),class:"version-container"},[s(Ue,{display:"Changelog",direction:f(H).Down,class:"version"},{default:J(()=>[v("span",null,"v"+se(f(m)),1)]),_:1},8,["direction"])]),Qc,v("div",ed,[v("span",{onClick:p,class:"material-icons"},"discord"),v("ul",td,[f(c)?(k(),T("li",nd,[v("a",{href:f(c),target:"_blank"},se(f(u)),9,ad)])):W("",!0),id,rd])]),v("div",null,[v("a",sd,[s(Ue,{display:"Forums",direction:f(H).Down,yoffset:"5px"},{default:J(()=>[od]),_:1},8,["direction"])])]),v("div",{onClick:S[1]||(S[1]=b=>{var C;return(C=t.value)==null?void 0:C.open()})},[s(Ue,{display:"Info",direction:f(H).Down,class:"info"},{default:J(()=>[ld]),_:1},8,["direction"])]),v("div",{onClick:S[2]||(S[2]=b=>{var C;return(C=n.value)==null?void 0:C.open()})},[s(Ue,{display:"Saves",direction:f(H).Down,xoffset:"-20px"},{default:J(()=>[ud]),_:1},8,["direction"])]),v("div",{onClick:S[3]||(S[3]=b=>{var C;return(C=a.value)==null?void 0:C.open()})},[s(Ue,{display:"Settings",direction:f(H).Down,xoffset:"-66px"},{default:J(()=>[cd]),_:1},8,["direction"])])],16)):(k(),T("div",Vt({key:1,class:"overlay-nav"},w.$attrs),[v("div",{onClick:S[4]||(S[4]=b=>{var C;return(C=i.value)==null?void 0:C.open()}),class:"version-container"},[s(Ue,{display:"Changelog",direction:f(H).Right,xoffset:"25%",class:"version"},{default:J(()=>[v("span",null,"v"+se(f(m)),1)]),_:1},8,["direction"])]),v("div",{onClick:S[5]||(S[5]=b=>{var C;return(C=n.value)==null?void 0:C.open()})},[s(Ue,{display:"Saves",direction:f(H).Right},{default:J(()=>[dd]),_:1},8,["direction"])]),v("div",{onClick:S[6]||(S[6]=b=>{var C;return(C=a.value)==null?void 0:C.open()})},[s(Ue,{display:"Settings",direction:f(H).Right},{default:J(()=>[gd]),_:1},8,["direction"])]),v("div",{onClick:S[7]||(S[7]=b=>{var C;return(C=t.value)==null?void 0:C.open()})},[s(Ue,{display:"Info",direction:f(H).Right},{default:J(()=>[fd]),_:1},8,["direction"])]),v("div",null,[v("a",md,[s(Ue,{display:"Forums",direction:f(H).Right,xoffset:"7px"},{default:J(()=>[pd]),_:1},8,["direction"])])]),v("div",vd,[v("span",{onClick:p,class:"material-icons"},"discord"),v("ul",hd,[f(c)?(k(),T("li",bd,[v("a",{href:f(c),target:"_blank"},se(f(u)),9,yd)])):W("",!0),_d,wd])])],16)),s(yl,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),s(ii,{ref_key:"savesManager",ref:n},null,512),s(Tl,{ref_key:"options",ref:a},null,512),s(Qo,{ref_key:"changelog",ref:i},null,512)],64))}});var ri=Se(Cd,[["__scopeId","data-v-318a1c31"]]);const Nd={style:{display:"none"}},kd={class:"inner-tab"},Sd=re({__name:"Game",setup(e){const t=Tt(Z,"tabs"),n=D(()=>Object.keys(it)),a=me.useHeader;function i(r){const{display:l,minimized:o,name:u,color:c,minimizable:m,nodes:p,minimizedDisplay:w}=r;return{display:l,minimized:o,name:u,color:c,minimizable:m,nodes:p,minimizedDisplay:w}}return(r,l)=>(k(),T("div",{class:Ae(["tabs-container",{useHeader:f(a)}])},[(k(!0),T(G,null,Ft(t.value,(o,u)=>{var c,m;return k(),T("div",{key:u,class:Ae(["tab",f((c=f(it)[o])==null?void 0:c.classes)]),style:at(f((m=f(it)[o])==null?void 0:m.style))},[v("div",Nd,[u===0&&!f(a)?(k(),ie(ri,{key:0})):W("",!0)]),v("div",kd,[n.value.includes(o)?(k(),ie(zo,Vt({key:0},i(f(it)[o]),{index:u,onSetMinimized:p=>f(it)[o].minimized.value=p}),null,16,["index","onSetMinimized"])):(k(),ie(Xe(o),{key:1,index:u},null,8,["index"]))])],6)}),128))],2))}});var xd=Se(Sd,[["__scopeId","data-v-ad1e1194"]]);const Fn=e=>(Jt("data-v-4a50ce42"),e=e(),Kt(),e),Md={class:"game-over-modal-header"},Id=["src","alt"],Td={class:"game-over-modal-title"},Fd=Fn(()=>v("h2",null,"Congratulations!",-1)),$d={key:0},Ed=Fn(()=>v("br",null,null,-1)),Dd=Fn(()=>v("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),Pd=Fn(()=>v("br",null,null,-1)),Ad=["href"],Od=Fn(()=>v("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),qd=re({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:a,discordLink:i,versionNumber:r,versionTitle:l}=me,o=D(()=>Yt(Z.timePlayed)),u=D(()=>ai.value&&!Z.keepGoing),c=Tt(Z,"autosave");function m(){Z.keepGoing=!0}function p(){on(dn())}return(w,S)=>(k(),ie(Dt,{"model-value":u.value},{header:J(()=>[v("div",Md,[f(n)?(k(),T("img",{key:0,class:"game-over-modal-logo",src:f(n),alt:f(t)},null,8,Id)):W("",!0),v("div",Td,[Fd,v("h4",null,"You've beaten "+se(f(t))+" v"+se(f(r))+": "+se(f(l)),1)])])]),body:J(({shown:b})=>[b?(k(),T("div",$d,[v("div",null,"It took you "+se(o.value)+" to beat the game.",1),Ed,Dd,Pd,v("div",null,[v("a",{href:f(i),class:"game-over-modal-discord-link"},[Od,h(" "+se(f(a)),1)],8,Ad)]),s(Wt,{title:"Autosave",modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=C=>c.value=C)},null,8,["modelValue"])])):W("",!0)]),footer:J(()=>[v("div",{class:"game-over-footer"},[v("button",{onClick:m,class:"button"},"Keep Going"),v("button",{onClick:p,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var Bd=Se(qd,[["__scopeId","data-v-4a50ce42"]]);const aa=e=>(Jt("data-v-2776d67d"),e=e(),Kt(),e),Vd=aa(()=>v("div",{class:"nan-modal-header"},[v("h2",null,"NaN value detected!")],-1)),Ld={key:0},Rd=aa(()=>v("br",null,null,-1)),jd=["href"],zd=aa(()=>v("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Ud=aa(()=>v("br",null,null,-1)),Gd={class:"nan-footer"},Hd=re({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=me,a=L(!0),i=L(!0),r=Tt(Be,"hasNaN"),l=L(null);Ct(r,w=>{w?(a.value=Z.autosave,i.value=Z.devSpeed===0):(Z.autosave=a.value,Z.devSpeed=i.value?0:null)});const o=D(()=>{var w;return(w=Be.NaNPath)==null?void 0:w.join(".")}),u=D(()=>Be.NaNPersistent!=null?Be.NaNPersistent.value:null);function c(){Be.NaNPersistent!=null&&(Be.NaNPersistent.value=new d(0),Be.hasNaN=!1)}function m(){Be.NaNPersistent&&(Be.NaNPersistent.value=new d(1),Be.hasNaN=!1)}function p(){Be.NaNPersistent&&(Be.NaNPersistent.value=new d(NaN),Be.hasNaN=!1)}return(w,S)=>(k(),T(G,null,[s(Dt,Vt({modelValue:r.value,"onUpdate:modelValue":S[4]||(S[4]=b=>r.value=b)},w.$attrs),{header:J(()=>[Vd]),body:J(()=>[v("div",null,[h(' Attempted to assign "'+se(o.value)+'" to NaN',1),u.value?(k(),T("span",Ld,se(" ")+"(previously "+se(f(We)(u.value))+")",1)):W("",!0),h(". Auto-saving has been "+se(a.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Rd,v("div",null,[v("a",{href:f(n)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[zd,h(" "+se(f(t)||"The Paper Pilot Community"),1)],8,jd)]),Ud,s(Wt,{title:"Autosave",modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=b=>a.value=b)},null,8,["modelValue"]),f(me).enablePausing?(k(),ie(Wt,{key:0,title:"Pause game",modelValue:i.value,"onUpdate:modelValue":S[1]||(S[1]=b=>i.value=b)},null,8,["modelValue"])):W("",!0)]),footer:J(()=>[v("div",Gd,[v("button",{onClick:S[2]||(S[2]=b=>{var C;return(C=l.value)==null?void 0:C.open()}),class:"button"},"Open Saves Manager"),v("button",{onClick:c,class:"button"},"Set to 0"),v("button",{onClick:m,class:"button"},"Set to 1"),u.value&&f(d).neq(u.value,0)&&f(d).neq(u.value,1)?(k(),T("button",{key:0,onClick:S[3]||(S[3]=b=>r.value=!1),class:"button"}," Set to previous ")):W("",!0),v("button",{onClick:p,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),s(ii,{ref_key:"savesManager",ref:l},null,512)],64))}});var Wd=Se(Hd,[["__scopeId","data-v-2776d67d"]]);const Zd={key:0,class:"tpsDisplay"},Yd=re({__name:"TPS",setup(e){const t=D(()=>d.div(Be.lastTenTicks.length,Be.lastTenTicks.reduce((n,a)=>n+a,0)));return(n,a)=>t.value.isNan()?W("",!0):(k(),T("div",Zd,"TPS: "+se(f(pe)(t.value)),1))}});var Xd=Se(Yd,[["__scopeId","data-v-89b89152"]]);var Jd=re({__name:"App",setup(e){const t=me.useHeader,n=D(()=>It[_e.theme].variables),a=Tt(_e,"showTPS"),i=Tt(Be,"errors"),r=D(()=>De(fe(()=>s(G,null,[Hr.map(Mt)]))));return(l,o)=>i.value.length>0?(k(),T("div",{key:0,class:"error-container",style:at(n.value)},[s(qa,{errors:i.value},null,8,["errors"])],4)):(k(),T(G,{key:1},[v("div",{id:"modal-root",style:at(n.value)},null,4),v("div",{class:Ae(["app",{useHeader:f(t)}]),style:at(n.value)},[f(t)?(k(),ie(ri,{key:0})):W("",!0),s(xd),f(a.value)?(k(),ie(Xd,{key:1})):W("",!0),s(Bd),s(Wd),(k(),ie(Xe(r.value)))],6)],64))}});var Kd=Se(Jd,[["__scopeId","data-v-2d818346"]]);Je.on("setupVue",e=>e.use(yi));function Qd(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:a,onRegistered:i,onRegisteredSW:r,onRegisterError:l}=e;let o,u,c,m;const p=async(S=!0)=>{await c,S&&(o==null||o.addEventListener("controlling",b=>{b.isUpdate&&window.location.reload()})),await(m==null?void 0:m())};async function w(){if("serviceWorker"in navigator){const{Workbox:S,messageSW:b}=await Mn(()=>import("./workbox-window.4a8794bb.js"),[]);m=async()=>{u&&u.waiting&&await b(u.waiting,{type:"SKIP_WAITING"})},o=new S("./sw.js",{scope:"./",type:"classic"}),o.addEventListener("activated",C=>{C.isUpdate||a==null||a()});{const C=()=>{n==null||n()};o.addEventListener("waiting",C),o.addEventListener("externalwaiting",C)}o.register({immediate:t}).then(C=>{u=C,r?r("./sw.js",C):i==null||i(C)}).catch(C=>{l==null||l(C)})}}return c=w(),p}function eg(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:a,onRegistered:i,onRegisteredSW:r,onRegisterError:l}=e,o=L(!1),u=L(!1);return{updateServiceWorker:Qd({immediate:t,onNeedRefresh(){o.value=!0,n==null||n()},onOfflineReady(){u.value=!0,a==null||a()},onRegistered:i,onRegisteredSW:r,onRegisterError:l}),offlineReady:u,needRefresh:o}}const Na=console.error;console.error=function(...e){Na(...e)};window.onerror=function(e,t,n,a,i){return Be.errors.push(i instanceof Error?i:new Error(JSON.stringify(i))),Na(i),!0};window.onunhandledrejection=function(e){Be.errors.push(e.reason instanceof Error?e.reason:new Error(JSON.stringify(e.reason))),Na(e.reason)};document.title=me.title;window.projInfo=me;me.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Rr();const{globalBus:e}=await Mn(()=>Promise.resolve().then(function(){return Lr}),void 0),{startGameLoop:t}=await Mn(()=>import("./gameLoop.81512cc7.js"),["assets/gameLoop.81512cc7.js","assets/@fontsource.719f4e79.css","assets/vue.f8494a3b.js","assets/amator.0ea1c940.js","assets/bezier-easing.a990b400.js","assets/@vue.f39bd477.js","assets/lz-string.dccec454.js","assets/nanoevents.1080beb7.js","assets/vue-next-select.7e058054.js","assets/vue-next-select.9e6f4164.css","assets/vuedraggable.0800db33.js","assets/sortablejs.4c00aaaa.js","assets/vue-textarea-autosize.35804eaf.js","assets/vue-panzoom.e1b3955c.js","assets/panzoom.860778e1.js","assets/wheel.913c5885.js","assets/ngraph.events.083734c6.js","assets/vue-toastification.c91ff665.js","assets/vue-toastification.4b5f8ac8.css"]),n=window.vue=mi(Kd);n.config.errorHandler=function(a,i,r){console.error(a,r,i)},e.emit("setupVue",n),n.mount("#app"),fn(()=>{const a=_i(),{updateServiceWorker:i}=eg({onNeedRefresh(){a.info("New content available, click here to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){a.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(r){r&&setInterval(()=>r.update(),60*60*1e3)}})}),t()});export{d as D,Mn as _,Be as a,me as b,xu as c,Je as g,pa as l,Z as p,_e as s};
